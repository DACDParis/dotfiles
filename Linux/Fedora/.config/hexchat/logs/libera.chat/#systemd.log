**** BEGIN LOGGING AT Sun Dec 10 08:26:20 2023

Dec 10 08:26:19 *	Now talking on #systemd
Dec 10 08:26:19 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Dec 10 08:26:19 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Sun Dec 10 08:40:12 2023

**** BEGIN LOGGING AT Sun Dec 10 08:40:12 2023

Dec 10 08:40:34 *	Disconnected ()
**** ENDING LOGGING AT Sun Dec 10 08:40:34 2023

**** BEGIN LOGGING AT Sun Dec 10 08:41:01 2023

Dec 10 08:41:01 *	Now talking on #systemd
Dec 10 08:41:01 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Dec 10 08:41:01 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Sun Dec 10 08:42:24 2023

**** BEGIN LOGGING AT Sun Dec 10 08:42:24 2023

Dec 10 08:42:39 *	ss (~~@user/ss) has joined
Dec 10 08:43:16 *	dacd has quit (Ping timeout: 245 seconds)
**** ENDING LOGGING AT Sun Dec 10 09:00:31 2023

**** BEGIN LOGGING AT Sun Dec 10 09:00:31 2023

**** ENDING LOGGING AT Sun Dec 10 09:00:42 2023

**** BEGIN LOGGING AT Sun Dec 10 09:01:29 2023

Dec 10 09:01:29 *	Now talking on #systemd
Dec 10 09:01:29 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Dec 10 09:01:29 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Dec 10 09:02:07 *	colemickens_irc (uid214@id-214.uxbridge.irccloud.com) has joined
**** ENDING LOGGING AT Sun Dec 10 09:03:11 2023

**** BEGIN LOGGING AT Sun Dec 10 09:03:11 2023

**** ENDING LOGGING AT Sun Dec 10 09:03:53 2023

**** BEGIN LOGGING AT Sun Dec 10 09:03:53 2023

**** ENDING LOGGING AT Sun Dec 10 09:06:12 2023

**** BEGIN LOGGING AT Sun Dec 10 09:06:12 2023

**** ENDING LOGGING AT Sun Dec 10 09:11:35 2023

**** BEGIN LOGGING AT Sun Dec 10 09:11:35 2023

Dec 10 10:03:13 *	Disconnected ()
**** ENDING LOGGING AT Sun Dec 10 10:03:13 2023

**** BEGIN LOGGING AT Sun Dec 10 10:42:46 2023

Dec 10 10:42:46 *	Now talking on #systemd
Dec 10 10:42:46 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Dec 10 10:42:46 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Sun Dec 10 12:03:10 2023

**** BEGIN LOGGING AT Sun Dec 10 12:42:21 2023

Dec 10 12:42:20 *	Now talking on #systemd
Dec 10 12:42:20 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Dec 10 12:42:20 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Dec 10 14:20:34 *	Disconnected ()
**** ENDING LOGGING AT Sun Dec 10 14:20:34 2023

**** BEGIN LOGGING AT Sun Dec 10 14:23:34 2023

Dec 10 14:23:34 *	Now talking on #systemd
Dec 10 14:23:34 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Dec 10 14:23:34 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Dec 10 15:50:34 *	Disconnected ()
**** ENDING LOGGING AT Sun Dec 10 15:50:34 2023

**** BEGIN LOGGING AT Sun Dec 10 15:51:30 2023

Dec 10 15:51:29 *	Now talking on #systemd
Dec 10 15:51:29 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Dec 10 15:51:29 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Dec 10 16:02:04 *	Disconnected ()
**** ENDING LOGGING AT Sun Dec 10 16:02:04 2023

**** BEGIN LOGGING AT Sun Dec 10 16:02:52 2023

Dec 10 16:02:51 *	Now talking on #systemd
Dec 10 16:02:51 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Dec 10 16:02:51 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Sun Dec 10 16:03:39 2023

**** BEGIN LOGGING AT Mon Dec 11 09:04:48 2023

Dec 11 09:04:47 *	Now talking on #systemd
Dec 11 09:04:47 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Dec 11 09:04:47 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Dec 11 09:10:36 *	Disconnected ()
**** ENDING LOGGING AT Mon Dec 11 09:10:36 2023

**** BEGIN LOGGING AT Mon Dec 11 09:10:51 2023

Dec 11 09:10:51 *	Now talking on #systemd
Dec 11 09:10:51 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Dec 11 09:10:51 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Dec 11 09:11:02 *	Disconnected ()
**** ENDING LOGGING AT Mon Dec 11 09:11:02 2023

**** BEGIN LOGGING AT Mon Dec 11 09:11:23 2023

Dec 11 09:11:22 *	Now talking on #systemd
Dec 11 09:11:22 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Dec 11 09:11:22 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Dec 11 10:06:01 *	Disconnected ()
**** ENDING LOGGING AT Mon Dec 11 10:06:01 2023

**** BEGIN LOGGING AT Mon Dec 11 18:09:40 2023

Dec 11 18:09:37 *	Now talking on #systemd
Dec 11 18:09:37 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Dec 11 18:09:37 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Mon Dec 11 18:14:11 2023

**** BEGIN LOGGING AT Mon Dec 11 18:14:11 2023

Dec 11 19:20:11 <volga629>	Hello Everyone, how to use LD_PRELOAD in service file. I set Environment, but seems like it ignored
Dec 11 19:21:08 <volga629>	Should I use  in ExecStart line ?
Dec 11 19:21:30 <dminuoso_>	volga629: If its ignored, you should perhaps describe/share the unit file.
Dec 11 19:21:39 <gdamjan>	IMHO it should work in Environment=
Dec 11 19:22:47 <volga629>	I set Environment=LD_PRELOAD=/usr/lib64/mylib.so
Dec 11 19:23:23 <volga629>	Is it require any quotes ?
Dec 11 19:23:46 <gdamjan>	no
Dec 11 19:24:01 <gdamjan>	paste the whole unit
Dec 11 19:44:18 <volga629>	https://www.irccloud.com/pastebin/P2MT0CV7
Dec 11 19:44:27 <volga629>	Sorry distracted.
Dec 11 19:49:08 <gdamjan>	make sure the opensips is not suid, other than that, I don't know
Dec 11 19:49:48 <gdamjan>	the opensips executable*
Dec 11 19:51:23 <volga629>	Ok thanks
Dec 11 20:22:52 *	Disconnected ()
**** ENDING LOGGING AT Mon Dec 11 20:22:52 2023

**** BEGIN LOGGING AT Mon Dec 11 20:27:34 2023

Dec 11 20:27:32 *	Now talking on #systemd
Dec 11 20:27:32 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Dec 11 20:27:32 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Mon Dec 11 21:00:19 2023

**** BEGIN LOGGING AT Sun Dec 17 12:33:18 2023

Dec 17 12:33:17 *	Now talking on #systemd
Dec 17 12:33:17 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Dec 17 12:33:17 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Sun Dec 17 14:12:03 2023

**** BEGIN LOGGING AT Wed Jan 17 16:45:04 2024

janv. 17 16:45:04 *	Now talking on #systemd
janv. 17 16:45:04 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
janv. 17 16:45:04 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Wed Jan 17 16:46:04 2024

**** BEGIN LOGGING AT Wed Jan 17 21:56:11 2024

janv. 17 21:56:10 *	Now talking on #systemd
janv. 17 21:56:10 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
janv. 17 21:56:10 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Wed Jan 17 22:05:35 2024

janv. 17 22:05:35 *	Now talking on #systemd
janv. 17 22:05:35 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
janv. 17 22:05:35 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Wed Jan 17 22:07:05 2024

**** BEGIN LOGGING AT Wed Jan 17 22:07:05 2024

**** ENDING LOGGING AT Wed Jan 17 22:07:11 2024

**** BEGIN LOGGING AT Wed Jan 17 22:07:27 2024

janv. 17 22:07:27 *	Now talking on #systemd
janv. 17 22:07:27 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
janv. 17 22:07:27 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Wed Jan 17 22:07:51 2024

**** BEGIN LOGGING AT Wed Jan 17 22:09:27 2024

janv. 17 22:09:27 *	Now talking on #systemd
janv. 17 22:09:27 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
janv. 17 22:09:27 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Wed Jan 17 22:25:37 2024

janv. 17 22:25:37 *	Now talking on #systemd
janv. 17 22:25:37 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
janv. 17 22:25:37 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Wed Jan 17 22:37:34 2024

**** BEGIN LOGGING AT Thu Jan 18 07:26:22 2024

janv. 18 07:26:22 *	Now talking on #systemd
janv. 18 07:26:22 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
janv. 18 07:26:22 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
janv. 18 07:52:21 <Xogium>	grawity: oh dear. What a mess :O
janv. 18 08:26:07 *	Disconnected ()
**** ENDING LOGGING AT Thu Jan 18 08:26:07 2024

**** BEGIN LOGGING AT Thu Jan 18 08:26:31 2024

janv. 18 08:26:31 *	Now talking on #systemd
janv. 18 08:26:31 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
janv. 18 08:26:31 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Thu Jan 18 09:20:36 2024

**** BEGIN LOGGING AT Thu Jan 18 09:57:29 2024

janv. 18 09:57:29 *	Now talking on #systemd
janv. 18 09:57:29 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
janv. 18 09:57:29 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Mon Feb 12 13:07:12 2024

févr. 12 13:07:12 *	Now talking on #systemd
févr. 12 13:07:12 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
févr. 12 13:07:12 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Mon Feb 12 14:01:08 2024

févr. 12 14:01:08 *	Now talking on #systemd
févr. 12 14:01:08 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
févr. 12 14:01:08 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
févr. 12 14:09:13 <phpn00b>	Why is it so hard to harden a service? :-) I think about writing a brute-force tool to get a high hardening ratio
févr. 12 14:09:44 <phpn00b>	Oh, someone else did: https://awesomeopensource.com/project/alegrey91/systemd-service-hardening
févr. 12 14:10:23 <gdamjan>	phpn00b: because no two services are alike, and developers don't document what their programs need
févr. 12 14:15:06 <phpn00b>	gdamjan: So actually the same problem, the AppArmor community has?
févr. 12 14:15:30 <gdamjan>	most probably
févr. 12 14:16:48 <gdamjan>	you can start with a copy of /usr/lib/systemd/portable/profile/strict/service.conf and then remove directives ¯\_(ツ)_/¯
févr. 12 14:17:13 <phpn00b>	Debian doesn't have this file, but maybe I can find it in git. thanks
févr. 12 14:17:25 <phpn00b>	https://github.com/systemd/systemd/blob/main/src/portable/profile/strict/service.conf
févr. 12 14:17:45 <phpn00b>	uh, but this seems like a subset only, doesn't it?
févr. 12 14:19:37 <gdamjan>	subset of?
févr. 12 14:44:39 <grift_>	Yes.That is why I mostly prefer SELinux over most of the systemd features. SELinux logs what it blocks and SElinux is more flexible
févr. 12 14:49:33 <grift_>	but as with everything combining strenghts is even better
févr. 12 14:52:27 <gdamjan>	SElinux is not bad, I wish there was some better "UI" and tooling
févr. 12 14:54:23 <grift_>	essentially all you need is your favorite text editor, setools for analysis and semodule for a module store
févr. 12 14:54:40 <grift_>	extra tooling just complicates things because the implies yet more abstraction
févr. 12 14:54:43 <Jannik2099>	and three years of understanding the ref policy
févr. 12 14:55:00 <Jannik2099>	and two more to realize that redhat uses a fucked up mutation of it, so all your experimentation on fedora does not apply
févr. 12 14:55:24 <grift_>	policy is configuration. you dont need refpolicy and you dont need redhat policy
févr. 12 14:55:46 <grift_>	but yes you need to know the basic policy language and you need to know how to interpret what selinux is telling you
févr. 12 14:56:00 <Foxboron>	Jannik2099: Frankly, most ILM/security stuff is heavily patched on enterprise distros
févr. 12 14:56:02 <Jannik2099>	yes but you'll probably want to develop against refpol if you don't want to first reinvent the universe
févr. 12 14:56:08 <grift_>	but that is not a matter of years provided that you write your own policy
févr. 12 14:57:03 <grift_>	thats the thing, there is no reinvention because every environment is unique and every one has unique preferences
févr. 12 14:58:23 <grift_>	the best security policy is one that is tailored
févr. 12 14:58:48 <grift_>	because the less allow rules the easier it is to maintain
févr. 12 14:59:24 <grift_>	and the more secure obviously
févr. 12 15:00:46 <grift_>	but i can imagine that its hard to see the value
févr. 12 15:01:06 <grift_>	first thing one should do is to not look at refpolicy and module policy
févr. 12 15:01:10 <grift_>	that is legacy
févr. 12 15:01:26 <grift_>	new cil policy makes a world of difference
févr. 12 15:02:04 <grift_>	you can edit everything at runtime most of the time and maintain a human readable policy in the module store
févr. 12 15:02:34 <grift_>	you dont have to go through a build process to build a module or disassemble one
févr. 12 15:02:40 <grift_>	its just plain text
févr. 12 15:03:04 <grift_>	that makes it a quick turnaround, need a change. only takes a second
févr. 12 15:03:30 <grift_>	becomes part of the workflow
févr. 12 15:04:47 <grift_>	and then you basically get to the point where you want to be. selinux is your enforcement robot in the kernel and your shell is the partyline
févr. 12 15:09:57 <grift_>	for me its essentially like keeping a diary and my policy tells a lot about my habits
févr. 12 15:11:52 <grift_>	i embed config recipes dotfiles etc as comments in the policy. combine it with mkosi configs for the various different systems in my network
févr. 12 15:13:45 <grift_>	https://git.defensec.nl/?p=dssp5.git;a=tree;h=refs/heads/dssp5-debian;hb=refs/heads/dssp5-debian
**** BEGIN LOGGING AT Sat Feb 17 17:08:29 2024

Feb 17 17:08:29 *	Now talking on #systemd
Feb 17 17:08:29 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 17 17:08:29 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Tue Feb 20 15:07:42 2024

Feb 20 15:07:42 *	Now talking on #systemd
Feb 20 15:07:42 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 20 15:07:42 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Tue Feb 20 15:32:26 2024

Feb 20 15:32:26 *	Now talking on #systemd
Feb 20 15:32:26 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 20 15:32:26 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Tue Feb 20 15:37:56 2024

Feb 20 15:37:56 *	Now talking on #systemd
Feb 20 15:37:56 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 20 15:37:56 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Feb 20 17:59:57 <trilogy>	Hello, I am dealing with wanting to determine the status of individual Tomcat applications. I believe the best approach is to have each application write a PID file, and then make a unit for each component that determines status off of that PID file. The trouble is that I'd also like to implement a watchdog functionality, so that the status of each application can be determined as 'failed' or otherwise 
Feb 20 18:00:03 <trilogy>	down during an exception situation. I'm wondering if there's a way to do this without doing any dbus calls or something too complicated from the application side. Ideas?
Feb 20 19:23:57 <tlund>	uuh, something weird is going on. during apt upgrade, systemct is restarting a service, the "systemctl --quiet --system restart" process has launched a child "/bin/systemd-tty-ask-password-agent --watch" and it is now blocking, no output on the terminal
Feb 20 19:24:13 <tlund>	there is no reason to ask for a password, since everything is running as root?
Feb 20 19:24:19 <tlund>	what did I do wrong? :)
Feb 20 19:25:32 <colo>	trilogy: tomcat is just another java app. I recommend ripping out the shitfest that the SysV-startup-script is most probably gonna be, and just figure out which `/usr/bin/java ...` argument vector you need in the end, and then start that as a "simple" service. for proper reloading and stuff, you will need to make some other things tick (differs according to tomcat config), but in the long run, the other crap is unsustainable.
Feb 20 19:25:38 <colo>	(in my opinion and experience)
Feb 20 19:33:41 <tlund>	hmmm, my issue was relatred to some option to the daemon it was trying to restart, don't know which, but after removing override.conf that issue went away...
Feb 20 19:46:53 <trilogy>	Thanks colo! I need to do some reading up on Tomcat for sure. Just so I have a list of options, do you have any other ideas that don't change Tomcat? I assume touching Tomcat is going to be an instant veto, though what you say makes total sense to me
Feb 20 20:01:40 <colo>	trilogy: in my experience, you can adapt a systemd unit to pretty much any given tomcat config, without relying on the long forsaken shellscripts that they ship to manage the daemon on any sort of UNIX-like OS.
Feb 20 20:02:47 <colo>	you will have to learn a bit more about what the given application/tomcat distribution has set up to interact with its init script, and then try to find systemd-native equivalents for that. for instance, there used to be a mechanism where, when tomcat received a special ASCII string in a TCP stream on a given port, it will initiate graceful shutdown.
Feb 20 20:03:09 <colo>	(it's kinda stupid, but back then, the JVM just didn't offer better primitives, I guess)
Feb 20 20:03:26 <colo>	you could adapt to that by having an ExecStop that does that using netcat or socat, for instance
Feb 20 20:03:56 <trilogy>	Interesting...
Feb 20 20:04:11 <colo>	you will probably have to get a bit creative in more "extreme" assumptions/setups, but in my opinion, it's worth it. you will know what drives the daemon, what stops it, how/where exactly it logs, and so on.
Feb 20 20:05:04 <colo>	there's many layers of history and re-invented wheels in any given application server, and how it's configured and operated these days. it really sucks hard imnsho. but it can be beaten into shape, and I think it should.
Feb 20 20:05:20 <trilogy>	For sure. That makes sense. Just need to do some convincing to others that it's worth it. Do you happen to know of any resources for what you describe? Even for that example
Feb 20 20:06:07 <trilogy>	Yeah. I need to learn more about how tomcat works for sure. It's not sustainable, what we do now
Feb 20 21:35:12 <colo>	trilogy: well, once you have tomcat started via your current means, look at the resulting process in the process table. look at the command line arguments, the environment ( /proc/PID/environ ) and see if you can re-create the parts that make sense for your deployment in a systemd unit file. (I'd use a throaway VM/container copy for that purpose)
Feb 20 21:35:41 <colo>	then, check what the init/startup script does on shutdown and reload, and try to recreate that in your service unit
Feb 20 21:36:12 <colo>	once you got that nailed down, migrate to your proper unit file in prod, and get rid of the init/startup script
Feb 20 21:39:41 <colo>	logging would be the next step, but that requires messing with the tomcat config (and probably some logging framework's config), and I am not even sure you can get proper journal integration with any kind of JRE these days yet
Feb 20 21:40:08 <colo>	but knowing what is happening in the logging department, because of which part of the configuration, is priceless anyway
**** BEGIN LOGGING AT Wed Feb 21 00:53:37 2024

Feb 21 00:53:37 *	Now talking on #systemd
Feb 21 00:53:37 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 21 00:53:37 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Wed Feb 21 10:31:33 2024

Feb 21 10:31:33 *	Now talking on #systemd
Feb 21 10:31:33 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 21 10:31:33 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Wed Feb 21 10:38:41 2024

Feb 21 10:38:40 *	Now talking on #systemd
Feb 21 10:38:40 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 21 10:38:40 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Feb 21 13:56:45 <ph88^>	I'm trying to make a systemd timer these are the files i have created https://bpa.st/ZIHA i have put the systemd .service and .timer file in /etc/systemd/system  I don't see the timer show up when i do systemctl list-timers   how can i install the timer correctly so that it shows up and runs? ubuntu 22.04
Feb 21 14:39:36 <gdamjan>	you need to enable and/or start the timer unit
Feb 21 14:39:54 <gdamjan>	`systemctl enable --now xyz.timer` does both
Feb 21 14:40:15 <gdamjan>	also, the timer should really be WantedBy=timers.target
**** BEGIN LOGGING AT Wed Feb 21 16:46:59 2024

Feb 21 16:46:59 *	Now talking on #systemd
Feb 21 16:46:59 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 21 16:46:59 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Wed Feb 21 20:38:01 2024

Feb 21 20:38:01 *	Now talking on #systemd
Feb 21 20:38:01 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 21 20:38:01 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Wed Feb 21 23:19:27 2024

Feb 21 23:19:26 *	Now talking on #systemd
Feb 21 23:19:26 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 21 23:19:26 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Wed Feb 21 23:20:04 2024

**** BEGIN LOGGING AT Wed Feb 21 23:21:17 2024

Feb 21 23:21:17 *	Now talking on #systemd
Feb 21 23:21:17 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 21 23:21:17 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Wed Feb 21 23:50:23 2024

**** BEGIN LOGGING AT Wed Feb 21 23:50:23 2024

**** ENDING LOGGING AT Wed Feb 21 23:52:21 2024

**** BEGIN LOGGING AT Wed Feb 21 23:52:21 2024

**** ENDING LOGGING AT Wed Feb 21 23:53:41 2024

**** BEGIN LOGGING AT Wed Feb 21 23:53:41 2024

**** ENDING LOGGING AT Wed Feb 21 23:57:59 2024

**** BEGIN LOGGING AT Wed Feb 21 23:57:59 2024

**** ENDING LOGGING AT Thu Feb 22 13:52:24 2024

**** BEGIN LOGGING AT Thu Feb 22 13:55:48 2024

Feb 22 13:55:47 *	Now talking on #systemd
Feb 22 13:55:47 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 22 13:55:47 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Thu Feb 22 13:57:12 2024

Feb 22 13:57:11 *	Now talking on #systemd
Feb 22 13:57:11 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 22 13:57:11 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Feb 22 14:01:13 <ph88^>	I'm trying to make a systemd timer these are the files i have created https://bpa.st/ZIHA i have put the systemd .service and .timer file in /etc/systemd/system  I don't see the timer show up when i do systemctl list-timers   how can i install the timer correctly so that it shows up and runs? ubuntu 22.04
Feb 22 14:01:25 <grawity>	you need to `systemctl start` the timer
Feb 22 14:01:49 <grawity>	and/or to `systemctl enable` it to start on boot
Feb 22 14:01:58 <rlikon>	greets
Feb 22 14:01:58 <grawity>	same as yesterday's answer
Feb 22 14:02:43 <rlikon>	greets
Feb 22 14:02:46 <rlikon>	test
Feb 22 14:02:52 <rlikon>	hello?
Feb 22 14:03:00 <ph88^>	grawity, i got disconnected yesterday i think, i didn't see your answer
Feb 22 14:03:09 <ph88^>	hello rlikon 
Feb 22 14:03:13 <grawity>	it was someone else's but anyway
Feb 22 14:03:18 <rlikon>	ph88^: ha ha, you're here as well
Feb 22 14:03:24 <grawity>	every type of unit needs to be started to actually do its thing
Feb 22 14:03:41 <grawity>	timers get scheduled when they're "started", path units are armed when they're "started", etc
Feb 22 14:03:41 <rlikon>	I was trynig to check if the channel neede some sort of registration
Feb 22 14:03:45 <rlikon>	bye
Feb 22 14:04:43 <ph88^>	grawity, thanks :) i see it listed in list-timers now
Feb 22 14:04:56 <ph88^>	let's see till tomorrow if it has actually ran too without problems
Feb 22 14:31:50 <TuxJobs>	Problem which appears to be with systemd: If I execute the command `/usr/bin/MyCustomApp-xterm -class MyCustomApp -e /usr/bin/php "/path/to/kickstarter.php"` in a terminal, it opens (as expected) an XTerm window which belongs to the "MyCustomApp" taskbar group in Plasma. However, if that *exact* command is set as the value for `ExecStart` under `[Service]` in `MyCustomApp.service`, it (upon boot) instead becomes part of the standard "XTerm" class/taskbar 
Feb 22 14:31:50 <TuxJobs>	group. What could possibly explain this? By the way, `/usr/bin/MyCustomApp-xterm` is just a symlink/alias to "xterm", just so it's a different binary which is for some reason required to get different "groups" (simply specifying the -class is not enough).
Feb 22 14:34:32 <Norkle>	hi
Feb 22 14:39:50 <gdamjan>	TuxJobs: how does Plasma group tasks? (maybe check /proc/<pid of xterm>/cmd and exe in both cases. I'd guess systemd follows symlinks
Feb 22 14:40:31 <gdamjan>	also see https://www.freedesktop.org/software/systemd/man/latest/systemd.service.html#Command%20lines especially @
Feb 22 14:40:35 <grawity>	hold up, why are you running Xterm as a service...
Feb 22 14:40:58 <gdamjan>	heh :)
Feb 22 14:41:16 <gdamjan>	I hope it's a user service
Feb 22 14:44:22 <gdamjan>	also why use xterm on Plasma :P
Feb 22 14:44:47 <grawity>	tbh it's definitely more of a "where does KDE get app grouping info from" question than a systemd question either way
Feb 22 14:44:58 <grawity>	it *could* be slightly cgroup-related
Feb 22 15:24:36 <TuxJobs>	Huh?
Feb 22 15:25:17 <TuxJobs>	The question is: why does it not execute the command correctly when run from the .service when it does execute the command correctly when I manually paste it into a terminal?
Feb 22 15:25:52 <TuxJobs>	"why use xterm on Plasma" <-- 1. What? 2. Relevant in what way? 3. Because it doesn't take up a million gigabytes of RAM per instance?
Feb 22 15:26:11 <TuxJobs>	XTerm is the only reasonable non-RAM-eating terminal.
Feb 22 15:26:21 <TuxJobs>	And thus the only possible program to use for any non-trivial terminaling.
Feb 22 15:32:13 <TuxJobs>	Why does `/usr/bin/MyCustomApp-xterm -class MyCustomApp -e blablabla` work if I run it in a terminal as a human, but not if it's set as the value for `ExecStart` under `[Service]` in `MyCustomApp.service`? Only by running it manually does it make the XTerm window go into the "MyCustomApp" taskbar group, as instructed. If run from the .service file, it instead becomes part of the "XTerm" group. What could be causing this?
Feb 22 16:10:19 <gdamjan>	as I said, probably following symlinks
Feb 22 16:14:28 <TuxJobs>	gdamjan: Is that for me?
Feb 22 16:14:50 <gdamjan>	14:39:50 <gdamjan> TuxJobs: how does Plasma group tasks? (maybe check /proc/<pid of xterm>/cmd and exe in both cases. I'd guess systemd follows symlinks
Feb 22 16:20:15 <gdamjan>	exe and comm actually, where exe is a symlink, and comm a readable pseudo-file - I'm too lazy to search for the exact definition of each
Feb 22 16:53:18 <TuxJobs>	gdamjan: I don't understand what that response means.
Feb 22 17:02:58 <gdamjan>	what part don't you understand?
**** ENDING LOGGING AT Thu Feb 22 17:51:49 2024

**** BEGIN LOGGING AT Thu Feb 22 18:35:17 2024

Feb 22 18:35:17 *	Now talking on #systemd
Feb 22 18:35:17 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 22 18:35:17 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Feb 22 19:13:58 <zzywysm>	could someone review pull request 31446?  it's pure documentation and a no-brainer
Feb 22 20:14:41 <mjt0k>	my system is reported as "degraded",  and that's due to the following services (a few of them):
Feb 22 20:14:44 <mjt0k>	● svnserve@121-192.168.177.2:3690-192.168.177.25:59687.service  loaded failed failed SVN Per-Connection Server
Feb 22 20:14:47 <mjt0k>	● svnserve@2076-192.168.177.2:3690-192.168.177.25:60625.service loaded failed failed SVN Per-Connection Server
Feb 22 20:14:59 <mjt0k>	how to tell systemd to "forget" about these?
Feb 22 20:25:40 <edu4rdshl>	Fixing them
Feb 22 20:26:01 <mjt0k>	it's fixed long ago
Feb 22 20:26:15 <edu4rdshl>	systemctl reset-failed ?
Feb 22 20:26:35 <mjt0k>	that works
Feb 22 20:27:00 <mjt0k>	I tried systemctl clean --what=state 'svnserve@*'
Feb 22 20:27:20 <mjt0k>	thanks!
Feb 22 20:28:29 <edu4rdshl>	yw!
**** BEGIN LOGGING AT Thu Feb 22 20:35:46 2024

Feb 22 20:35:46 *	Now talking on #systemd
Feb 22 20:35:46 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 22 20:35:46 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Thu Feb 22 20:47:44 2024

Feb 22 20:47:43 *	Now talking on #systemd
Feb 22 20:47:43 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 22 20:47:43 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Thu Feb 22 20:58:52 2024

Feb 22 20:58:50 *	Now talking on #systemd
Feb 22 20:58:50 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 22 20:58:50 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Thu Feb 22 21:13:03 2024

Feb 22 21:13:03 *	Now talking on #systemd
Feb 22 21:13:03 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 22 21:13:03 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Thu Feb 22 21:16:07 2024

Feb 22 21:16:06 *	Now talking on #systemd
Feb 22 21:16:06 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 22 21:16:06 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Feb 22 23:58:38 <uuuuu>	I am experiencing a watchdog did not stop error on shut down and the system requires hard shut down. If I do system reboot -i I still get this issue (reboot=acpi or reboot=bios in grub doesn't fix the issue). What does it mean if systemctl reboot -i isn't able to remove the inhibitor that I am encountering here
Feb 23 06:32:54 <grawity>	uuuuu: it means that it's not an inhibitor of the sort that -i deals with
Feb 23 06:33:06 <grawity>	uuuuu: if it were, systemd would refuse to begin the shutdown process in the first place
Feb 23 08:50:41 <mjt0k>	adding some filesystem maintenance jobs (like btrfs scrub), using OnCalendar=weekly (or monthly) timer with RandomizedDelaySec.  How to prevent this task to run at the same time as fstrim.service?
Feb 23 10:01:37 <TuxJobs>	systemd problem: I have a user .service file which, if I run it with `systemctl --user start MyCustomApp.service` from a terminal, behaves correctly and thus opens an XTerm window in the right taskbar group. BUT if I let it start at boot, it opens the XTerm window in the default "XTerm" taskbar group, seemingly ignoring the actual command. I've tried so many things and each attempt requires a full reboot of the whole system. I have no idea what to try at 
Feb 23 10:01:37 <TuxJobs>	this point. The ~/.config/systemd/user/MyCustomApp.service file: https://pastebin.com/raw/Gn47L1xx ... I've tried with and without "WantedBy=multi-user.target", and with and without "After=graphical-session.target".
**** BEGIN LOGGING AT Fri Feb 23 14:47:00 2024

Feb 23 14:47:00 *	Now talking on #systemd
Feb 23 14:47:00 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 23 14:47:00 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Fri Feb 23 14:52:01 2024

Feb 23 14:52:01 *	Now talking on #systemd
Feb 23 14:52:01 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 23 14:52:01 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Feb 23 17:00:57 <Bert>	I'm struggling a bit to get something seemingly basic working. I have a pdns (powerdns) service and a mariadb service. When MariaDB fails or goes down, I want pdns to go down. That I got working with BindsTo. However, I noticed that during package updates, MariaDB gets stopped and then started again, leaving pdns down. I tried fixes with PartOf and with bidirectional Requires but nothing seems to work. 
Feb 23 17:01:03 <Bert>	Anyone got any suggestions or ideas where I might be going wrong?
Feb 23 18:25:46 <edu4rdshl>	>  during package updates, MariaDB gets stopped and then started again
Feb 23 18:25:54 <edu4rdshl>	That's where it should be fixed
Feb 23 18:26:27 <edu4rdshl>	Anyways, PartOf should do the trick (if put on the right unit)
**** BEGIN LOGGING AT Fri Feb 23 21:29:51 2024

Feb 23 21:29:49 *	Now talking on #systemd
Feb 23 21:29:49 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 23 21:29:49 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Feb 23 23:30:44 <Bert>	edu4rdshl: yeah, I don't think Debian is going to take up my case :/ PartOf inside pdns to mariadb I tried, is the direction wrong?
**** BEGIN LOGGING AT Sat Feb 24 12:02:42 2024

Feb 24 12:02:41 *	Now talking on #systemd
Feb 24 12:02:41 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 24 12:02:41 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Sat Feb 24 16:29:06 2024

Feb 24 16:29:06 *	Now talking on #systemd
Feb 24 16:29:06 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 24 16:29:06 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Sat Feb 24 16:32:03 2024

Feb 24 16:32:03 *	Now talking on #systemd
Feb 24 16:32:03 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 24 16:32:03 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Sat Feb 24 17:28:08 2024

Feb 24 17:28:07 *	Now talking on #systemd
Feb 24 17:28:07 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 24 17:28:07 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Sat Feb 24 19:15:17 2024

**** BEGIN LOGGING AT Sun Feb 25 02:09:51 2024

Feb 25 02:09:50 *	Now talking on #systemd
Feb 25 02:09:50 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 25 02:09:50 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Sun Feb 25 18:41:34 2024

Feb 25 18:41:33 *	Now talking on #systemd
Feb 25 18:41:33 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 25 18:41:33 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Sun Feb 25 18:41:51 2024

**** BEGIN LOGGING AT Tue Feb 27 23:15:59 2024

Feb 27 23:15:58 *	Now talking on #systemd
Feb 27 23:15:58 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 27 23:15:58 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Wed Feb 28 02:09:41 2024

Feb 28 02:09:40 *	Now talking on #systemd
Feb 28 02:09:40 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 28 02:09:40 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Wed Feb 28 02:32:44 2024

**** BEGIN LOGGING AT Thu Feb 29 01:02:43 2024

Feb 29 01:02:42 *	Now talking on #systemd
Feb 29 01:02:42 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 29 01:02:42 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Feb 29 01:13:02 *	Disconnected ()
**** ENDING LOGGING AT Thu Feb 29 01:13:02 2024

**** BEGIN LOGGING AT Thu Feb 29 01:15:36 2024

Feb 29 01:15:36 *	Now talking on #systemd
Feb 29 01:15:36 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 29 01:15:36 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Feb 29 02:06:34 <ajak>	with an image generated by mkosi installing itself to a target system (ie via systemd-repart with ESP/root `CopyBlocks=auto`'d to the target), how do i then deal with those newly created filesystems being unmountable because they have duplicate UUIDs from the source media?
Feb 29 02:09:37 <ajak>	my first thought was to hackily find the roots dynamically in my install script through dissection.. but i can't even dissect with the duplicate UUIDs
Feb 29 02:09:51 *	ajak tries ext4 instead
Feb 29 02:16:43 <twb>	I thought there was a setting somewhere to "re-roll" new UUIDs, but I may have imagined it
Feb 29 02:17:32 <twb>	Are these random UUIDs, or are they the hard-coded UUIDs that systemd uses for partition auto-discovery?
Feb 29 02:18:00 <twb>	I mean these: https://uapi-group.org/specifications/specs/discoverable_partitions_specification/
Feb 29 02:19:36 <ajak>	you can seed the *partition* UUID generation via `Seed=` or `--seed` (or even set directly via `UUID=`) but i haven't found a way to do the same for *filesystem* UUIDs
Feb 29 02:27:00 <ajak>	hrm, though ext4 is more amenable to duplicate UUIDs, interesting
Feb 29 02:41:23 <twb>	Ah I didn't understand it was the filesystem UUID
Feb 29 02:42:30 <twb>	Re "amenable", I think it'll ultimately depend on whether you're doing mounts via UUID=, PARTUUID=, LABEL=, or path.
Feb 29 02:47:56 <ajak>	mounting xfs will error even if you try to mount by block device name, in xfs_mount.c (of the kernel): xfs_warn(mp, "Filesystem has duplicate UUID %pU - can't mount", uuid); return -EINVAL;
Feb 29 02:48:56 <ajak>	though the rationale for preventing duplicate UUID'd filesystems from being mounted isn't clear to me based on that file alone, xfs seems pretty unique in this restriction
Feb 29 02:49:59 <ajak>	... but, ext4 seems to work, at least the resulting disk is dissectable, now i have to dig into why this physical hardware isn't letting me mount the resulting root while a qemu installation will, with the same image..
Feb 29 03:32:16 <MacGyver>	twb: It's not the filesystem UUID, it's the GPT partition type.
Feb 29 06:05:32 <ajak>	but it *is* the filesystem uuid i'm talking about, see the xfs code i pasted^
Feb 29 10:19:40 <Aryan>	Hi, I'm trying to limit IOReadBandwidthMax using systemd+unified cgroup, but it seems like not working...
Feb 29 10:20:44 <Aryan>	here's user-1000.slice: https://termbin.com/nty2
Feb 29 10:21:42 <Aryan>	ubuntu 22.04
Feb 29 10:22:36 <Aryan>	here's systemctl show user-1000.slice: https://termbin.com/fql1
Feb 29 11:35:37 <ThiefMaster>	what's usually causing "System is tainted: cgroupsv1"? is this a kernel setting? userspace doing something particular? (i'm on gentoo so it's a manually configured kernel)
Feb 29 11:37:21 <twb>	ThiefMaster: it's a kernel-to-userspace interface but I don't remember where it's actually set up
Feb 29 11:38:03 <twb>	ThiefMaster: I thought it was, like, whether you did "mount none -t cgroups /sys/cgroups" with like "-o old_mode"
Feb 29 11:40:06 <twb>	https://www.kernel.org/doc/html/latest/admin-guide/cgroup-v2.html#mounting  "mount -t cgroup2" apparently, vs "mount -t cgroup -o foo"
Feb 29 11:48:24 <ThiefMaster>	ah, so i guess it's it's this useflag for my systemd that's causing it
Feb 29 11:48:25 <ThiefMaster>	 + + cgroup-hybrid                   : Default to hybrid (legacy) cgroup hierarchy instead of unified (modern).
Feb 29 11:49:19 <ThiefMaster>	not sure why i set that at some point...
Feb 29 11:54:22 <ThiefMaster>	yep removeing that fixed the taint
Feb 29 11:54:26 <ThiefMaster>	*removing
Feb 29 14:15:32 *	Disconnected ()
**** ENDING LOGGING AT Thu Feb 29 14:15:32 2024

**** BEGIN LOGGING AT Thu Feb 29 14:15:51 2024

Feb 29 14:15:51 *	Now talking on #systemd
Feb 29 14:15:51 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 29 14:15:51 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Thu Feb 29 14:39:53 2024

Feb 29 14:39:53 *	Now talking on #systemd
Feb 29 14:39:53 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 29 14:39:53 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Thu Feb 29 15:16:03 2024

Feb 29 15:16:03 *	Now talking on #systemd
Feb 29 15:16:03 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Feb 29 15:16:03 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Feb 29 17:59:55 <arkanoid>	hello! I am using "User=myuser" service property to run unit as non-root user. It works, but it seems that HOME env within the executed process is still /root instead og /home/myuser
Feb 29 18:57:53 <chrisawi>	arkanoid: you should use a systemd user instance to run units as a real (non-system) user
Feb 29 18:59:12 <arkanoid>	chrisawi: are scheduled user systemd timers going to fire if the user is not logged in?
Feb 29 19:00:05 <arkanoid>	what I'm doing here is setting up systemd timer+unit to perform backup of each user folder AS that user and write to repo AS that user
Feb 29 19:00:24 <arkanoid>	but the unit has to run every night no matter if the user has or is logged in
Feb 29 19:01:27 <chrisawi>	you can `loginctl enable-linger`
Feb 29 19:03:09 <arkanoid>	oh
Feb 29 19:29:57 <arkanoid>	thanks! I was not aware of linger. This seems the proper solution to my issue.
**** BEGIN LOGGING AT Fri Mar  1 01:59:42 2024

Mar 01 01:59:41 *	Now talking on #systemd
Mar 01 01:59:41 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 01 01:59:41 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Mar 01 04:38:09 <Dolapevich>	Hello, I am on an amazon linux 2 box, and I am trying to use systemctl --user . As far as I understand, when a user logs in my ubuntu machine a process /lib/systemd/systemd --user is forked, and my systemctl --user talks with it. However I don't find the same process in amzn linux, which leads me to belive logging with a standard user does not starts it. ¿Where should I look?
Mar 01 04:38:47 <Dolapevich>	The error I am getting is "Failed to get D-Bus connection: No such file or directory".
Mar 01 04:39:33 <Dolapevich>	systemctl seems to be looking for: connect(3, {sa_family=AF_UNIX, sun_path="/run/user/549606008/bus"}, 25) = -1 ENOENT (No such file or directory)
Mar 01 04:42:12 <Dolapevich>	and before that, it is trying to connect to: connect(3, {sa_family=AF_UNIX, sun_path="/run/user/549606008/systemd/private"}, 37) = -1 ENOENT (No such file or directory)
Mar 01 04:53:25 <Kelsar>	Dolapevich: how did you login?
Mar 01 04:54:15 <Dolapevich>	@Kelsar, over ssh, it didn't work, then sudo -u user -i
Mar 01 04:54:35 <Kelsar>	Dolapevich: sudo will not work
Mar 01 04:54:37 <Dolapevich>	in neither of the sessions I got a --user systemd process
Mar 01 04:54:46 <Dolapevich>	yeah, that's why I went back to my ssh session
Mar 01 04:54:54 <Kelsar>	try loginctl
Mar 01 04:55:17 <Dolapevich>	but I am reading that /lib/systemd/systemd --user is forked from pam_systemd, which is nowhere to be found
Mar 01 04:55:26 <Dolapevich>	loginctl linger?
Mar 01 04:56:24 <Kelsar>	no, linger keeps a session running, but loginctl should be able to list sessions, if there are any
Mar 01 04:56:31 <Kelsar>	to be fair, no idea what amazon linux is
Mar 01 04:56:36 <Dolapevich>	yes, I can see mine and some other users
Mar 01 04:56:57 <Kelsar>	then likely just XDG variables are not set
Mar 01 04:56:58 <Dolapevich>	amazon linux is a fedora adapted to run on AWS EC2 linux.
Mar 01 04:58:03 <Dolapevich>	XDG_RUNTIME_DIR and XDG_SESSION_ID are present in my ssh session
Mar 01 04:58:34 <Dolapevich>	XDG_RUNTIME_DIR="/run/user/549606008" and XDG_SESSION_ID="743"
Mar 01 04:58:38 <Kelsar>	well, no idea then
Mar 01 04:58:49 <Kelsar>	but looks like you got a session
Mar 01 04:58:54 <Dolapevich>	yep
Mar 01 04:59:29 <Dolapevich>	but I think that in my ubuntu machine that session forks a /lib/systemd/systemd --user under my id when I get authenticated via PAM.
Mar 01 05:00:06 <Dolapevich>	I wanted to make a user timer instead of cron, but I'll go with cron :-P
Mar 01 06:25:12 <grawity>	Dolapevich: /lib/systemd/systemd --user has never been forked from pam_systemd; it is a system service forked by pid1 whose start is triggered by pam_systemd
Mar 01 06:25:29 <grawity>	Dolapevich: check the status of user@549606008.service and the general output of loginctl
**** BEGIN LOGGING AT Fri Mar  1 14:01:16 2024

Mar 01 14:01:16 *	Now talking on #systemd
Mar 01 14:01:16 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 01 14:01:16 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Fri Mar  1 16:01:17 2024

Mar 01 16:01:17 *	Now talking on #systemd
Mar 01 16:01:17 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 01 16:01:17 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Fri Mar  1 18:08:59 2024

Mar 01 18:08:59 *	Now talking on #systemd
Mar 01 18:08:59 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 01 18:08:59 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Fri Mar  1 18:10:30 2024

**** BEGIN LOGGING AT Fri Mar  1 19:04:13 2024

Mar 01 19:04:13 *	Now talking on #systemd
Mar 01 19:04:13 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 01 19:04:13 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Mar 01 19:05:48 <grawity>	we already have /proc loginuid for the sudo auditability problem, unfortunately it's not retrievable through a socket the way normal UID/GID is
**** BEGIN LOGGING AT Sat Mar  2 03:05:27 2024

Mar 02 03:05:26 *	Now talking on #systemd
Mar 02 03:05:26 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 02 03:05:26 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Mar 02 05:32:39 <twb>	Speaking as an end user, what resolved solves is 1) don't directly load a DNS client into every process (libnss-dns.so); and 2) send different DNS requests to different servers -- so if I have 3 VPNs at once, DNS goes to the "right" one
Mar 02 05:33:50 <twb>	Also obviously libnss-dns.so can't cache between processes, and glibc nscd can't cache dns records *correctly* (honoring SOA and TTL) because it's too dumb
Mar 02 05:34:21 <twb>	So it directly reduces the amount of DNS traffic by three orders of magnitude
**** BEGIN LOGGING AT Sat Mar  2 06:15:35 2024

Mar 02 06:15:35 *	Now talking on #systemd
Mar 02 06:15:35 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 02 06:15:35 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Sat Mar  2 06:17:09 2024

Mar 02 06:17:09 *	Now talking on #systemd
Mar 02 06:17:09 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 02 06:17:09 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Mar 02 11:43:56 <birkoff>	how can I run a program/service upon coredump ? 
Mar 02 15:14:34 <kjetilho>	birkoff: while keeping systemd's handling of it (systemd-coredump)?
Mar 02 15:14:51 <kjetilho>	I think you need to replace it, TBH.
Mar 02 15:14:57 <birkoff>	kjetilho: yes
Mar 02 15:15:09 <birkoff>	is there no other mechanism ? 
Mar 02 15:27:20 <gdamjan>	add a systemd-coredump@.service.wants/ and symlinks to your own services
Mar 02 15:27:26 <gdamjan>	not sure if it'll work, but you can try
Mar 02 16:59:38 <birkoff>	i'm not sure .wants is what is needed
**** BEGIN LOGGING AT Sat Mar  2 19:02:28 2024

Mar 02 19:02:28 *	Now talking on #systemd
Mar 02 19:02:28 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 02 19:02:28 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Mar 02 19:11:32 <grawity>	it'd do the job
**** BEGIN LOGGING AT Sun Mar  3 08:36:18 2024

Mar 03 08:36:17 *	Now talking on #systemd
Mar 03 08:36:17 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 03 08:36:17 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Mon Mar  4 04:37:44 2024

Mar 04 04:37:43 *	Now talking on #systemd
Mar 04 04:37:43 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 04 04:37:43 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Mon Mar  4 04:39:41 2024

Mar 04 04:39:40 *	Now talking on #systemd
Mar 04 04:39:40 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 04 04:39:40 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Mar 04 10:03:26 <kalken>	hmm i have a rather exotic problem. i force an ip in dropbear (on my raspberry), but that makes systemd-networkd ignore to reconfigure the interface
Mar 04 10:03:36 <kalken>	does anybody know a way to override that?
Mar 04 10:04:25 <kalken>	i had to delete /run/systemd/network/ files manually now to force it to reconfigure
Mar 04 10:57:59 <twb>	I don't understand the problem description
Mar 04 10:58:24 <twb>	What does "force an ip in dropbear" mean?
Mar 04 11:00:02 <kalken>	in cmdline.txt i force ip=
Mar 04 11:00:10 <kalken>	because i dont have a dhcp-server
Mar 04 11:00:53 <kalken>	it seems systemd-networkd does not touch the interface if an ip is forced with dropbear
Mar 04 11:01:37 <twb>	That depends on what ramdisk you're using and some other factors.
Mar 04 11:01:39 <kalken>	so i need to either tell systemd-networkd to force it or "reset" the link before systemd-networkd starts
Mar 04 11:02:07 <twb>	Have you considered just using link-local addresses and mdns/dns-sd (avahi) to access that host?
Mar 04 11:02:22 <kalken>	well i kind of did an ugly solution now in /etc/rc.local
Mar 04 11:02:24 <kalken>	/sbin/ip addr flush dev eth0
Mar 04 11:02:26 <kalken>	/sbin/ip link set dev eth0 down
Mar 04 11:02:28 <kalken>	rm /run/systemd/network/90-eth0.network
Mar 04 11:02:30 <kalken>	/bin/networkctl reload
Mar 04 11:02:39 <kalken>	it works but its kind of horrible
Mar 04 11:02:39 <twb>	That sounds like a terrible idea
Mar 04 11:02:50 <kalken>	:D
Mar 04 11:02:52 <twb>	Have you considered doing static networking in the .network itself?
Mar 04 11:03:31 <kalken>	my problem is that systemd-networkd does not touch a link that is already setup by dropbear (initramfs)
Mar 04 11:03:45 <kalken>	so i cant really configure anything in systemd from what i understand
Mar 04 11:03:49 <twb>	https://www.freedesktop.org/software/systemd/man/latest/systemd.network.html#id-1.58.2
Mar 04 11:04:09 <twb>	kalken: dropbear is an SSH server, I don't think it has anything to do with your ramdisk
Mar 04 11:05:13 <kalken>	twb: i configure ip to be able to unlock my drives in cmdline.txt with: ip=192.168.0.2:::255.255.255.0:case:eth0:off
Mar 04 11:05:38 <kalken>	but it makes systemd-networkd totally ignore anything i have there
Mar 04 11:06:23 <kalken>	if i remove that line and get a dhcp adress with initramfs it works
Mar 04 11:06:42 <kalken>	but if i set a static one on boot systemd-networkd ignores the link completely
Mar 04 11:07:05 <kalken>	and i'm wondering if it can be overriden or something
Mar 04 11:07:20 <kalken>	through an option in systemd-networkd settings preferably
Mar 04 11:07:22 <twb>	Is this archlinux, or what
Mar 04 11:07:39 <kalken>	its my own bootstraped debian
Mar 04 11:07:56 <kalken>	but i dont think the distribution has anything to do with this
Mar 04 11:08:18 <kalken>	people seem to have the same problems with netplan etc, if initramfs configures an ip
Mar 04 11:08:23 <kalken>	the link is ignored
Mar 04 11:08:25 <twb>	Well, Debian is still using a Debian-specific ramdisk by default, which isn't based on systemd, so doesn't integrate properly with post-ramdisk systemd
Mar 04 11:09:36 <twb>	When you set ip= on the kernel command line, do you want that IP to be kept forever, or do you want it to be used only during the ramdisk stage?
Mar 04 11:09:36 <kalken>	twb: that might be true. But still the question remains. Can i force systemd-networkd to reconfigure a link that is already configured
Mar 04 11:10:10 <twb>	It does that by default unless the .network adds something like MissionCritical=yes.  I forget what the option is
Mar 04 11:10:19 <kalken>	obviously systemd-networkd interacts in some way cause it creates a /run/systemd/network/90-eth0.network
Mar 04 11:10:27 <kalken>	which overrides everything else
Mar 04 11:11:32 <kalken>	twb: i only want that static ip to unlock drives, when that happens i want to forget it and boot normally
Mar 04 11:11:35 <twb>	https://www.freedesktop.org/software/systemd/man/latest/systemd.network.html#KeepConfiguration=  this one
Mar 04 11:12:34 <kalken>	hmm. i think the problem is this file that is some how created: /run/systemd/network/90-eth0.network
Mar 04 11:13:03 <twb>	Well, what makes it?
Mar 04 11:13:18 <twb>	Also: what's in it, exactly?
Mar 04 11:13:49 <kalken>	im guessing initramfs, cause it happens when im putting ip= in cmdline.txt as a kernel boot parameter
Mar 04 11:13:59 <twb>	I don't see anything making that file in https://sources.debian.org/src/initramfs-tools/0.142/
Mar 04 11:15:40 <kalken>	it seems to be a common problem though. people set a static ip for boot sequence, but want to "flush" it and boot normally
Mar 04 11:16:31 <kalken>	maybe its not even systemd's fault, maybe its udev or something
Mar 04 11:16:56 <twb>	Personally I just have a separate network interface on a network that *does* have DHCPv4
Mar 04 11:17:21 <kalken>	yeah everything worked fine until my router decided to die this morning :D
Mar 04 11:17:25 <twb>	This is the code in Debian 12 that handles ip= in the initrd: https://sources.debian.org/src/klibc/2.0.13-4/usr/kinit/ipconfig/
Mar 04 11:17:46 <twb>	I don't think it has changed for like 15 years, and I doubt it has systemd knowledge.
Mar 04 11:18:06 <twb>	If you're running a *derivative* of Debian (not Debian itself), then I have no idea
Mar 04 11:18:16 <kalken>	yeah, but still systemd-networkd manage to understand that it was already configured
Mar 04 11:18:45 <kalken>	which might be a good thing in some situations :D
Mar 04 11:20:07 <kalken>	well, ty for the help. I might go and buy a new router instead of trying to figure this out... It seems like a bit of a mess
Mar 04 11:20:36 <twb>	On my Debian 12 system, using initramfs-tools and dropbear-initramfs to SSH in and run "zfsunlock" and then continue booting, I definitely do not have any /run/systemd/network directory at all, and the interface that was used during the ramdisk is now marked "7 br-lan bridge off unmanaged"
Mar 04 11:21:16 <twb>	It sounds to me like whatever is writing /run/systemd/network/ on your system is something I don't have installed
Mar 04 11:22:22 <kalken>	ok! i'll check if there is something with the raspi-firmwarestuff from debian then
Mar 04 11:22:32 <kalken>	there might be some hooks or something there
Mar 04 11:23:09 <twb>	Can you pastebin "dpkg-query --show" output?
Mar 04 11:23:47 <kalken>	for systemd?
Mar 04 11:24:30 <twb>	Run it without further arguments, so it lists all installed packages and their installed versions.
Mar 04 11:24:56 <kalken>	i know what it does, but there is nothing strange there
Mar 04 11:25:49 <kalken>	im pretty sure something triggers systemd-networkd to understand that a link is already configured
Mar 04 11:26:02 <kalken>	and i was just looking for a way to override that
Mar 04 11:26:42 <kalken>	but not many people are running networkd yet, so there is not much info
Mar 04 11:28:14 <kalken>	maybe it would work if i just booted initramfs with systemd, idk. 
Mar 04 11:29:58 <twb>	systemd-based ramdisks aren't well supported by Debian, but you're welcome to try it.
Mar 04 11:30:27 <twb>	I recommend you try it on a host you don't care about losing, though :-)
Mar 04 11:30:52 <twb>	Step 1 would be to "apt install dracut", which will break your existing ramdisks.  Then configure dracut to be systemd-based (if it's not already)
Mar 04 11:34:57 <kalken>	twb: ty. It seems a bit overkill just to get systemd-networkd working, but ill check if i can figure something out here
Mar 04 11:35:00 <kalken>	ty for the help!
Mar 04 14:04:33 <NetSysFire>	i need to build an OS image with mkosi to contain some software which has dependencies that are so old an OS that is not eol can not handle them. however, my attempts all fail before actual building is done with https://bpa.st/RK7A - whether as root or nonroot. this is on arch. actual arch, not a derivative
Mar 04 16:09:54 <twb>	Did you try just "mkdir newroot/dev" and "touch newroot/dev/random"
Mar 04 16:10:29 <twb>	You can't make device files without being root, so you can't actually make a "real" dev/random
Mar 04 16:10:51 <NetSysFire>	i am root in that example. but i already moved on to another solution
**** BEGIN LOGGING AT Tue Mar  5 07:39:51 2024

Mar 05 07:39:50 *	Now talking on #systemd
Mar 05 07:39:50 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 05 07:39:50 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Mar 05 09:24:49 <luc4>	Hello! I'm using systemd in a poky system created with Yocto. I'm experiencing a weird situation with systemd-networkd: https://pastebin.com/fsc436E0. Apparently the system has two different IP addresses, but the configuration I set only includes one. I guess one IP was acquired through dhcp, but even disabling it explicitly is not fixing the problem. Any idea where that IP comes from? Thanks!
Mar 05 10:18:28 <hgb>	Hmm, I have a service that has 'After=storage.mount', but it's being run at the same time as the fsck for /storage.  Shouldn't 'After=foo.mount' make sure it runs after the file system is actually mounted?
Mar 05 10:20:21 <hgb>	Maybe 'RequireMountsFor=/storage' is better
Mar 05 13:02:48 <twb>	hgb: RequiresMountsFor is DEFINITELY better
Mar 05 13:54:48 <hgb>	twb: Thanks, I'll switch to that.
Mar 05 16:03:35 <qsx>	can i use variables such as ${STATE_DIRECTORY} and others set in an `EnvironmentFile` in a `ConditionPathExists=!${STATE_DIRECTORY}/foo/${BAR}`?
Mar 05 16:05:25 <qsx>	i’m writing a set of units for a service that needs to do some initialisation only once, but there may be various @-instances that can depend on the same initialisation, hence i’d like to have foo@.service depend on foo-init@.service which will only run if the initialisation has not been done yet
Mar 05 16:07:38 <qsx>	huh.  TIL `ExecCondition=`, if the variable expansion as above does not work i could just put `test ! -d ${STATE_DIRECTORY}/...` in there
Mar 05 16:39:13 <gdamjan>	qsx: no
**** BEGIN LOGGING AT Tue Mar  5 18:13:43 2024

Mar 05 18:13:42 *	Now talking on #systemd
Mar 05 18:13:42 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 05 18:13:42 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Tue Mar  5 19:05:31 2024

Mar 05 19:05:30 *	Now talking on #systemd
Mar 05 19:05:30 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 05 19:05:30 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Tue Mar  5 20:41:19 2024

Mar 05 20:41:19 *	Now talking on #systemd
Mar 05 20:41:19 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 05 20:41:19 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Tue Mar  5 22:33:04 2024

Mar 05 22:33:03 *	Now talking on #systemd
Mar 05 22:33:03 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 05 22:33:03 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Wed Mar  6 01:51:37 2024

Mar 06 01:51:37 *	Now talking on #systemd
Mar 06 01:51:37 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 06 01:51:37 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Wed Mar  6 07:16:32 2024

Mar 06 07:16:31 *	Now talking on #systemd
Mar 06 07:16:31 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 06 07:16:31 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Mar 06 11:19:27 <plundra>	So a preference/tast or maybe even philosophical question... I have a timer with OnCalendar; I want the service to be ran on boot, too ("cache" of sorts, timer refreshes). I can either add OnBootSec=0 to the timer, or add WantedBy=multi-user.target and enable the service directly, too.
Mar 06 11:20:10 <plundra>	Question being, any input in the matter? :) What would be more obvious in function if you stumbled upon it?
Mar 06 11:21:01 <plundra>	I like not having to enable an additional unit, and not needing an [Install] section etc, as well as not needing to disable two units to disable the "function"
Mar 06 11:21:29 <plundra>	Although having it as a "regular" standalone service might look more explicit.
**** BEGIN LOGGING AT Wed Mar  6 13:29:43 2024

Mar 06 13:29:41 *	Now talking on #systemd
Mar 06 13:29:41 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 06 13:29:41 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Mar 06 16:50:25 <Jannik2099>	oomctl shows Memory: Used: 0B Total: 0B , which is of course wrong - any ideas?
Mar 06 16:50:38 <Jannik2099>	this is on kernel 6.7 with unified cgroup hierarchy and memory accounting enabled
Mar 06 18:19:08 <twb>	I have a batch job that reads /etc/foo/foo.json and writes /var/lib/foo/foo.html.  Can I use a .path to watch the source file and invoke the batch job if/when the source file changes?
Mar 06 18:19:45 <twb>	(Right now this is actually re-rendering the HTML every single time someone requests it, which feels silly.)
Mar 06 18:22:30 <twb>	PathChanged= looks reasonable, I don't think the file will ever change while systemd *isn't* running.  Not sure if it'll fire if the file exists before the .path itself exists, but I'll try it and see
**** BEGIN LOGGING AT Wed Mar  6 21:44:03 2024

Mar 06 21:44:02 *	Now talking on #systemd
Mar 06 21:44:02 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 06 21:44:02 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Wed Mar  6 23:44:24 2024

**** BEGIN LOGGING AT Thu Mar  7 02:18:47 2024

Mar 07 02:18:44 *	Now talking on #systemd
Mar 07 02:18:44 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 07 02:18:44 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Mar 07 04:04:28 <cwegener>	Can I use the variables from `EnvironmentFile=` as arguments to `Environment=` ?
Mar 07 04:05:06 <twb>	cwegener: I don't remember.  It should be easy enough to write a test unit
Mar 07 04:12:25 <cwegener>	Yup. that's what I'm doing now ... so far the answer seems "no" ... I'll keep trying a bit harder. :)
Mar 07 04:14:13 <edu4rdshl>	cwegener, you can't
Mar 07 05:32:11 <twb>	OK so... I have a socket-activate daemon that works with ProtectSystem=full but crashes without any error messages with ProtectSystem=strict.
Mar 07 05:32:32 <twb>	Adding "strace -e trace=file" to ExecStart= doesn't work, because I guess it's too locked down for that
Mar 07 05:33:02 <twb>	How do I work out what file it's trying to write to?  It *ought* to be writing only to fd3 (the systemd-managed socket) plus /run/postgresql/<some socket>
Mar 07 05:33:18 <twb>	But ProtectSystem=strict ReadWritePaths=/run fails with the same behaviour
**** BEGIN LOGGING AT Thu Mar  7 05:39:14 2024

Mar 07 05:39:13 *	Now talking on #systemd
Mar 07 05:39:13 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 07 05:39:13 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Mar 07 05:39:20 <twb>	Aha, I cranked up the log level of the daemon, and now it tells me: FileNotFoundError: [Errno 2] No usable temporary directory found in ['/tmp', '/var/tmp', '/usr/tmp', '/']
Mar 07 05:42:04 <twb>	And that's ultimately coming from https://github.com/python/cpython/blob/3.11/Lib/tempfile.py#L224-L226
Mar 07 05:42:28 <twb>	Oh I am not setting PrivateTmp=!
Mar 07 05:42:32 <twb>	Mystery solved
Mar 07 05:46:26 <twb>	And that happened because I started with DynamicUser=yes (which implies PrivateTmp=yes), but then had to remove it
**** BEGIN LOGGING AT Thu Mar  7 05:53:08 2024

Mar 07 05:53:08 *	Now talking on #systemd
Mar 07 05:53:08 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 07 05:53:08 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Thu Mar  7 06:46:02 2024

Mar 07 06:46:01 *	Now talking on #systemd
Mar 07 06:46:01 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 07 06:46:01 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Thu Mar  7 11:45:31 2024

Mar 07 11:45:29 *	Now talking on #systemd
Mar 07 11:45:29 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 07 11:45:29 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Thu Mar  7 12:26:51 2024

Mar 07 12:26:50 *	Now talking on #systemd
Mar 07 12:26:50 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 07 12:26:50 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Thu Mar  7 12:39:51 2024

Mar 07 12:39:50 *	Now talking on #systemd
Mar 07 12:39:50 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 07 12:39:50 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Mar 07 12:48:35 <gdamjan>	use Restart= in the service
**** BEGIN LOGGING AT Thu Mar  7 14:15:49 2024

Mar 07 14:15:48 *	Now talking on #systemd
Mar 07 14:15:48 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 07 14:15:48 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Mar 07 15:11:30 <birkoff>	if RestartSec=3 and ...MaxDelaySec=300 and ...Steps=10  then is it possible to know the exact steps values that will be used ? i.e. from 3 to 300 in 10 steps can have several combinations
Mar 07 15:29:11 <gdamjan>	hah, first time I see RestartSteps=
Mar 07 15:36:56 <yhndnzj>	birkoff: https://github.com/systemd/systemd/blob/v255/src/core/service.c#L322
Mar 07 17:01:46 <birkoff>	i've edited both ~/.gdbinit and /etc/gdb/gdbinit with some configuration but coredumpctl gdb ... doesn't seem to apply it nonetheless
Mar 07 17:47:55 <cek>	it seems calling `mailx` from `ExecStart` doesn't work. why and why no logging for that?
Mar 07 17:52:43 <grawity>	how did you run it, where did you look and what did you see?
Mar 07 17:55:23 <cek>	exactly the https://unix.stackexchange.com/questions/314329/mailx-not-sending-email-when-run-as-a-systemd-service
Mar 07 17:55:38 <cek>	obnoxious piece of garbage.
**** BEGIN LOGGING AT Fri Mar  8 22:52:06 2024

Mar 08 22:52:06 *	Now talking on #systemd
Mar 08 22:52:06 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 08 22:52:06 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Fri Mar  8 23:04:26 2024

Mar 08 23:04:24 *	Now talking on #systemd
Mar 08 23:04:24 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 08 23:04:24 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Fri Mar  8 23:07:14 2024

Mar 08 23:07:14 *	Now talking on #systemd
Mar 08 23:07:14 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 08 23:07:14 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Fri Mar  8 23:14:16 2024

Mar 08 23:14:14 *	Now talking on #systemd
Mar 08 23:14:14 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 08 23:14:14 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Sat Mar  9 07:43:52 2024

Mar 09 07:43:50 *	Now talking on #systemd
Mar 09 07:43:50 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 09 07:43:50 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Sat Mar  9 08:24:01 2024

Mar 09 08:24:00 *	Now talking on #systemd
Mar 09 08:24:00 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 09 08:24:00 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Mar 09 08:34:55 <helmut>	hi. is there a reasonable way to combine a simple .service unit and a .path unit such that the unit is activated after the last path event? (i.e. when path activates while .service is running, those activations would be accumulated into a single reactivation of the .service unit after it finishes)
**** BEGIN LOGGING AT Sat Mar  9 10:08:22 2024

Mar 09 10:08:21 *	Now talking on #systemd
Mar 09 10:08:21 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 09 10:08:21 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Sat Mar  9 10:09:15 2024

**** BEGIN LOGGING AT Sat Mar  9 10:12:43 2024

Mar 09 10:12:41 *	Now talking on #systemd
Mar 09 10:12:41 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 09 10:12:41 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Sat Mar  9 11:09:19 2024

Mar 09 11:09:16 *	Now talking on #systemd
Mar 09 11:09:16 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 09 11:09:16 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Sat Mar  9 11:33:16 2024

Mar 09 11:33:15 *	Now talking on #systemd
Mar 09 11:33:15 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 09 11:33:15 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Mar 09 11:59:59 <pgnd>	I need a service restriction on devices, limiting access to: /dev/uinput & all of the /dev/input/eventX, where X={0-20}. Iiuc, wildcards, e.g.:
Mar 09 11:59:59 <pgnd>	DeviceAllow = /dev/uinput /dev/input/event*
Mar 09 11:59:59 <pgnd>	are NOT allowed.  is there available shorthand for listing all 'X' here? or muse list explicitly?
Mar 09 12:09:44 <foul_owl>	grawity: thank you!
Mar 09 12:12:02 <foul_owl>	That fixed it. It was wine + some windows app that seemed to be leaking hundreds of connections
Mar 09 12:37:27 <pgnd>	aha
**** ENDING LOGGING AT Sat Mar  9 13:31:10 2024

**** BEGIN LOGGING AT Sat Mar  9 13:40:24 2024

Mar 09 13:40:23 *	Now talking on #systemd
Mar 09 13:40:23 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 09 13:40:23 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Sat Mar  9 14:33:36 2024

Mar 09 14:33:35 *	Now talking on #systemd
Mar 09 14:33:35 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 09 14:33:35 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Mar 09 15:12:33 <grawity>	foul_owl: that might be a Wine bug of some sort, since it's more likely that Wine translates some Windows API to a DBus-based API than the app itself using DBus; watching bus traffic in bustle or dbus-monitor --user for repeated identical calls might reveal what it's doing
**** BEGIN LOGGING AT Sun Mar 10 00:21:17 2024

Mar 10 00:21:17 *	Now talking on #systemd
Mar 10 00:21:17 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 10 00:21:17 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Sun Mar 10 00:22:46 2024

Mar 10 00:22:46 *	Now talking on #systemd
Mar 10 00:22:46 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 10 00:22:46 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Sun Mar 10 00:27:38 2024

Mar 10 00:27:38 *	Now talking on #systemd
Mar 10 00:27:38 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 10 00:27:38 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Sun Mar 10 00:31:41 2024

Mar 10 00:31:41 *	Now talking on #systemd
Mar 10 00:31:41 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 10 00:31:41 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Sun Mar 10 01:38:21 2024

Mar 10 01:38:20 *	Now talking on #systemd
Mar 10 01:38:20 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 10 01:38:20 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** BEGIN LOGGING AT Sun Mar 10 01:52:09 2024

Mar 10 01:52:08 *	Now talking on #systemd
Mar 10 01:52:08 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 10 01:52:08 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
**** ENDING LOGGING AT Sun Mar 10 04:26:38 2024

**** BEGIN LOGGING AT Sun Mar 10 06:42:23 2024

Mar 10 06:42:22 *	Now talking on #systemd
Mar 10 06:42:22 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 10 06:42:22 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
Mar 10 16:59:53 <lxsameer>	hey folks, is it possible to add a incremental number to log entries for each boot? 
Mar 10 17:02:29 <lxsameer>	nvm
Mar 10 18:12:22 <ZLima12>	lxsameer: you found -b for journalctl?
Mar 10 19:19:47 <ndim>	When I add or remove a udev rules files, udev picks that up without explicitly notifying it with "udev control --reload".
Mar 10 19:20:25 <ndim>	However, when I run "--action=add --subsystem-match=usb --attr-match=idVendor=05fc --attr-match=idProduct=0030" afterwards, I cannot be certain whether udev applies the ruleset from before or after adding/removing the rule file.
Mar 10 19:21:32 <ndim>	Does adding a "udevadm control --reload" between adding/removing the file and the "udevadm trigger" ensure the trigger happens with the new ruleset?
Mar 10 22:54:23 <Eryn_FL>	hey peeps
Mar 10 22:54:43 <Eryn_FL>	i am trying to get my samba shares to mount at boot but some will mount but then the rest will fail 
Mar 10 22:54:47 <Eryn_FL>	https://paste.debian.net/1310190/
Mar 10 22:54:53 <Eryn_FL>	is this right way to do this?
Mar 10 22:55:07 <Eryn_FL>	mostly my after and wanter ^
**** BEGIN LOGGING AT Sun Mar 10 23:24:28 2024

Mar 10 23:24:27 *	Now talking on #systemd
Mar 10 23:24:27 *	Topic for #systemd is: Version v255 released | Online resources https://systemd.io/
Mar 10 23:24:27 *	Topic for #systemd set by bluca (Wed Dec  6 21:59:46 2023)
