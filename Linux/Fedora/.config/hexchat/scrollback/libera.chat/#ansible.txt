T 1702193179 19*	Now talking on 22#ansible
T 1702193179 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702193179 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702193180 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702194034 20*	Disconnected (20)
T 1702194061 19*	Now talking on 22#ansible
T 1702194061 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702194061 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702194061 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702194196 24*	dacd has quit (Ping timeout: 245 seconds)
T 1702195145 24*	f4stpath has quit (Remote host closed the connection)
T 1702195289 19*	Now talking on 22#ansible
T 1702195289 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702195289 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702195289 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702195347 23*	sandb0y (~pirate@user/sandb0y23) has joined
T 1702198993 20*	Disconnected (20)
T 1702201366 19*	Now talking on 22#ansible
T 1702201366 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702201366 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702201366 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702201394 18<20madkiss18>	hi folks. What is the easiest way to ensure that runner containers in AWX are not terminated after a task in them has failed? I need to debug something.
T 1702202102 18<20madkiss18>	or can somebody recommend another strategy to debug a failing task inside of a job that is run within an execution environment?
T 1702202355 18<19oblikoamorale18>	ask in #ansible-awx , here we mostly care about cli ansible
T 1702202361 18<20madkiss18>	thanks
T 1702208540 19*	Now talking on 22#ansible
T 1702208540 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702208540 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702208540 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702214434 20*	Disconnected (20)
T 1702214614 19*	Now talking on 22#ansible
T 1702214614 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702214614 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702214614 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702219834 20*	Disconnected (20)
T 1702219889 19*	Now talking on 22#ansible
T 1702219889 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702219889 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702219889 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702220524 20*	Disconnected (20)
T 1702220571 19*	Now talking on 22#ansible
T 1702220571 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702220571 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702220571 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702281887 19*	Now talking on 22#ansible
T 1702281887 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702281887 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702281887 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702282236 20*	Disconnected (20)
T 1702282251 19*	Now talking on 22#ansible
T 1702282251 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702282251 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702282251 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702282262 20*	Disconnected (20)
T 1702282282 19*	Now talking on 22#ansible
T 1702282282 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702282282 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702282282 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702283722 18<26tkonto18>	hi everyone.
T 1702283732 18<26tkonto18>	I have the following problem with a list:
T 1702283802 18<26tkonto18>	https://dpaste.org/1kx00
T 1702283816 18<26tkonto18>	What I try to do is add the "unit_id" in each dict in the list
T 1702283818 18<26tkonto18>	My code:
T 1702283853 18<26tkonto18>	https://dpaste.org/s3RYV
T 1702283870 18<26tkonto18>	Any idea?
T 1702283877 18<26tkonto18>	To explain it:
T 1702283932 18<26tkonto18>	This will add the unit_id for a SCSI paravirtualized HD. But id 7 is excluded (the ID of the controller itself). Looping the range with exclusion, resulted in skipping whatever item would be allocated unit_id 7
T 1702283952 18<26tkonto18>	so I created the range outside the loop, and then I try to iterate the object and the range, withing a loop
T 1702283997 18<26tkonto18>	but instead of getting: key:***, value:***, unit_id:*** I get what you read in https://dpaste.org/1kx00
T 1702284034 18<26tkonto18>	only the last dict in the list returns combined
T 1702285561 20*	Disconnected (20)
T 1702314577 19*	Now talking on 22#ansible
T 1702314577 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702314577 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702314577 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702314605 18<29akrumov18>	Has anyone else encountered the following issue? I've built Ansible from the devel branch, and when I try to execute a playbook, I receive the following error: ansible_ansible.builtin.file_payload.zip/ansible/module_utils/basic.py, line 5, SyntaxError: future feature annotations is not defined. From what I've seen, there is a pull request (https://github.com/ansible/ansible/pull/81902) that make changes to this. I'm using Python version 3.11.4 with Ansible
T 1702314605 18<29akrumov18>	[core 2.17.0.dev0] (devel a9919dd7f6).
T 1702315120 18<20jms118>	question: is there a way to have a message printed (like `ansible.builtin.debug`) at the very end of a playbook run? we're going to have playbooks which invoke several dozen different roles, which will potentially generate a couple thousand screenfuls of output, and i need a "you need to reboot the machine" message to print at the very end of the output so the user doesn't miss it
T 1702315211 18<29akrumov18>	Did you try to use post_tasks ?
T 1702315460 18<19oblikoamorale18>	akrumov: works for me. doublecheck your python version (anything 3.7+ should work) https://dpaste.org/yv3u9
T 1702315737 18<20jms118>	i didn't try, because i didn't know such a thing existed. reading about it now.
T 1702315924 18<20jms118>	okay, so pre_tasks and post_tasks can be declared in a playbook. is there a way for a ROLE to declare tasks that need to be done at the end of the playbook which called it?
T 1702315946 18<29akrumov18>	oblikoamorale I just tested it on 2 different machines with this python version with same results. Did you run only this command or build the ansible and run playbook or task ?
T 1702315996 18<19oblikoamorale18>	what is your python version on target host?
T 1702316065 18<19oblikoamorale18>	apparently 2.17 will require at least python 3.7
T 1702316108 18<29akrumov18>	python3.10
T 1702316206 18<19oblikoamorale18>	and if you try to make that import on py3.10 as I showed, will it fail?
T 1702316266 18<29akrumov18>	no itÂ´s working
T 1702316276 18<19oblikoamorale18>	huh. works for me on py 3.10.12.  and no, I didn't build ansible. just testing the error you have indicated
T 1702316334 18<19oblikoamorale18>	is it possible you have more than one py3 version on target host and interpreter discovery somehow chooses wrong one?
T 1702316405 18<29akrumov18>	I was thinking the same so I set the interpretter in the inventory:
T 1702316521 18<29akrumov18>	jms1 I don think this is possible. I just don get it why post_tasks doesn'tÂ´t work for you ?
T 1702316662 18<19oblikoamorale18>	does it fail if you run 'ansible -m file -a "path=/tmp/test state=touch" localhost' ? on the host with py 3.11
T 1702316704 18<29akrumov18>	This is working
T 1702316794 18<19oblikoamorale18>	then doublecheck your python interpreter assumptions.   ansible -m setup -a "filter=ansible_python" target_host
T 1702316958 18<20jms118>	akrumov: i don't know either. again, i didn't know "post_tasks" existed until ten minutes ago. i haven't had time to try it. is there a way for code within the roles to dynamically add messages to an array, and then a "post_tasks" item could just print the array?
T 1702317147 18<29akrumov18>	Yes, you need to use set_fact. set_fact:
T 1702317147 18<29akrumov18>	 messages: "{{ messages + ['Your message here'] }}"
T 1702317253 18<20jms118>	so `messages` is like a "global variable" ... over time would that build `['a','b','c']` or `['a',['b',['c']]]` ?
T 1702317304 18<29akrumov18>	jms1 ['a','b','c']
T 1702317319 18<29akrumov18>	How can I mention user ?
T 1702317338 18<20jms118>	"mention user"?
T 1702317378 18<29akrumov18>	<oblikoamoral> It doesn't fail
T 1702317473 18<19oblikoamorale18>	what doesn't fail? what does setup module report as your python interpreter on target host in question?
T 1702317546 18<24sahil_18>	Hi. I was learning ansible, and was tinkering with it. 3 arch VMs and 1 debian VM. This is the playbook https://termbin.com/d7j7 .  And I got this https://termbin.com/nm9r . It says ok=8 for debian one 192.168.122.19, rest it says 1 ok. is that 8 because of 2 gather facts and 6 plays, or what. And what's that ok=1 for the other 3 VMs
T 1702317556 18<29akrumov18>	Here is the output: https://dpaste.org/jVMKv
T 1702317579 18<19oblikoamorale18>	jms1: I've been there. and honestly the idea for human to track playbook execution results is rather silly. if you still think you have to do this, look at handlers. they are run on play end
T 1702317614 18<19oblikoamorale18>	akrumov: I'm out of ideas
T 1702317615 18<24sahil_18>	And why didn't it try to run on the arch VMs again. After the first package install failure, it didn't even try.
T 1702317728 18<20jms118>	oblikomorale: is there an alternative, i.e. some way for a human to *reliably* be told that a change that ansible made, requires that they take a specific action? i.e. reboot to enable/disable selinux, restart a service that *cannot* be restarted outside of a maintenance window, that kinda thing
T 1702318073 18<19oblikoamorale18>	handlers. make handlers to do a debug: msg: whatever message you need.  notify handler on needed task(s).  as a free bonus messages will be host specific without the need of additional processing that set_fact method will require
T 1702318306 18<29akrumov18>	oblikoamorale ty for the help mate :)
T 1702320832 18<28mackerman18>	jms1: Or, schedule the thing to happen in the future,  in cron or whatever.
T 1702320856 18<28mackerman18>	I'm suspicious of disable selinux in particular, that's not a thing I would ever to on Red Hat boxes.
T 1702320864 18<28mackerman18>	* do to Red Hat boxes
T 1702321004 18<20jms118>	the current puppet code base is handling everything from centos 5 forward ... ansible is going to be RHEL 9 and later, so i'm pushing to make selinux non-configurable, or at least only enforcing/permissive but never disabled ... until that happens i still have to be able to handle going to/from disabled (and after that i'll still need to handle "from" disabled, in which case a reboot is still needed)
T 1702321085 18<20jms118>	plus there are some other changes that normally require service restarts, but we're not allowed to restart certain services outside of a maintenance window, so instead we just print a message saying "service xyz needs to be restarted" so the production guys are at least *aware* of it
T 1702321157 18<28mackerman18>	sahil_: Default behavior is for failed tasks to stop that host from executing any further tasks.
T 1702321215 18<28mackerman18>	sahil_: If there are host specific differences, say different distro's package manager, you need some way for hosts to know which one to run
T 1702321316 18<28mackerman18>	ansible-doc package #  for package manager specifically, there is a module which tries to be smart and run the pacakage manager detected on the host
T 1702321348 18<28mackerman18>	Although that won't translate  package names and other differences
T 1702321385 18<28mackerman18>	You also can make more targeted groups than  "all",   if your inventory has distro specific groups for example.
T 1702321402 18<24sahil_18>	mackerman: Yes groups in the inventory file.
T 1702321463 18<28mackerman18>	ansible-doc -t inventory constructed  # also possible to dynamically add groups, like from facts.  There's a keyed_groups example  in this constructed inventory  type that makes use of  ansible_facts.distribution  detected values
T 1702321576 18<24sahil_18>	mackerman: Thanks for confirming. I plan to finish the learnlinuxtv playlist first, then will give sometime maybe 4-5 days for documentation to fully seepin. :) It's cool though. Plan to port my dotfiles script from bash to ansible.
T 1702321621 18<28mackerman18>	Or run the script as is, with generic  script Ansible module
T 1702321773 18<24sahil_18>	mackerman: Or Make it such that Irrespective of distro, I can use them. Ansible-vault for ssh keys.Currently the script is pretty lame (logic wize) https://github.com/mesahilgautam/dotfiles/blob/main/config.sh
T 1702321788 18<24sahil_18>	And it's limited to arch only
T 1702322572 20*	Disconnected (20)
T 1702322852 19*	Now talking on 22#ansible
T 1702322852 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702322852 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702322852 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702812797 19*	Now talking on 22#ansible
T 1702812797 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702812797 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1702812797 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702812828 18<19oblikoamorale18>	"| rejectattr('attribute', 'defined') "    # resulting list can be used as if not defined attribute defaultes to true
T 1702813730 18<19oblikoamorale18>	so, combined result of your requirements will be something like:  "{{ list_of_dicts | selectattr('attribute', 'defined') | selectattr('attribute') + list_of_dicts | rejectattr('attribute', 'defined') }}"   . but it's infinitely better to be explicit with definitions than jump through those hoops
T 1702814056 18<19oblikoamorale18>	alternatively you are free to implement custom filter plugin with arbitrary selection logic
T 1702814788 18<25StyXman18>	right,where should I put it?
T 1702814815 18<25StyXman18>	in my own ansible tree, I mean, so it gets picked up automatically
T 1702814897 18<25StyXman18>	this is my final task after adding the data: https://dpaste.org/vY6tz
T 1702814947 18<25StyXman18>	and I notice that implementing or is... impossible? unless I use two tasks
T 1702815715 18<19oblikoamorale18>	how does this expression not do what you want?
T 1702818645 18<25StyXman18>	oblikoamorale: it works, but force me to complete the data
T 1705506304 19*	Now talking on 22#ansible
T 1705506304 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1705506304 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1705506304 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1705524970 19*	Now talking on 22#ansible
T 1705524970 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1705524970 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1705524970 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1705525535 19*	Now talking on 22#ansible
T 1705525535 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1705525535 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1705525535 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1705525647 19*	Now talking on 22#ansible
T 1705525647 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1705525647 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1705525647 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1705525767 19*	Now talking on 22#ansible
T 1705525767 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1705525767 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1705525767 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1705526737 19*	Now talking on 22#ansible
T 1705526737 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1705526737 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1705526737 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1705559182 19*	Now talking on 22#ansible
T 1705559182 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1705559182 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1705559182 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1705559808 18<19ladeda18>	Seems like a similar issue to https://github.com/ansible/ansible/issues/77246
T 1705562767 20*	Disconnected (20)
T 1705562791 19*	Now talking on 22#ansible
T 1705562791 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1705562791 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1705562791 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1705568249 19*	Now talking on 22#ansible
T 1705568249 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1705568249 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1705568249 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1705570423 18<26tty018>	Hi all! i have a task with 3 vars (config, wazuh_logging and logging) and I want to do something like this (but working ofc ;): content: '{{ config | if feature_wazuh combine(wazuh_logging, recursive=True) else combine(logging, recursive=True) | to_nice_json(indent=2) }}'
T 1705570434 18<26tty018>	do you have any suggestion?
T 1705570578 18<26tty018>	wazuh_logging is a host/group variable
T 1705571097 18<26tty018>	i was completely wrong here, give me a sec to fix the inline if-statement :)
T 1705571372 18<26tty018>	i think i got it working when i used correct syntax :D this is how it looks: content: '{{ config | combine(wazuh_logging, recursive=True) if feature_wazuh | default(False) else combine(logging, recursive=True)  | to_nice_json(indent=2) }}'
T 1705571555 18<26tty018>	no, it didn't, i still need some guidance here :/
T 1705572084 18<22jrosser18>	tty0: without seeing a specific example with actual data it is difficult, but you might try using ternary to simplify it `(feature_wazuh | default(false)) | ternary(wazuh_logging, logging)` will select between the two potential things you want to combine into `config`
T 1705572346 18<26tty018>	oh nice! i will try it out
T 1705572504 18<26tty018>	here is the task: https://dpaste.org/1bkGs
T 1705574948 18<26tty018>	is it possible to combine ansible.builtin.combine with ternary?
T 1705574956 18<26tty018>	bbl for lunch
T 1705578304 18<26tty018>	did a workaround by setting a new var (__logging) to '{{ (feature_wazuh | default(false)) | ternary(wazuh_logging, logging) }}' and use combine in the content like this: content: '{{ config | combine(__logging, recursive=True) | from_yaml |to_nice_json(indent=2) }}'
T 1705578331 18<26tty018>	the positive thing is that other than me can probably follow the thinking a bit easier
T 1707739632 19*	Now talking on 22#ansible
T 1707739632 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1707739632 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1707739632 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1707740901 18<25fdan18>	hi what would be the command to run ansible playbook which would also display the variables
T 1707742868 19*	Now talking on 22#ansible
T 1707742868 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1707742868 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1707742868 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1707748859 22*	26ChanServ gives channel operator status to 18maxamillion
T 1707748873 22*	26ChanServ gives channel operator status to 18sivel
T 1708186109 19*	Now talking on 22#ansible
T 1708186109 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708186109 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708186109 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708438062 19*	Now talking on 22#ansible
T 1708438062 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708438062 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708438062 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708439546 19*	Now talking on 22#ansible
T 1708439546 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708439546 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708439546 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708439876 19*	Now talking on 22#ansible
T 1708439876 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708439876 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708439876 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708449525 18<20eoli3n18>	is there a way to pattern "all host which contains string "01" in group "group1"" ?
T 1708449561 18<20eoli3n18>	ok with &
T 1708449573 18<20eoli3n18>	8 years of ansible, i still learn
T 1708449671 18<24bkhl18>	eoli3n: look up ansible.builtin.group_by or ansible.builtin.add_host
T 1708449678 18<20eoli3n18>	no need
T 1708449692 18<20eoli3n18>	ansible '*01*:&group1'
T 1708449694 18<20eoli3n18>	BOOM
T 1708449714 18<20eoli3n18>	but thanks anyway ;)
T 1708449742 18<24bkhl18>	eoli3n: where is the docs for that? (hard to google)
T 1708449748 18<20eoli3n18>	https://docs.ansible.com/ansible/latest/inventory_guide/intro_patterns.html
T 1708449754 18<20eoli3n18>	check "intersection of groups"
T 1708449759 18<20eoli3n18>	in the table
T 1708449764 18<20eoli3n18>	here https://docs.ansible.com/ansible/latest/inventory_guide/intro_patterns.html#common-patterns
T 1708449778 18<24bkhl18>	Thanks.
T 1708449822 18<24bkhl18>	The student becomes the master. :-)
T 1708449827 18<20eoli3n18>	:P
T 1708473217 19*	Now talking on 22#ansible
T 1708473217 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708473217 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708473217 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708507893 19*	Now talking on 22#ansible
T 1708507893 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708507893 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708507893 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708508320 19*	Now talking on 22#ansible
T 1708508320 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708508320 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708508320 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708514227 18<26FreeBDSM18>	hello, should I report this as an ansible-lint's bug that it gives me `schema[role-arg-spec]: $.argument_specs.main.options.myvar '{{ mydict.keys() | list }}' is not of type 'array'`?
T 1708515460 18<19oblikoamorale18>	we don't know, #ansible-devtools is probably a more suitable place to ask; or even raise the issue on ansible-lint github repo.   if you provide a minimal reproducer someone might want to take a look
T 1708515644 18<25StyXman18>	there wasa way to cover a failed taxk and handle the error with another task, but I can't find it in https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_error_handling.html
T 1708515755 18<25StyXman18>	s/cover/recover/
T 1708515775 18<25StyXman18>	my god, these new glasses suck :((( sorry for all the typos
T 1708516194 18<25StyXman18>	ah, blog + rescue
T 1708516198 18<25StyXman18>	block*
T 1708516207 18<25StyXman18>	I also need a new brain, seemingly...
T 1708516912 18<26newpy18>	does anyone know which module to use to configure cisco is-is?
T 1708520295 18<26geek0118>	Hi community ,
T 1708520296 18<26geek0118>	My dict is something like this :
T 1708520296 18<26geek0118>	dict_newc:
T 1708520297 18<26geek0118>	Â Â Â Â Â  - { type: 'log', rep_source: ["/tmp", "/images", "/app", "/var/log"]}
T 1708520297 18<28sivel18>	geek01: Please slow down, or use a pastebin if you need to paste multiple lines. If you are using matrix, please do not send multi line messages. This is an automated message.
T 1708520297 18<26geek0118>	i need to iterate over rep_source directory and copy to remote server ..
T 1708520298 18<26geek0118>	i using loop for iteration, but it doesn't work
T 1708520298 18<26geek0118>	any idea ??
T 1708520301 22*	26sivel sets ban on 18geek01!*@*
T 1708520475 18<19oblikoamorale18>	1. don't paste into channel, use public paste site of your choice   2. illustrate how it does not work (exact task definition, error messages etc)   3. dict_newc is not a dict but a list of dicts    4. you'll be unbanned in a few minutes
T 1708520597 22*	26sivel removes ban on 18geek01!*@*
T 1708520651 18<19oblikoamorale18>	uh, didn't notice they were killed as well
T 1708524788 18<29Gekk18>	Hello community
T 1708524865 18<29Gekk18>	I would like to iterate over dict
T 1708524883 18<29Gekk18>	Code is here : https://paste.centos.org/view/e6fefda2
T 1708524961 18<29Gekk18>	My needs is to iterate over rep_source to copy that directories
T 1708524989 18<29Gekk18>	I'm using loop, but it doesn't help :(
T 1708525018 18<28frippe7518>	Anyone knows if there is a way to set tags when doing import_playbook?? Similar to ansible-playbook --tags
T 1708525190 18<28frippe7518>	From import_playbook doc .... Tags are not interpreted for this action, they are applied to the imported tasks
T 1708525263 18<25StyXman18>	Gekk: you will need to show a little bit more of that code, and "doesn't help" is not very much descriptive of the outcome you're actully getting
T 1708525284 18<25StyXman18>	at least show the task and the error message
T 1708525889 18<28frippe7518>	Seems that passing/setting the tags during import_playbook kind-of-works. But I have a specific task where the target cant be reached. so fails on UNREACHABLE. But that task does not have the tag. So I was hoping for the tasks to be skipped due to tagging.
T 1708528228 18<19oblikoamorale18>	tags can be applied to tasks either statically or dynamically. but the only way to choose what tags to run is --tags argument of ansible-playbook
T 1708529567 18<26alxgomz18>	I'm getting a "playbook not found error" when trying to  call a playbook from a git hosted collection. Looks like all is setup properly but still getting this error. Details of my installation are visible there: http://pastebin.fr/136233
T 1708529764 18<19flowerysong18>	alxgomz: That's not a valid name for a playbook in a collection. All collection content has to be valid Python identifiers, so `-` is not an allowed character.
T 1708530419 19*	Now talking on 22#ansible
T 1708530419 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708530419 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708530419 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708535815 18<24mathstuf18>	hi, is there a reason why `ansible-playbook --check` seems to be trying to actually perform actions?
T 1708536431 18<24mathstuf18>	the first failing action i have is https://docs.ansible.com/ansible/latest/collections/ansible/builtin/lineinfile_module.html
T 1708536448 18<24mathstuf18>	the file doesnt exist because the package isnt installed (which seems fine given that we're in `--check`)?
T 1708536505 18<24bkhl18>	And the lineinfile task has 'create: true'?
T 1708536902 18<24mathstuf18>	nope
T 1708536941 18<24mathstuf18>	ok, that looks relevant
T 1708539041 18<19flowerysong18>	Modules that support check mode will generally still fail in cases where it can't possibly perform the action (in this case because the file doesn't exist.) To skip the task entirely in check mode. you have to add a condition.
T 1708539060 18<19flowerysong18>	https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_checkmode.html#skipping-tasks-or-ignoring-errors-in-check-mode
T 1708539099 18<19flowerysong18>	(Adding `create: true` probably isn't a good fix for this particular task, because you normally want it to fail if the file doesn't exist.)
T 1708541014 18<22SuperLag18>	If you're using the Ansible provider for Terraform, does that assume the Ansible binaries are already on the box?
T 1708541226 18<19flowerysong18>	That's really a Terraform question, but the answer's probably 'yes.'
T 1708541301 18<19flowerysong18>	Just like if you were using `community.general.terraform` it needs Terraform to already be installed wherever the module is run.
T 1708543110 18<24mathstuf18>	is there a way to add a host to additional groups through its host declaration?
T 1708543128 18<24mathstuf18>	a group being able to say "all hosts with variable x set to y" is fine too
T 1708543272 18<24mathstuf18>	ah, `ansible.builtin.add_host` looks promising
T 1708543767 18<19flowerysong18>	mathstuf: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/constructed_inventory.html
T 1708543905 18<24bkhl18>	mathstuf: also related: ansible.builtin.group_by
T 1708544281 19*	Now talking on 22#ansible
T 1708544281 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708544281 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708544281 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708546132 18<24mathstuf18>	`ERROR! 'ansible.builtin.group_by' is not a valid attribute for a Play
T 1708546140 18<24mathstuf18>	where should i use it?
T 1708546150 18<24mathstuf18>	the examples dont say where it goes in the setup
T 1708546178 18<29jborean9318>	the examples show you how it is placed in a task
T 1708546193 18<29jborean9318>	if you are putting it in a playbook file directly you need to align it to the `tasks` indentation of the play
T 1708546362 18<24mathstuf18>	i moved it to a new role's `tasks/main.yml`â€¦same thing?
T 1708546465 18<24mathstuf18>	sorry, forgot to save the file
T 1708546470 18<29jborean9318>	if it's in the `tasks/main.yml` then that's just a list of tasks so the examples would apply as is
T 1708552693 18<25sandinak18>	off question .. has anyone come up wiht a snazzy way to aggregate all the packages needed by roles so that they can be installed in one shot w/o having to name them all discretely
T 1708553966 19*	Now talking on 22#ansible
T 1708553966 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708553966 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708553966 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708554077 19*	Now talking on 22#ansible
T 1708554077 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708554077 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708554077 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708554581 18<24mathstuf18>	is there a way to iterate over a list and update the item currently being iterated over?
T 1708554611 18<24mathstuf18>	something akin to `for i in items: if i.signal: i.consequences.append('some_item')`
T 1708555204 18<24mathstuf18>	hmm, extended: true looks promising
T 1708555215 18<24mathstuf18>	i can get the index and access the original variable that way?
T 1708555286 18<24mathstuf18>	ah, still no `items[ansible_loop.index0] = â€¦` mechanism
T 1708555884 18<24mathstuf18>	maybe i can just store into a new top-level dictionary variable
T 1708556182 19<mathstuf>	ugh, even that is difficult as i want to do `f({a: [1]}, {b: [2]}) -> {a: [1, 2]}`
T 1708556546 18<28justsomeguy18>	Is this something you can write a plugin in python for?
T 1708556716 18<24mathstuf18>	i would hope so
T 1708556750 18<24mathstuf18>	something like an `append` and `combine` module that would look up the variable in the key and append/combine the value of it
T 1708556774 18<24mathstuf18>	so you could do something like `item.inner.arr: [new1, new2]
T 1708570222 18<26newpy18>	anyone know how to use cisco.ios.* to parse running-config into structured output? docs claim it is possible but I can't get it working
T 1708570737 18<26newpy18>	ah found it, after running ios_command "sh run" & registering to variable output, I needed to pass output.stdout[0] to the next task (state: parsed, running_config: "{{ output.stdout[0] }}"
T 1708572372 18<25fdan18>	when i try to run the playbook the playbook is stuck at gathering facts and it doesnt proceed beyond that
T 1708572398 18<25fdan18>	i ran with -vv https://dpaste.org/V8a5Z
T 1708572432 18<25fdan18>	could anyone help me here
T 1708573763 18<28Core267118>	hi guys
T 1708583117 18<25fdan18>	when we encrypt a string using ansible vault, i somehow get a new line added, how to avoid that
T 1708583364 18<19oblikoamorale18>	don't press enter, press ctrl+d twice as suggested in prompt
T 1708583402 18<19oblikoamorale18>	2.16.3 does not introduce any surplus new lines
T 1708584503 18<25fdan18>	oblikoamorale im using 2.15.2
T 1708584532 18<25fdan18>	i create a new temp file, put the password and then do `ansible-vault encrypt mytextfile`
T 1708584568 18<25fdan18>	and then i add
T 1708584568 18<25fdan18>	token: !vault
T 1708584569 18<25fdan18>	Â  $ANSIBLE_VAULT;1.1;AES256
T 1708584569 18<25fdan18>	Â  3361303830313835623...
T 1708584572 22*	26sivel sets ban on 18fdan!*@*
T 1708584870 22*	26sivel removes ban on 18fdan!*@*
T 1708585637 18<19oblikoamorale18>	erm. you were talking about encrypt_string and suddenly there is encrypt file. so what is it
T 1708585810 18<25fdan18>	i never knew there was a comman to encrypt_string
T 1708585884 18<25fdan18>	oblikoamorale can you please tell me the command?
T 1708585911 18<25fdan18>	is it something like this ansible-vault encrypt_string 'mypassword!'
T 1708586072 18<19oblikoamorale18>	ansible-vault encrypt_string --help
T 1708586152 18<25fdan18>	nice
T 1708595352 18<26alien_lappy18>	i want to limit to one host, but i have an inventory directory(which contains a hosts.yaml file); so i tried 'ansible-playbook -i inventory -l "server1," some-playbook.yaml' but that doesn't find the server1
T 1708595571 18<22plundra18>	alien_lappy: Don't use ,? :)
T 1708596221 18<25endre18>	yeah
T 1708599622 18<26alien_lappy18>	"Could not match supplied host pattern" it also didn't work
T 1708599817 18<26alien_lappy18>	the hosts.yaml file has like: "groupA:", "hosts:", "host1:", "ansible_host: ip.ad.re.ss" , which should be the correct way, i think?
T 1708599834 18<26alien_lappy18>	but i can't match host1 with the --limit thing
T 1708600159 18<25endre18>	what does the command `ansible-inventory --host host1` return?
T 1708600341 18<26alien_lappy18>	'ansible-inventory -i inventory2 --host "host1" ' does return a dict with the ansible_host ip address
T 1708600411 18<26alien_lappy18>	but ' ansible-playbook -i inventory2 "host1" playbook-foo.yaml ' does not match a host
T 1708600425 18<26alien_lappy18>	but ' ansible-playbook -i inventory2 -l "host1" playbook-foo.yaml ' does not match a host
T 1708600429 18<26alien_lappy18>	sorry, forgot the limit
T 1708600470 18<28legreffier18>	is your playbook correctly referencing a group or host in inventory2 ?
T 1708600494 18<28legreffier18>	use pastebin.com if you need to share code/logs
T 1708600616 18<26alien_lappy18>	ic
T 1708600653 18<26alien_lappy18>	yeah, sorry, i had a hosts none in the playbook for some reason
T 1708606547 19*	Now talking on 22#ansible
T 1708606547 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708606547 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708606547 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708606631 19*	Now talking on 22#ansible
T 1708606631 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708606631 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708606632 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708606965 18<19justin0018>	#c
T 1708607178 18<25sandinak18>	like .. it'd be cool if there was a directory structure under roles that was aggregated automagically.. I might write an inventory plugin for this.  Would be really useful for things like packages, firewall rules, etc.
T 1708607223 18<25sandinak18>	where we could assemble all the entries and then use them once vs at role time
T 1708607775 18<22jrosser18>	sandinak: does this help at all https://docs.ansible.com/ansible/latest/collections/community/general/merge_variables_lookup.html
T 1708607825 18<22jrosser18>	i understand you ask about vars in roles though, so thats maybe not quite the same thing
T 1708607932 18<19oblikoamorale18>	here we go again. https://witchychant.com/ansible-cumulative-inventory-variables/
T 1708608313 18<24mathstuf18>	oblikoamorale: ooh, thanks! thats what ive been looking for
T 1708614949 18<24_NiC18>	Anyone know why ansible wants to re-add an existing child in my xml? https://pastebin.com/aPjELgtw Am I using the module wrong?
T 1708615230 18<24petn-randall18>	_NiC: Check the examples in `ansible-doc xml`, I think you want something like "name: Set the rating to '11'"
T 1708615355 18<24_NiC18>	Wouldn't that make a <policy>11</policy>?
T 1708615384 18<24petn-randall18>	_NiC: I think you need to use path/xpath/value instead of add_children.
T 1708615389 18<24_NiC18>	all the things I want to add are attributes to the policy tag, not values in/of it
T 1708615400 18<24_NiC18>	hm
T 1708615453 18<24petn-randall18>	_NiC: Your intention is to add it when it doesn't exist, and when it already exists, leave it (and not duplicate it), right?
T 1708615466 18<24_NiC18>	yes
T 1708615587 18<28legreffier18>	_NiC: lookup "- name: Add or modify an attribute, add element if needed" in https://docs.ansible.com/ansible/latest/collections/community/general/xml_module.html
T 1708615605 18<28legreffier18>	you explicitly tells it to add_children. it obeys.
T 1708615645 18<24_NiC18>	but neither attribute: nor value: takes lists as arguments, so it seems I can only add one at a time
T 1708615673 18<24_NiC18>	and since this xml file can have several <policy /> tags with different attributes and values, I can't really add one by one..
T 1708615762 18<24_NiC18>	for example if I have a task with xpath: /policymap/policy, attribute: domain, value: resource, ansible writes a line like this: <policy xmlns="" domain="resource" rights="none"/>
T 1708615778 18<24_NiC18>	(I believe the extra attributes are due to the !ATTLIST at the top of the xml file.)
T 1708616456 18<24_NiC18>	I can use set_children, and list everything I want in there, that seems to work.
T 1708616538 18<24_NiC18>	I'm not sure I understand/like the fact that xmlns="" is added whether I have it in my task or not, but I guess that's just down to how lxml parses the xml file.
T 1708616611 18<24_NiC18>	It also removes all "children" in <policymap>, which includes everything including comments, which is a little odd, maybe.
T 1708618201 18<26StucKman18>	where can I find the list of colors? I'm not sure how to spell gray and dark yellow does not seem to exist
T 1708623317 19*	Now talking on 22#ansible
T 1708623317 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708623317 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708623317 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708630546 19*	Now talking on 22#ansible
T 1708630546 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708630546 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708630546 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708631263 19*	Now talking on 22#ansible
T 1708631263 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708631263 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708631263 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708631930 19*	Now talking on 22#ansible
T 1708631930 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708631930 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708631930 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708632783 19*	Now talking on 22#ansible
T 1708632783 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708632783 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708632783 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708632966 19*	Now talking on 22#ansible
T 1708632966 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708632966 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708632966 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708646803 18<26newpy18>	I'm using `include_task: subtasks.yaml; debug: msg="{{ subtask_var }}"`
T 1708646838 18<26newpy18>	if subtask_var is a registered variable, I can access it from the parent
T 1708646870 18<26newpy18>	but if it's just in `vars: ` section of the task, I can't
T 1708646895 18<26newpy18>	should I just set_fact instead or is there a better way?
T 1708679094 18<24pva18>	Hi, guys. Some time ago templating was disabled in ansible_managed variable. Now, there is a bug https://github.com/ansible/ansible/issues/82322 to get that back. @bcoca told there that this poses some security issue, yet I don't understand what security issue he is talking about. Could you help me to understand, how an attacker may use ansble_manage to hack anything?
T 1708679398 18<24pva18>	I'd like some solution for the problem but atm I don't see any way how to hack that system and dev keeps silence there. Also, workaround exists, but ... first I'd like to understand what security implications it has and why.
T 1708679493 18<24pva18>	BTW, if you don't understand that problem as I do, please, ask developer in ticket) May be then he'll explain the problem better.
T 1708682230 18<19oblikoamorale18>	they probably dislike the possibility of malicious jinja experession injection sourced by ansible.cfg into all templates referencing ansible_managed. if you are after bcoca, they don't hang out here lately
T 1708682393 18<19oblikoamorale18>	raise the issue on mailing list, or ansible forum, I guess, if you are so inclined to push this thing forward
T 1708682441 18<19oblikoamorale18>	just remember that people rarely like crossposters :p
T 1708685871 18<24pva18>	oblikoamorale: thanks! But do you understand why injection in ansible.cfg is considered to be a security issue? It looks expected for me, like changing files in /etc/ may ruin OS...
T 1708685898 18<24Shadur18>	Possibly an odd question, but is it possible in an ansible role's meta or elsewhere to specify that it *needs* certain variables to exist and exit immediately with a reasonable error?
T 1708685966 18<19oblikoamorale18>	pva: that's just my guess, I'm not saying it was the exact original reasoning
T 1708685986 18<24Shadur18>	Hm, assert might do what I want.
T 1708685998 18<19double-p18>	assert... yeha
T 1708686032 18<19oblikoamorale18>	that's what role argspec is for
T 1708686046 18<24pva18>	oblikoamorale: I see. If nobody answers here I'll try mailing list... But at least it's not something evident I overlook.
T 1708688629 18<24Shadur18>	Argspec is exactly what I needed, thank you.
T 1708688661 18<24Shadur18>	Another question: In a jinja2 template, is it possible to set a conditional along the lines of "If more than one of the following variables are defined" ?
T 1708688912 18<19oblikoamorale18>	{% if [var1,var2,var3] | reject('undefined') | length > 1 %}...{% endif %}
T 1708696020 19*	Now talking on 22#ansible
T 1708696020 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708696020 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708696020 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708696321 19*	Now talking on 22#ansible
T 1708696321 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708696321 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708696321 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708696866 18<19Unixl0ver18>	 /msg alis list * -min 25
T 1708702692 18<28tuxick18>	"funny" how many threads you find on "Don't compare to empty string "
T 1708702746 18<28tuxick18>	https://github.com/ansible/ansible-lint/issues/457
T 1708702790 18<28tuxick18>	expecting "Closed: inconclusive"
T 1708703087 18<28tuxick18>	ah, it has been decided
T 1708703372 18<22SuperLag18>	If I'm cloning a repo with an ansible.cfg that says inventory=/file/in/repo/hosts, but I want force a particular playbook to only ever run on localhost, can I do that? and how?
T 1708703470 18<22SuperLag18>	I'm using terraform w/cloud-init. In the cloud-init config, I'm saying to clone a repo, and run a playbook in that repo.
T 1708703500 18<22SuperLag18>	with ansible-pull
T 1708705680 18<19flowerysong18>	...use `hosts: localhost` in the playbook?
T 1708706935 18<22SuperLag18>	tried that, didn't seem to work
T 1708706943 18<22SuperLag18>	that was my first thought, as well
T 1708709560 18<19flowerysong18>	It will work. That playbook then can't possibly run on anything other than localhost.
T 1708709597 18<20rvgate18>	feels like this has been asked a million times, and couldnt find a "simple" loop-in-loop setup without creating new wrapper roles to do the following: https://pastebin.com/YsQ5Jgkq , i could solve it with a template and generate the resulting config.json, but that feels more like a workaround then a proper way to do it.
T 1708709705 18<19flowerysong18>	If you mean "it doesn't work" as in it doesn't run at all, that's possible, but is probably down to how you're calling ansible-pull.
T 1708709795 18<19flowerysong18>	rvgate: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/subelements_filter.html
T 1708709845 18<19flowerysong18>	`loop: "{{ users | subelements('docker_registries') }}"`, or something similar.
T 1708709864 18<20rvgate18>	flowerysong, thanks! ill have a look, didnt know that existed :)
T 1708711178 18<20rvgate18>	flowerysong, made it work using: https://pastebin.com/0mvRgWf2 thanks again!
T 1708712857 18<19flowerysong18>	I really, really hate `with_`-style loops. There's a reason I recommended the specific thing I did.
T 1708712943 18<19flowerysong18>	This is a data transformation, you should be doing it with a filter, not a magic invocation of a lookup.
T 1708713635 18<20rvgate18>	flowerysong, is there a functional difference with using with_subelements and the filter subelements? it feels like its producing the same output, at this point its more of a personal preference it seems
T 1708714253 18<19flowerysong18>	The functional difference is that one teaches you how to use Jinja and can easily be used in other situations, and one is a black box where you don't understand what's happening and can't adapt it further without figuring out the internal logic.
T 1708720189 19*	Now talking on 22#ansible
T 1708720189 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708720189 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708720189 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708725151 18<29awb18>	How can I append to a list that may not exist? I tried `- "{{ list | default(omit) }}`, but that didn't work. Any suggestions?
T 1708725528 18<22jrosser18>	awb: omit should really only be used on module parameters, try using default([]) instead to end up with an empty list when it's undefined
T 1708725882 18<29awb18>	jrosser: Let me give that a try...
T 1708726062 18<29awb18>	Still doesn't work. :/ "An unhandled exception occurred while templating"
T 1708726082 18<29awb18>	I'll try to isolate this into a simple test case.
T 1708726298 18<25kikinovak18>	Hi. I tried to subscribe to the Ansible Mailing List with my (non-Gmail) e-mail address. Sent the subscription request, got the confirmation mail, replied to that, got a mail that said I was subscribed. And now messages are still being sent to my Gmail address (which I don't want to use). How comes Google hijacks this?
T 1708726358 18<25kikinovak18>	On a side note: I wonder why one of the most widespread free software components doesn't use a real mailing list like mailman and relies to Google for that.
T 1708726462 18<29awb18>	jrosser: The simple test case works, which suggests something else is wrong. Thanks for the pointer!
T 1708726514 18<22jrosser18>	awb: no problem - here is some info about what omit is intended for https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_filters.html#making-variables-optional
T 1708726641 18<29awb18>	I had used default('') and default([]) before, but was grasping at straws because none worked. Now it seems like I was looking in the wrong place :D
T 1708735883 18<27MockingMoniker18>	Can I dynamically include plays in a loop? Can I dynamically include plays at all?
T 1708735958 18<27MockingMoniker18>	By that I mean at the play level, not on the individual steps like include_roles or include_tasks.
T 1708772561 19*	Now talking on 22#ansible
T 1708772561 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708772561 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708772561 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708788546 19*	Now talking on 22#ansible
T 1708788546 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708788546 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708788546 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708788723 19*	Now talking on 22#ansible
T 1708788723 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708788723 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708788723 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708792087 19*	Now talking on 22#ansible
T 1708792087 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708792087 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708792088 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708823390 19*	Now talking on 22#ansible
T 1708823390 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708823390 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708823390 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708882893 19*	Now talking on 22#ansible
T 1708882893 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708882893 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708882893 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709072158 19*	Now talking on 22#ansible
T 1709072158 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709072158 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709072158 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709073429 18<19flowerysong18>	YAML doesn't allow tabs at all.
T 1709073488 18<25nerdette18>	true
T 1709073538 22*	26ChanServ gives channel operator status to 18shertel
T 1709073696 18<29awb18>	Looking for some help with run_once and role handlers. I have a role that writes a file on the controller and I do this with a handler. I do a flush_handlers right after notify from another role's tasks. What I see now is that the first target in a group stops processing the rest of the tasks until every other target is done. Any idea what might be going on there?
T 1709074179 18<25nerdette18>	did you set -vvv and have a look?
T 1709074227 18<25nerdette18>	I remember there was also an option to save the generated python scripts on the target
T 1709074245 18<29awb18>	Yes and it wasn't super helpful. I just reduced my plays to a simple test case and will run it again real quick...
T 1709074246 18<19flowerysong18>	Sounds like a bug. What version of ansible-core are you using? (Also, because it needs to be ruled out: are you using Mitogen?)
T 1709074378 18<29awb18>	2.16.3 and I don't know what Mitogen is :D
T 1709075266 18<19flowerysong18>	I can't reproduce your result with the information you've provided, so the issue probably lies somewhere in the details that you haven't provided.
T 1709075833 18<29awb18>	I think I might have found something. I am looking at the -vvv output and following along the handler's tasks, it suddenly jumps back to the invoking task list. Let me see if I can describe it...
T 1709076078 18<29awb18>	I see all these RUNNING HANDLER lines and they are all correct. It gets to a waitfor, which it correctly skips. The next task is a pause, which should also be skipped but instead it executes the next task after I did the handler flush. Meaning, it "jumps back" to the calling role. I see a TASK with the /wrong/ task description (the previous one from the handler) but the correct filename and execution.
T 1709076103 18<29awb18>	Could this be caused by using a pause with a prompt in a handler?
T 1709076194 18<29awb18>	It also only executes that next task for targets that are not the first one, the one it correctly used for the run_once.
T 1709076393 18<29awb18>	I should probably also add that this all worked just fine previously when it was not a role, but import_tasks. To answer the obvious question of "what changed?" :D
T 1709076502 18<25nerdette18>	btw., I believe I found my issue: old syntax. Correct I believe is:  loop: "{{ (files.files | sort(attribute='mtime'))[:-2] }}" ... testing it
T 1709077191 18<25nerdette18>	... just removed a few thousand backup files, looks good :-)
T 1709077252 18<29awb18>	Nice job, nerdette!
T 1709077333 18<29awb18>	OK, so my problem is getting a bit more weird. The task in the handler that is mislabeled (i.e., it "jumps back") is always the fourth one. The target group is five hosts, four of which show up in that task.
T 1709077364 18<29awb18>	I am going to change it all to debug tasks to eliminate any conditionals interfering.
T 1709082580 19*	Now talking on 22#ansible
T 1709082580 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709082580 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709082580 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709083095 18<29vbotka18>	awb, if you want to wait for a file use the module *wait_for*.
T 1709083249 18<29awb18>	I use that pretty commonly and it's a good idea. I just think it is more hassle that it is worth in this case. I just move the handler code into tasks/main.yml and do an import_role instead. Works.
T 1709164962 19*	Now talking on 22#ansible
T 1709164962 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709164962 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709164962 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709165582 20*	Disconnected (20)
T 1709165736 19*	Now talking on 22#ansible
T 1709165736 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709165736 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709165736 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709176164 18<26newpy18>	I'm have a list of items, and each item has a "name" attribute and another attribute which is also a list of items
T 1709176226 18<26newpy18>	I'm trying to check each item and if name is "X" then check the second attribute and grab an attribute from each item in that sub-list
T 1709176312 18<26newpy18>	would it be something like my_list | selectattr('name','eq','X') | map(attribute='mylist.otherattr.field')
T 1709176313 18<26newpy18>	?
T 1709177159 18<26newpy18>	hmm, thought for sure this would do it but no dice:  my_list | selectattr('name','eq','X') | map(attribute='otherattr') | selectattr('field')
T 1709177276 18<26newpy18>	oh, I had a typo
T 1709177277 18<26newpy18>	doh
T 1709177906 18<26newpy18>	hmm, still stuck here: paste.ee/p/GVt0f
T 1709178174 18<26newpy18>	added a flatten filter between the two maps, seems to have worked
T 1709178189 18<26newpy18>	(commented the last map to see what the previous output was, noticed it was a list of lists)
T 1709184057 18<29vbotka18>	newpy, fix the name of the filter *selectattr* and *flatten* the list before mapping *neighbor_address*
T 1709200203 18<29nomicon18>	Throwing it out here if somebody knows:
T 1709200204 18<29nomicon18>	https://github.com/freeipa/ansible-freeipa/issues/1214
T 1709205702 18<24Shadur18>	Is it permissible to set a conditional on a handler?
T 1709205777 18<24Shadur18>	Context: I'm setting up a role to install keepalived because I'm planning to switch to it from corosync, and during the role it calls the 'Restart keepalived' handler if the config file changes... But I do *not* want to start or restart keepalived if I've set the host var 'do_not_start_keepalived_yet' to true.
T 1709205853 18<24Shadur18>	(BEcause it turns out that if you have a cluster running with corosync, and you install and configure keepalived on one of its nodes, and keepalived is restarted, they get into an argument about who is in charge of things and Bad Stuff Happens. Given that stuff you install corosync or keepalived on tends to have HA requirements, this is not something you want to see in a production environment)
T 1709205957 18<19oblikoamorale18>	so many words... what have you tried and how it didn't work?  handler is just a task and, when keyword is applicable there as in any other tasks
T 1709206217 18<24Shadur18>	Looks like that works.
T 1709208259 18<25fireba1118>	hm ... i'm looking for suggestions what to use for firewall rules that is nice to mange with ansible. directly use iptables? use ufw? i want roles to add their own rules and obviously avoid having a rules file per host that just gets copied over .. :-P
T 1709208700 18<22FooBar18>	I template nft's config-file based on a generic base + per role / per host / per group additional rules
T 1709208724 18<22FooBar18>	https://github.com/sigio/ansible-role-nft
T 1709208749 18<22FooBar18>	(though somewhat outdated, not what I actually use these days, but to give an idea)
T 1709210115 18<20Led_Zeppelin218>	i need to keep doing --extra-vars="ansible_become_pass='{{ lookup('env','ANSIBLE_BECOME_PASS') }}'". Is there a way I can encapsulate this?
T 1709211722 18<19oblikoamorale18>	encapsulate how? you'd need to expand a bit
T 1709212532 20*	Disconnected (20)
T 1709212551 19*	Now talking on 22#ansible
T 1709212551 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709212551 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709212551 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709213351 18<27satmd18>	do you happen to set ansible_become_pass / become_pass anywhere else?
T 1709213371 18<27satmd18>	using --extra-vars usually is only needed when overwriting a variable that's set somewhere in the written code
T 1709213389 18<27satmd18>	and I think that if that's the case, it'd be better to change that place
T 1709213993 19*	Now talking on 22#ansible
T 1709213993 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709213993 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709213993 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709216163 19*	Now talking on 22#ansible
T 1709216163 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709216163 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709216163 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709228143 18<29oliva18>	hi all can you please tell me why a quoted string in parentheses evaluate to true when tested as conditional?
T 1709228374 18<26newpy18>	hi, question on inventories:
T 1709228396 18<26newpy18>	Most of the inventories I see are of the format <group>: <host>: ...
T 1709228435 18<26newpy18>	I saw one using host are the parent with a groups attribute defining which groups it belonged to
T 1709228458 18<26newpy18>	was that for an older version of ansible or are both still valid?
T 1709228846 18<19oblikoamorale18>	oliva: non empty string is always truthy. what are your expectations?
T 1709229247 18<19oblikoamorale18>	newpy: not clear what your question is. out of the box ansible supports inventories in either yaml or ini formats, and their structure hasn't been changed in like... forever?
T 1709229536 18<26newpy18>	oblikoamorale, you mean like this? https://docs.ansible.com/ansible/latest/inventory_guide/intro_inventory.html#hosts-in-multiple-groups
T 1709229573 18<26newpy18>	I guess my issue is that I've defined host vars in the inventory file when I should have put it in hostvars/
T 1709229633 18<26newpy18>	actually it's trickier since I create my inventory dynamically
T 1709229657 18<26newpy18>	not sure if/how I can do that for host_vars as well
T 1709229697 18<26newpy18>	my hope was to just keep my inventory as <hostname>: <vars>... and add a "groups" list attribute with the groups the host belongs to
T 1709229761 18<26newpy18>	oh docs say it merges the data from the groups so I guess if entry has nested vars they'll be combined
T 1709229769 18<26newpy18>	*any entry
T 1709231018 18<29oliva18>	oblikoamorale: I tought so but why only inside parentheses?
T 1709231174 18<19oblikoamorale18>	when: ("string")   and when: '"string"'   are both truthy. 2nd case must be doublequoted otherwise it's parsed as when: string.  round brackets serve the same purpose
T 1709231359 18<29oliva18>	oblikoamorale: thank you very much for your kind explaination
T 1709231760 18<24jrglynn218>	newpy: I use dynamic inventory and assign groups in my inventory file, then can use `group_vars` directory structure to assign variables/etc. is that what you are asking? https://docs.ansible.com/ansible/latest/inventory_guide/intro_inventory.html#organizing-host-and-group-variables
T 1709234145 18<26newpy18>	jrglynn2, yea it's tricky b/c I dispatch the actual play to ansible_runner on a container outside of my control
T 1709234168 18<26newpy18>	I should be able to drop files into /etc/ansible hopefully, let me see
T 1709234214 18<26newpy18>	jrglynn2, I was hoping I could just assign group vars, group assignments, etc, all in the dynamic inventory
T 1709234243 18<26newpy18>	but maybe this is really slow too now that I think about it, a lot of this data will be somewhat static
T 1709235081 18<24jrglynn218>	i have never tried to assign variables in the group definition, never had the need. So i don't knwo if it would work - but here is an exerpt of my `keyed_groups` that gets created - I added the `vars` piece. If it was going to work, it would be that type of format ... this is YAML  ==> https://pastebin.com/XGJz8fW3
T 1709254781 19*	Now talking on 22#ansible
T 1709254781 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709254781 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709254781 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709280509 18<19double-p18>	offtopic shameless plug - we just opened CfP for EuroBSDcon :)
T 1709289967 18<25fdan18>	what is test kitchen?
T 1709289991 18<25fdan18>	i know its a testing framework
T 1709289995 18<25fdan18>	how do i use it with ansible
T 1709290033 18<25fdan18>	what does bundle install and bundle exec kitchen test -l debug does?
T 1709298076 19*	Now talking on 22#ansible
T 1709298076 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709298076 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709298076 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709305277 19*	Now talking on 22#ansible
T 1709305277 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709305277 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709305277 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709312939 19*	Now talking on 22#ansible
T 1709312939 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709312939 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709312939 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709316253 19*	Now talking on 22#ansible
T 1709316253 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709316253 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709316253 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709345126 19*	Now talking on 22#ansible
T 1709345126 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709345126 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709345126 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709356535 19*	Now talking on 22#ansible
T 1709356535 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709356535 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709356535 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709356629 19*	Now talking on 22#ansible
T 1709356629 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709356629 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709356629 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709402548 19*	Now talking on 22#ansible
T 1709402548 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709402548 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709402548 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709451377 19*	Now talking on 22#ansible
T 1709451377 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709451377 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709451377 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709473899 18<19ljkimz18>	Is it expected that using `required_if` in a custom module argument spec makes the parameters that are tested implicitly required? I have a simple module with a parameter `enabled` which is not required for all uses of the module. However, we do want to specify that a few other parameters are required WHEN `enabled` is used.
T 1709473900 18<19ljkimz18>	https://pastebin.com/NPUbm6Gd
T 1709473964 18<19ljkimz18>	But when we use `required_if` to specify the parameters required with `enabled` then the module execution fails unless we provide `enabled ` at all times: `Exception calling â€œCreateâ€ with â€œ2â€ argument(s): â€œObject reference not set to an instance of an object.â€` If it's not clear this is specifically a Windows module.
T 1709476402 18<19oblikoamorale18>	while i don't have input for argspec subject, aren't you missing single quote in line 6
T 1709478136 18<19ljkimz18>	oblikoamorale yes. But that's not the problem. I actually transcribed that code from a disconnected environment. In the source it's fine I just messed up on the paste
T 1709478149 18<19ljkimz18>	But thanks for at least looking
T 1709523463 19*	Now talking on 22#ansible
T 1709523463 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709523463 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709523463 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709523580 19*	Now talking on 22#ansible
T 1709523580 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709523580 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709523581 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709563245 18<20macado18>	Does AWX have it's own specific channel?Â  I was going to open a bug report but need some help investigating an issue we are having with long running Ansible jobs that just seem to crash/die in middle of job.Â  Â  Â Running AWX 23.8.0 using AWX operator (awx-operator.v2.12.0) on Red Hat Openshift.Â  Â From what I can tell the awx-prod-task pod
T 1709563246 18<20macado18>	keeps restarting (although may that is normal, sorry sort of new to AWX).Â  I dont recall having this issue a month ago so i'm not sure if it's an issue with a recently upgraded version from the operator. It's happening in both my lab and prod AWX environments.
T 1709563246 18<20macado18>	I am seeing this this in awx-prod-task logs in openshift but I am not sure if this is the issue. https://pastebin.com/JGDfxQXQ
T 1709563373 18<19oblikoamorale18>	we deal with ansible cli here mostly, try #ansible-awx
T 1709563473 18<20macado18>	oblikoamorale thanks!
T 1709564121 18<19doubletwist18>	If a playbook uses 'tasks_from' when importing a role - will it still be able to use and handlers defined in that role?
T 1709564130 18<19doubletwist18>	any handlers
T 1709564214 18<19double-p18>	wouldnt count on that
T 1709564508 18<19oblikoamorale18>	so... let's be more specific. in a playbook there is a play, with a task in tasks section, referencing import_role having tasks_from param. why wouldn't it process role handlers? it will, from handlers/main.yml. what happens if you try it?
T 1709565566 18<19doubletwist18>	Apparently it does work. Although now I'm trying to figure out why it's calling the handler even when the notifying tasks has no changes
T 1709565859 18<19double-p18>	gpg keyring import... every time. aargh.
T 1709565968 18<19oblikoamorale18>	doubletwist: provide a minimal reproducer so we can take a look. although I very much doubt handlers are invoked without notifications
T 1709566429 18<19doubletwist18>	https://paste.debian.net/1309424/
T 1709566867 18<19oblikoamorale18>	according to task name, the handler "Reboot after patch" is not executed. some task named "myrole : Reboot systems after successful patching.." runs instead
T 1709566990 18<19doubletwist18>	lol
T 1709566992 18<19doubletwist18>	oops
T 1709567022 18<19doubletwist18>	yup, that'd do it.
T 1709567023 18<19doubletwist18>	Thank you
T 1709570760 18<24test_18>	hi, i have something like "MY_VAR: [1,2,3]" in group_vars; for a specific host, the list shall be appened like "MY_VAR: {{ MY_VAR + [4,5] }}" - but that leads to a recursion error - how would I do that correctly?
T 1709577458 18<24jrglynn218>	test_: have you tried `.append`? {{ MY_VAR.append(4) }}? see https://stackoverflow.com/questions/49619445/how-to-append-to-a-list-in-jinja2-for-ansible
T 1709577598 18<19oblikoamorale18>	nah, what they likely are looking for is some variation of https://witchychant.com/ansible-cumulative-inventory-variables/
T 1709578603 18<29miira18>	Hello all, can someone help me? I am trying to find a variable inside another variable inside a conditon "when: item is search(vol_type)" where item is a list with key and value and vol_type is a variable that has a result that changes and is not fixed. How can I acheive this?
T 1709580806 18<26newpy18>	has anyone gotten cisco.ios.ios_l3_interfaces module state: deleted to work?
T 1709620790 19*	Now talking on 22#ansible
T 1709620790 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709620790 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709620790 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709625273 18<22Haxxa18>	Hi, is there anyway to send AT commands using Ansible. I have 50 devices to setup that require AT commands over serial. Iwas using minicom but its getting very very tedious
T 1709625770 18<25fdan18>	anyone familiar with test kitchen?
T 1709626220 18<19double-p18>	Haxxa: maybe https://github.com/k0ste/ansible-role-netctl (see the ppp connection)
T 1709626397 18<22Haxxa18>	Yeah tried that earlier, ideally I could just pipe AT commands:
T 1709626398 18<22Haxxa18>	AT+QCFG="usbnet",1    AT+CGDCONT=1,"IP","super"   AT+CFUN=1,1
T 1709628506 18<25fdan18>	any one can help me with test kitchen?
T 1709628598 18<19oblikoamorale18>	no, ask their support
T 1709628639 18<25fdan18>	ok ill look in google, but do they even have their support?
T 1709628901 18<25fdan18>	oblikoamorale https://dpaste.org/oqaUr
T 1709628926 18<25fdan18>	file structure: https://dpaste.org/7Svj0
T 1709628964 18<25fdan18>	could you help me whats wrong and why i get this error
T 1709629637 18<27colo18>	Haxxa: well, doing serial communication is finnicky business. but minicom, picocom et al. should be fine to use - I have a hard time imagining how a dedicated ansible module should vastly improve your current experience ;) maybe you are holding it slightly wrong? what is the actual problem?
T 1709629699 18<22Haxxa18>	colo, I am setting up QC25 modems on 50 embedded linux boxes and don't want to manually ssh into every box and send the AT commands
T 1709629726 18<27colo18>	so... use the `script` module?
T 1709629784 18<27colo18>	just because you use ansible doesn't mean that EVERYTHING you do in your play/role has to be done using its clumsy DSL and "native
T 1709629786 18<27colo18>	" modules
T 1709629831 18<19double-p18>	some of those router dialin modules, too? fortios/fortinet and such
T 1709629910 18<22Haxxa18>	I only started using ansible today, I had a problem and it solved it. i.e. mass configuring devices in a repeatable way. I don't really know whats best way to handle finiky modems
T 1709629987 18<27colo18>	Haxxa: I see :) well, I would write a shellscript for the target device that sets the modem up in the expected way once, then use an inventory of all remote hosts and a task using that script via the ansible `script` module to mass-deploy/execute it. job done.
T 1709630003 18<27colo18>	(the script would use minicom, if you have that on each remote host)
T 1709630097 18<22Haxxa18>	So I have been using minicom interactively thus far. How do I use minicom with a script and make it wait for AT: OK for example, where commands can take 10 seconds to reply
T 1709630212 18<27colo18>	you can try automating minicom (using expect, for example), or use another tool for serial comms that is more friendly towards non-interactive use. maybe check out https://linux.die.net/man/1/runscript first.
T 1709630297 18<22Haxxa18>	Thanks
T 1709633357 18<19oblikoamorale18>	fdan: we wouldn't know. the error suggests the role is not in configured role search path
T 1709646406 18<25fdan18>	still unable to solve this problem: https://dpaste.org/oqaUr
T 1709646407 18<25fdan18>	file structure: https://dpaste.org/7Svj0
T 1709646407 18<25fdan18>	can anyone me on how to fix this
T 1709646651 18<28legreffier18>	fdan: ansible-playbook will automatically look up and find role, you don't want to specify neither a path or a key here , just list your roles as "- role_name" under the "roles:" key.
T 1709646696 18<19flowerysong18>	The key is fine, it's an alternate syntax for when you need to associate additional things with it (like tags.)
T 1709646718 18<25fdan18>	legreffier you mean to sayÂ  this is not neededÂ  Â requirements_collection_path: roles/requirements.yml ?
T 1709646718 18<19flowerysong18>	But `roles/` should never need to be part of your role name.
T 1709646764 18<25fdan18>	flowerysong which line number exactly?
T 1709646795 18<19flowerysong18>	The error appears to be in '/tmp/kitchen/playbook.yml': line 18, column 7, but may
T 1709646882 18<28legreffier18>	i was only talking about the first dpaste link.
T 1709646901 18<25fdan18>	flowerysong i have something like this https://dpaste.org/hkPHX
T 1709646994 18<28legreffier18>	this is how your playbook should look : https://dpaste.org/jYSQ6
T 1709647070 18<25fdan18>	legreffier but i dont see anything wrong with my approach
T 1709647098 18<25fdan18>	why do you think my approach is wrong
T 1709647133 18<28legreffier18>	ok. have a nice day. lol. *plonk*
T 1709647164 18<19flowerysong18>	fdan: That's not the version of the playbook that error is from, because it does not contain the line in the error.
T 1709647273 18<19flowerysong18>	And `role: .` is an incredibly terrible idea.
T 1709647295 18<25fdan18>	what does role: . means?
T 1709647440 18<19flowerysong18>	The line in your playbook.
T 1709647487 18<25fdan18>	yes what does it mean.
T 1709647497 18<25fdan18>	because i didnt wrote those parts in it
T 1709647552 18<19flowerysong18>	I'm not sure how it would actually behave, because roles are supposed to have names, not point to magic directory entries like '.' (which is the current directory, while '..' is the parent directory.)
T 1709647728 18<25fdan18>	hmm
T 1709647877 18<19flowerysong18>	Theoretically I think it would load the first path in your roles search path as a role, which should end up as an empty role because those paths are supposed to be to containing directories. But you could misconfigure things so it actually loads a role, probably.
T 1709648109 18<25fdan18>	flowerysong: this is what it still points to https://dpaste.org/hkPHX
T 1709648114 18<25fdan18>	i still see the same error https://dpaste.org/hkPHX
T 1709648121 18<25fdan18>	Â  Â  Â  Â The error appears to be in '/tmp/kitchen/playbook.yml': line 18, column 7, but may
T 1709648532 18<19flowerysong18>	Then you're not editing the playbook that you're actually running. This playbook *cannot* result in the error you showed.
T 1709648541 18<19flowerysong18>	As I stated previously.
T 1709648972 18<24shertel18>	the `roles_path: .` in the provisioner seems like it would overwrite the default (rather than append/prepend), did you try without that?
T 1709649165 18<25fdan18>	shertel: which line exactly?
T 1709649202 18<25fdan18>	shertel: https://dpaste.org/7Svj0#L3
T 1709649206 18<25fdan18>	this one?
T 1709649379 18<24shertel18>	fdan: yes, that's the one I was wondering about
T 1709649494 18<25fdan18>	ok i removed it, now it says this errorÂ  Â  Â  Â  ERROR! The requirements file '/tmp/kitchen/roles/requirements.yml' does not exist.
T 1709652777 18<22Haxxa18>	Any guess why these commands work when entered directly into the shell, but not when called from ansible?
T 1709652777 18<22Haxxa18>	https://paste.debian.net/plain/1309535
T 1709652784 18<22Haxxa18>	(root shell)
T 1709653002 18<28jtanner18>	Haxxa: https://stackoverflow.com/a/56682415
T 1709653025 18<22Haxxa18>	jtanner just figured it out as you posted it
T 1709653051 18<22Haxxa18>	BTW I started using ansible this afternoon or first time, I am finding it very nice
T 1709658822 19*	Now talking on 22#ansible
T 1709658822 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709658822 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709658822 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709661930 19*	Now talking on 22#ansible
T 1709661930 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709661930 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709661930 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709662638 18<24Freneticks18>	Oddmonger: la switch c'est juste une SoC nvidia ARM
T 1709662651 18<24Freneticks18>	sorry mt
T 1709662660 18<27stenno18>	ceci n'est pas un switch
T 1709667679 19*	Now talking on 22#ansible
T 1709667679 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709667679 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709667679 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709674382 19*	Now talking on 22#ansible
T 1709674382 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709674382 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709674383 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709686297 19*	Now talking on 22#ansible
T 1709686297 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709686297 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709686297 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709705791 19*	Now talking on 22#ansible
T 1709705791 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL ðŸ’€ https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709705791 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709705791 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709711782 18<28cla18>	awb: Correct.
