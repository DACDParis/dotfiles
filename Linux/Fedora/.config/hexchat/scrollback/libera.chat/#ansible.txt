T 1702193179 19*	Now talking on 22#ansible
T 1702193179 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702193179 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702193180 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702194034 20*	Disconnected (20)
T 1702194061 19*	Now talking on 22#ansible
T 1702194061 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702194061 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702194061 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702194196 24*	dacd has quit (Ping timeout: 245 seconds)
T 1702195145 24*	f4stpath has quit (Remote host closed the connection)
T 1702195289 19*	Now talking on 22#ansible
T 1702195289 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702195289 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702195289 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702195347 23*	sandb0y (~pirate@user/sandb0y23) has joined
T 1702198993 20*	Disconnected (20)
T 1702201366 19*	Now talking on 22#ansible
T 1702201366 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702201366 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702201366 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702201394 18<20madkiss18>	hi folks. What is the easiest way to ensure that runner containers in AWX are not terminated after a task in them has failed? I need to debug something.
T 1702202102 18<20madkiss18>	or can somebody recommend another strategy to debug a failing task inside of a job that is run within an execution environment?
T 1702202355 18<19oblikoamorale18>	ask in #ansible-awx , here we mostly care about cli ansible
T 1702202361 18<20madkiss18>	thanks
T 1702208540 19*	Now talking on 22#ansible
T 1702208540 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702208540 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702208540 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702214434 20*	Disconnected (20)
T 1702214614 19*	Now talking on 22#ansible
T 1702214614 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702214614 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702214614 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702219834 20*	Disconnected (20)
T 1702219889 19*	Now talking on 22#ansible
T 1702219889 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702219889 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702219889 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702220524 20*	Disconnected (20)
T 1702220571 19*	Now talking on 22#ansible
T 1702220571 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702220571 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702220571 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702281887 19*	Now talking on 22#ansible
T 1702281887 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702281887 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702281887 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702282236 20*	Disconnected (20)
T 1702282251 19*	Now talking on 22#ansible
T 1702282251 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702282251 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702282251 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702282262 20*	Disconnected (20)
T 1702282282 19*	Now talking on 22#ansible
T 1702282282 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702282282 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702282282 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702283722 18<26tkonto18>	hi everyone.
T 1702283732 18<26tkonto18>	I have the following problem with a list:
T 1702283802 18<26tkonto18>	https://dpaste.org/1kx00
T 1702283816 18<26tkonto18>	What I try to do is add the "unit_id" in each dict in the list
T 1702283818 18<26tkonto18>	My code:
T 1702283853 18<26tkonto18>	https://dpaste.org/s3RYV
T 1702283870 18<26tkonto18>	Any idea?
T 1702283877 18<26tkonto18>	To explain it:
T 1702283932 18<26tkonto18>	This will add the unit_id for a SCSI paravirtualized HD. But id 7 is excluded (the ID of the controller itself). Looping the range with exclusion, resulted in skipping whatever item would be allocated unit_id 7
T 1702283952 18<26tkonto18>	so I created the range outside the loop, and then I try to iterate the object and the range, withing a loop
T 1702283997 18<26tkonto18>	but instead of getting: key:***, value:***, unit_id:*** I get what you read in https://dpaste.org/1kx00
T 1702284034 18<26tkonto18>	only the last dict in the list returns combined
T 1702285561 20*	Disconnected (20)
T 1702314577 19*	Now talking on 22#ansible
T 1702314577 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702314577 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702314577 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702314605 18<29akrumov18>	Has anyone else encountered the following issue? I've built Ansible from the devel branch, and when I try to execute a playbook, I receive the following error: ansible_ansible.builtin.file_payload.zip/ansible/module_utils/basic.py, line 5, SyntaxError: future feature annotations is not defined. From what I've seen, there is a pull request (https://github.com/ansible/ansible/pull/81902) that make changes to this. I'm using Python version 3.11.4 with Ansible
T 1702314605 18<29akrumov18>	[core 2.17.0.dev0] (devel a9919dd7f6).
T 1702315120 18<20jms118>	question: is there a way to have a message printed (like `ansible.builtin.debug`) at the very end of a playbook run? we're going to have playbooks which invoke several dozen different roles, which will potentially generate a couple thousand screenfuls of output, and i need a "you need to reboot the machine" message to print at the very end of the output so the user doesn't miss it
T 1702315211 18<29akrumov18>	Did you try to use post_tasks ?
T 1702315460 18<19oblikoamorale18>	akrumov: works for me. doublecheck your python version (anything 3.7+ should work) https://dpaste.org/yv3u9
T 1702315737 18<20jms118>	i didn't try, because i didn't know such a thing existed. reading about it now.
T 1702315924 18<20jms118>	okay, so pre_tasks and post_tasks can be declared in a playbook. is there a way for a ROLE to declare tasks that need to be done at the end of the playbook which called it?
T 1702315946 18<29akrumov18>	oblikoamorale I just tested it on 2 different machines with this python version with same results. Did you run only this command or build the ansible and run playbook or task ?
T 1702315996 18<19oblikoamorale18>	what is your python version on target host?
T 1702316065 18<19oblikoamorale18>	apparently 2.17 will require at least python 3.7
T 1702316108 18<29akrumov18>	python3.10
T 1702316206 18<19oblikoamorale18>	and if you try to make that import on py3.10 as I showed, will it fail?
T 1702316266 18<29akrumov18>	no it´s working
T 1702316276 18<19oblikoamorale18>	huh. works for me on py 3.10.12.  and no, I didn't build ansible. just testing the error you have indicated
T 1702316334 18<19oblikoamorale18>	is it possible you have more than one py3 version on target host and interpreter discovery somehow chooses wrong one?
T 1702316405 18<29akrumov18>	I was thinking the same so I set the interpretter in the inventory:
T 1702316521 18<29akrumov18>	jms1 I don think this is possible. I just don get it why post_tasks doesn't´t work for you ?
T 1702316662 18<19oblikoamorale18>	does it fail if you run 'ansible -m file -a "path=/tmp/test state=touch" localhost' ? on the host with py 3.11
T 1702316704 18<29akrumov18>	This is working
T 1702316794 18<19oblikoamorale18>	then doublecheck your python interpreter assumptions.   ansible -m setup -a "filter=ansible_python" target_host
T 1702316958 18<20jms118>	akrumov: i don't know either. again, i didn't know "post_tasks" existed until ten minutes ago. i haven't had time to try it. is there a way for code within the roles to dynamically add messages to an array, and then a "post_tasks" item could just print the array?
T 1702317147 18<29akrumov18>	Yes, you need to use set_fact. set_fact:
T 1702317147 18<29akrumov18>	 messages: "{{ messages + ['Your message here'] }}"
T 1702317253 18<20jms118>	so `messages` is like a "global variable" ... over time would that build `['a','b','c']` or `['a',['b',['c']]]` ?
T 1702317304 18<29akrumov18>	jms1 ['a','b','c']
T 1702317319 18<29akrumov18>	How can I mention user ?
T 1702317338 18<20jms118>	"mention user"?
T 1702317378 18<29akrumov18>	<oblikoamoral> It doesn't fail
T 1702317473 18<19oblikoamorale18>	what doesn't fail? what does setup module report as your python interpreter on target host in question?
T 1702317546 18<24sahil_18>	Hi. I was learning ansible, and was tinkering with it. 3 arch VMs and 1 debian VM. This is the playbook https://termbin.com/d7j7 .  And I got this https://termbin.com/nm9r . It says ok=8 for debian one 192.168.122.19, rest it says 1 ok. is that 8 because of 2 gather facts and 6 plays, or what. And what's that ok=1 for the other 3 VMs
T 1702317556 18<29akrumov18>	Here is the output: https://dpaste.org/jVMKv
T 1702317579 18<19oblikoamorale18>	jms1: I've been there. and honestly the idea for human to track playbook execution results is rather silly. if you still think you have to do this, look at handlers. they are run on play end
T 1702317614 18<19oblikoamorale18>	akrumov: I'm out of ideas
T 1702317615 18<24sahil_18>	And why didn't it try to run on the arch VMs again. After the first package install failure, it didn't even try.
T 1702317728 18<20jms118>	oblikomorale: is there an alternative, i.e. some way for a human to *reliably* be told that a change that ansible made, requires that they take a specific action? i.e. reboot to enable/disable selinux, restart a service that *cannot* be restarted outside of a maintenance window, that kinda thing
T 1702318073 18<19oblikoamorale18>	handlers. make handlers to do a debug: msg: whatever message you need.  notify handler on needed task(s).  as a free bonus messages will be host specific without the need of additional processing that set_fact method will require
T 1702318306 18<29akrumov18>	oblikoamorale ty for the help mate :)
T 1702320832 18<28mackerman18>	jms1: Or, schedule the thing to happen in the future,  in cron or whatever.
T 1702320856 18<28mackerman18>	I'm suspicious of disable selinux in particular, that's not a thing I would ever to on Red Hat boxes.
T 1702320864 18<28mackerman18>	* do to Red Hat boxes
T 1702321004 18<20jms118>	the current puppet code base is handling everything from centos 5 forward ... ansible is going to be RHEL 9 and later, so i'm pushing to make selinux non-configurable, or at least only enforcing/permissive but never disabled ... until that happens i still have to be able to handle going to/from disabled (and after that i'll still need to handle "from" disabled, in which case a reboot is still needed)
T 1702321085 18<20jms118>	plus there are some other changes that normally require service restarts, but we're not allowed to restart certain services outside of a maintenance window, so instead we just print a message saying "service xyz needs to be restarted" so the production guys are at least *aware* of it
T 1702321157 18<28mackerman18>	sahil_: Default behavior is for failed tasks to stop that host from executing any further tasks.
T 1702321215 18<28mackerman18>	sahil_: If there are host specific differences, say different distro's package manager, you need some way for hosts to know which one to run
T 1702321316 18<28mackerman18>	ansible-doc package #  for package manager specifically, there is a module which tries to be smart and run the pacakage manager detected on the host
T 1702321348 18<28mackerman18>	Although that won't translate  package names and other differences
T 1702321385 18<28mackerman18>	You also can make more targeted groups than  "all",   if your inventory has distro specific groups for example.
T 1702321402 18<24sahil_18>	mackerman: Yes groups in the inventory file.
T 1702321463 18<28mackerman18>	ansible-doc -t inventory constructed  # also possible to dynamically add groups, like from facts.  There's a keyed_groups example  in this constructed inventory  type that makes use of  ansible_facts.distribution  detected values
T 1702321576 18<24sahil_18>	mackerman: Thanks for confirming. I plan to finish the learnlinuxtv playlist first, then will give sometime maybe 4-5 days for documentation to fully seepin. :) It's cool though. Plan to port my dotfiles script from bash to ansible.
T 1702321621 18<28mackerman18>	Or run the script as is, with generic  script Ansible module
T 1702321773 18<24sahil_18>	mackerman: Or Make it such that Irrespective of distro, I can use them. Ansible-vault for ssh keys.Currently the script is pretty lame (logic wize) https://github.com/mesahilgautam/dotfiles/blob/main/config.sh
T 1702321788 18<24sahil_18>	And it's limited to arch only
T 1702322572 20*	Disconnected (20)
T 1702322852 19*	Now talking on 22#ansible
T 1702322852 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.1, 2.15.7, 2.14.12; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702322852 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Dec  5 20:45:00 2023)
T 1702322852 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702812797 19*	Now talking on 22#ansible
T 1702812797 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1702812797 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1702812797 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1702812828 18<19oblikoamorale18>	"| rejectattr('attribute', 'defined') "    # resulting list can be used as if not defined attribute defaultes to true
T 1702813730 18<19oblikoamorale18>	so, combined result of your requirements will be something like:  "{{ list_of_dicts | selectattr('attribute', 'defined') | selectattr('attribute') + list_of_dicts | rejectattr('attribute', 'defined') }}"   . but it's infinitely better to be explicit with definitions than jump through those hoops
T 1702814056 18<19oblikoamorale18>	alternatively you are free to implement custom filter plugin with arbitrary selection logic
T 1702814788 18<25StyXman18>	right,where should I put it?
T 1702814815 18<25StyXman18>	in my own ansible tree, I mean, so it gets picked up automatically
T 1702814897 18<25StyXman18>	this is my final task after adding the data: https://dpaste.org/vY6tz
T 1702814947 18<25StyXman18>	and I notice that implementing or is... impossible? unless I use two tasks
T 1702815715 18<19oblikoamorale18>	how does this expression not do what you want?
T 1702818645 18<25StyXman18>	oblikoamorale: it works, but force me to complete the data
T 1705506304 19*	Now talking on 22#ansible
T 1705506304 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1705506304 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1705506304 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1705524970 19*	Now talking on 22#ansible
T 1705524970 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1705524970 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1705524970 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1705525535 19*	Now talking on 22#ansible
T 1705525535 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1705525535 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1705525535 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1705525647 19*	Now talking on 22#ansible
T 1705525647 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1705525647 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1705525647 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1705525767 19*	Now talking on 22#ansible
T 1705525767 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1705525767 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1705525767 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1705526737 19*	Now talking on 22#ansible
T 1705526737 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1705526737 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1705526737 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1705559182 19*	Now talking on 22#ansible
T 1705559182 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1705559182 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1705559182 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1705559808 18<19ladeda18>	Seems like a similar issue to https://github.com/ansible/ansible/issues/77246
T 1705562767 20*	Disconnected (20)
T 1705562791 19*	Now talking on 22#ansible
T 1705562791 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1705562791 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1705562791 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1705568249 19*	Now talking on 22#ansible
T 1705568249 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.2, 2.15.8, 2.14.13; ansible 9.1.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1705568249 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Mon Dec 11 22:00:00 2023)
T 1705568249 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1705570423 18<26tty018>	Hi all! i have a task with 3 vars (config, wazuh_logging and logging) and I want to do something like this (but working ofc ;): content: '{{ config | if feature_wazuh combine(wazuh_logging, recursive=True) else combine(logging, recursive=True) | to_nice_json(indent=2) }}'
T 1705570434 18<26tty018>	do you have any suggestion?
T 1705570578 18<26tty018>	wazuh_logging is a host/group variable
T 1705571097 18<26tty018>	i was completely wrong here, give me a sec to fix the inline if-statement :)
T 1705571372 18<26tty018>	i think i got it working when i used correct syntax :D this is how it looks: content: '{{ config | combine(wazuh_logging, recursive=True) if feature_wazuh | default(False) else combine(logging, recursive=True)  | to_nice_json(indent=2) }}'
T 1705571555 18<26tty018>	no, it didn't, i still need some guidance here :/
T 1705572084 18<22jrosser18>	tty0: without seeing a specific example with actual data it is difficult, but you might try using ternary to simplify it `(feature_wazuh | default(false)) | ternary(wazuh_logging, logging)` will select between the two potential things you want to combine into `config`
T 1705572346 18<26tty018>	oh nice! i will try it out
T 1705572504 18<26tty018>	here is the task: https://dpaste.org/1bkGs
T 1705574948 18<26tty018>	is it possible to combine ansible.builtin.combine with ternary?
T 1705574956 18<26tty018>	bbl for lunch
T 1705578304 18<26tty018>	did a workaround by setting a new var (__logging) to '{{ (feature_wazuh | default(false)) | ternary(wazuh_logging, logging) }}' and use combine in the content like this: content: '{{ config | combine(__logging, recursive=True) | from_yaml |to_nice_json(indent=2) }}'
T 1705578331 18<26tty018>	the positive thing is that other than me can probably follow the thinking a bit easier
T 1707739632 19*	Now talking on 22#ansible
T 1707739632 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1707739632 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1707739632 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1707740901 18<25fdan18>	hi what would be the command to run ansible playbook which would also display the variables
T 1707742868 19*	Now talking on 22#ansible
T 1707742868 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1707742868 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1707742868 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1707748859 22*	26ChanServ gives channel operator status to 18maxamillion
T 1707748873 22*	26ChanServ gives channel operator status to 18sivel
T 1708186109 19*	Now talking on 22#ansible
T 1708186109 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708186109 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708186109 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708438062 19*	Now talking on 22#ansible
T 1708438062 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708438062 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708438062 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708439546 19*	Now talking on 22#ansible
T 1708439546 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708439546 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708439546 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708439876 19*	Now talking on 22#ansible
T 1708439876 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708439876 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708439876 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708449525 18<20eoli3n18>	is there a way to pattern "all host which contains string "01" in group "group1"" ?
T 1708449561 18<20eoli3n18>	ok with &
T 1708449573 18<20eoli3n18>	8 years of ansible, i still learn
T 1708449671 18<24bkhl18>	eoli3n: look up ansible.builtin.group_by or ansible.builtin.add_host
T 1708449678 18<20eoli3n18>	no need
T 1708449692 18<20eoli3n18>	ansible '*01*:&group1'
T 1708449694 18<20eoli3n18>	BOOM
T 1708449714 18<20eoli3n18>	but thanks anyway ;)
T 1708449742 18<24bkhl18>	eoli3n: where is the docs for that? (hard to google)
T 1708449748 18<20eoli3n18>	https://docs.ansible.com/ansible/latest/inventory_guide/intro_patterns.html
T 1708449754 18<20eoli3n18>	check "intersection of groups"
T 1708449759 18<20eoli3n18>	in the table
T 1708449764 18<20eoli3n18>	here https://docs.ansible.com/ansible/latest/inventory_guide/intro_patterns.html#common-patterns
T 1708449778 18<24bkhl18>	Thanks.
T 1708449822 18<24bkhl18>	The student becomes the master. :-)
T 1708449827 18<20eoli3n18>	:P
T 1708473217 19*	Now talking on 22#ansible
T 1708473217 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708473217 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708473217 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708507893 19*	Now talking on 22#ansible
T 1708507893 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708507893 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708507893 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708508320 19*	Now talking on 22#ansible
T 1708508320 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708508320 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708508320 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708514227 18<26FreeBDSM18>	hello, should I report this as an ansible-lint's bug that it gives me `schema[role-arg-spec]: $.argument_specs.main.options.myvar '{{ mydict.keys() | list }}' is not of type 'array'`?
T 1708515460 18<19oblikoamorale18>	we don't know, #ansible-devtools is probably a more suitable place to ask; or even raise the issue on ansible-lint github repo.   if you provide a minimal reproducer someone might want to take a look
T 1708515644 18<25StyXman18>	there wasa way to cover a failed taxk and handle the error with another task, but I can't find it in https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_error_handling.html
T 1708515755 18<25StyXman18>	s/cover/recover/
T 1708515775 18<25StyXman18>	my god, these new glasses suck :((( sorry for all the typos
T 1708516194 18<25StyXman18>	ah, blog + rescue
T 1708516198 18<25StyXman18>	block*
T 1708516207 18<25StyXman18>	I also need a new brain, seemingly...
T 1708516912 18<26newpy18>	does anyone know which module to use to configure cisco is-is?
T 1708520295 18<26geek0118>	Hi community ,
T 1708520296 18<26geek0118>	My dict is something like this :
T 1708520296 18<26geek0118>	dict_newc:
T 1708520297 18<26geek0118>	      - { type: 'log', rep_source: ["/tmp", "/images", "/app", "/var/log"]}
T 1708520297 18<28sivel18>	geek01: Please slow down, or use a pastebin if you need to paste multiple lines. If you are using matrix, please do not send multi line messages. This is an automated message.
T 1708520297 18<26geek0118>	i need to iterate over rep_source directory and copy to remote server ..
T 1708520298 18<26geek0118>	i using loop for iteration, but it doesn't work
T 1708520298 18<26geek0118>	any idea ??
T 1708520301 22*	26sivel sets ban on 18geek01!*@*
T 1708520475 18<19oblikoamorale18>	1. don't paste into channel, use public paste site of your choice   2. illustrate how it does not work (exact task definition, error messages etc)   3. dict_newc is not a dict but a list of dicts    4. you'll be unbanned in a few minutes
T 1708520597 22*	26sivel removes ban on 18geek01!*@*
T 1708520651 18<19oblikoamorale18>	uh, didn't notice they were killed as well
T 1708524788 18<29Gekk18>	Hello community
T 1708524865 18<29Gekk18>	I would like to iterate over dict
T 1708524883 18<29Gekk18>	Code is here : https://paste.centos.org/view/e6fefda2
T 1708524961 18<29Gekk18>	My needs is to iterate over rep_source to copy that directories
T 1708524989 18<29Gekk18>	I'm using loop, but it doesn't help :(
T 1708525018 18<28frippe7518>	Anyone knows if there is a way to set tags when doing import_playbook?? Similar to ansible-playbook --tags
T 1708525190 18<28frippe7518>	From import_playbook doc .... Tags are not interpreted for this action, they are applied to the imported tasks
T 1708525263 18<25StyXman18>	Gekk: you will need to show a little bit more of that code, and "doesn't help" is not very much descriptive of the outcome you're actully getting
T 1708525284 18<25StyXman18>	at least show the task and the error message
T 1708525889 18<28frippe7518>	Seems that passing/setting the tags during import_playbook kind-of-works. But I have a specific task where the target cant be reached. so fails on UNREACHABLE. But that task does not have the tag. So I was hoping for the tasks to be skipped due to tagging.
T 1708528228 18<19oblikoamorale18>	tags can be applied to tasks either statically or dynamically. but the only way to choose what tags to run is --tags argument of ansible-playbook
T 1708529567 18<26alxgomz18>	I'm getting a "playbook not found error" when trying to  call a playbook from a git hosted collection. Looks like all is setup properly but still getting this error. Details of my installation are visible there: http://pastebin.fr/136233
T 1708529764 18<19flowerysong18>	alxgomz: That's not a valid name for a playbook in a collection. All collection content has to be valid Python identifiers, so `-` is not an allowed character.
T 1708530419 19*	Now talking on 22#ansible
T 1708530419 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708530419 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708530419 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708535815 18<24mathstuf18>	hi, is there a reason why `ansible-playbook --check` seems to be trying to actually perform actions?
T 1708536431 18<24mathstuf18>	the first failing action i have is https://docs.ansible.com/ansible/latest/collections/ansible/builtin/lineinfile_module.html
T 1708536448 18<24mathstuf18>	the file doesnt exist because the package isnt installed (which seems fine given that we're in `--check`)?
T 1708536505 18<24bkhl18>	And the lineinfile task has 'create: true'?
T 1708536902 18<24mathstuf18>	nope
T 1708536941 18<24mathstuf18>	ok, that looks relevant
T 1708539041 18<19flowerysong18>	Modules that support check mode will generally still fail in cases where it can't possibly perform the action (in this case because the file doesn't exist.) To skip the task entirely in check mode. you have to add a condition.
T 1708539060 18<19flowerysong18>	https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_checkmode.html#skipping-tasks-or-ignoring-errors-in-check-mode
T 1708539099 18<19flowerysong18>	(Adding `create: true` probably isn't a good fix for this particular task, because you normally want it to fail if the file doesn't exist.)
T 1708541014 18<22SuperLag18>	If you're using the Ansible provider for Terraform, does that assume the Ansible binaries are already on the box?
T 1708541226 18<19flowerysong18>	That's really a Terraform question, but the answer's probably 'yes.'
T 1708541301 18<19flowerysong18>	Just like if you were using `community.general.terraform` it needs Terraform to already be installed wherever the module is run.
T 1708543110 18<24mathstuf18>	is there a way to add a host to additional groups through its host declaration?
T 1708543128 18<24mathstuf18>	a group being able to say "all hosts with variable x set to y" is fine too
T 1708543272 18<24mathstuf18>	ah, `ansible.builtin.add_host` looks promising
T 1708543767 18<19flowerysong18>	mathstuf: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/constructed_inventory.html
T 1708543905 18<24bkhl18>	mathstuf: also related: ansible.builtin.group_by
T 1708544281 19*	Now talking on 22#ansible
T 1708544281 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708544281 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708544281 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708546132 18<24mathstuf18>	`ERROR! 'ansible.builtin.group_by' is not a valid attribute for a Play
T 1708546140 18<24mathstuf18>	where should i use it?
T 1708546150 18<24mathstuf18>	the examples dont say where it goes in the setup
T 1708546178 18<29jborean9318>	the examples show you how it is placed in a task
T 1708546193 18<29jborean9318>	if you are putting it in a playbook file directly you need to align it to the `tasks` indentation of the play
T 1708546362 18<24mathstuf18>	i moved it to a new role's `tasks/main.yml`…same thing?
T 1708546465 18<24mathstuf18>	sorry, forgot to save the file
T 1708546470 18<29jborean9318>	if it's in the `tasks/main.yml` then that's just a list of tasks so the examples would apply as is
T 1708552693 18<25sandinak18>	off question .. has anyone come up wiht a snazzy way to aggregate all the packages needed by roles so that they can be installed in one shot w/o having to name them all discretely
T 1708553966 19*	Now talking on 22#ansible
T 1708553966 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708553966 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708553966 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708554077 19*	Now talking on 22#ansible
T 1708554077 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708554077 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708554077 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708554581 18<24mathstuf18>	is there a way to iterate over a list and update the item currently being iterated over?
T 1708554611 18<24mathstuf18>	something akin to `for i in items: if i.signal: i.consequences.append('some_item')`
T 1708555204 18<24mathstuf18>	hmm, extended: true looks promising
T 1708555215 18<24mathstuf18>	i can get the index and access the original variable that way?
T 1708555286 18<24mathstuf18>	ah, still no `items[ansible_loop.index0] = …` mechanism
T 1708555884 18<24mathstuf18>	maybe i can just store into a new top-level dictionary variable
T 1708556182 19<mathstuf>	ugh, even that is difficult as i want to do `f({a: [1]}, {b: [2]}) -> {a: [1, 2]}`
T 1708556546 18<28justsomeguy18>	Is this something you can write a plugin in python for?
T 1708556716 18<24mathstuf18>	i would hope so
T 1708556750 18<24mathstuf18>	something like an `append` and `combine` module that would look up the variable in the key and append/combine the value of it
T 1708556774 18<24mathstuf18>	so you could do something like `item.inner.arr: [new1, new2]
T 1708570222 18<26newpy18>	anyone know how to use cisco.ios.* to parse running-config into structured output? docs claim it is possible but I can't get it working
T 1708570737 18<26newpy18>	ah found it, after running ios_command "sh run" & registering to variable output, I needed to pass output.stdout[0] to the next task (state: parsed, running_config: "{{ output.stdout[0] }}"
T 1708572372 18<25fdan18>	when i try to run the playbook the playbook is stuck at gathering facts and it doesnt proceed beyond that
T 1708572398 18<25fdan18>	i ran with -vv https://dpaste.org/V8a5Z
T 1708572432 18<25fdan18>	could anyone help me here
T 1708573763 18<28Core267118>	hi guys
T 1708583117 18<25fdan18>	when we encrypt a string using ansible vault, i somehow get a new line added, how to avoid that
T 1708583364 18<19oblikoamorale18>	don't press enter, press ctrl+d twice as suggested in prompt
T 1708583402 18<19oblikoamorale18>	2.16.3 does not introduce any surplus new lines
T 1708584503 18<25fdan18>	oblikoamorale im using 2.15.2
T 1708584532 18<25fdan18>	i create a new temp file, put the password and then do `ansible-vault encrypt mytextfile`
T 1708584568 18<25fdan18>	and then i add
T 1708584568 18<25fdan18>	token: !vault
T 1708584569 18<25fdan18>	  $ANSIBLE_VAULT;1.1;AES256
T 1708584569 18<25fdan18>	  3361303830313835623...
T 1708584572 22*	26sivel sets ban on 18fdan!*@*
T 1708584870 22*	26sivel removes ban on 18fdan!*@*
T 1708585637 18<19oblikoamorale18>	erm. you were talking about encrypt_string and suddenly there is encrypt file. so what is it
T 1708585810 18<25fdan18>	i never knew there was a comman to encrypt_string
T 1708585884 18<25fdan18>	oblikoamorale can you please tell me the command?
T 1708585911 18<25fdan18>	is it something like this ansible-vault encrypt_string 'mypassword!'
T 1708586072 18<19oblikoamorale18>	ansible-vault encrypt_string --help
T 1708586152 18<25fdan18>	nice
T 1708595352 18<26alien_lappy18>	i want to limit to one host, but i have an inventory directory(which contains a hosts.yaml file); so i tried 'ansible-playbook -i inventory -l "server1," some-playbook.yaml' but that doesn't find the server1
T 1708595571 18<22plundra18>	alien_lappy: Don't use ,? :)
T 1708596221 18<25endre18>	yeah
T 1708599622 18<26alien_lappy18>	"Could not match supplied host pattern" it also didn't work
T 1708599817 18<26alien_lappy18>	the hosts.yaml file has like: "groupA:", "hosts:", "host1:", "ansible_host: ip.ad.re.ss" , which should be the correct way, i think?
T 1708599834 18<26alien_lappy18>	but i can't match host1 with the --limit thing
T 1708600159 18<25endre18>	what does the command `ansible-inventory --host host1` return?
T 1708600341 18<26alien_lappy18>	'ansible-inventory -i inventory2 --host "host1" ' does return a dict with the ansible_host ip address
T 1708600411 18<26alien_lappy18>	but ' ansible-playbook -i inventory2 "host1" playbook-foo.yaml ' does not match a host
T 1708600425 18<26alien_lappy18>	but ' ansible-playbook -i inventory2 -l "host1" playbook-foo.yaml ' does not match a host
T 1708600429 18<26alien_lappy18>	sorry, forgot the limit
T 1708600470 18<28legreffier18>	is your playbook correctly referencing a group or host in inventory2 ?
T 1708600494 18<28legreffier18>	use pastebin.com if you need to share code/logs
T 1708600616 18<26alien_lappy18>	ic
T 1708600653 18<26alien_lappy18>	yeah, sorry, i had a hosts none in the playbook for some reason
T 1708606547 19*	Now talking on 22#ansible
T 1708606547 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708606547 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708606547 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708606631 19*	Now talking on 22#ansible
T 1708606631 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708606631 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708606632 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708606965 18<19justin0018>	#c
T 1708607178 18<25sandinak18>	like .. it'd be cool if there was a directory structure under roles that was aggregated automagically.. I might write an inventory plugin for this.  Would be really useful for things like packages, firewall rules, etc.
T 1708607223 18<25sandinak18>	where we could assemble all the entries and then use them once vs at role time
T 1708607775 18<22jrosser18>	sandinak: does this help at all https://docs.ansible.com/ansible/latest/collections/community/general/merge_variables_lookup.html
T 1708607825 18<22jrosser18>	i understand you ask about vars in roles though, so thats maybe not quite the same thing
T 1708607932 18<19oblikoamorale18>	here we go again. https://witchychant.com/ansible-cumulative-inventory-variables/
T 1708608313 18<24mathstuf18>	oblikoamorale: ooh, thanks! thats what ive been looking for
T 1708614949 18<24_NiC18>	Anyone know why ansible wants to re-add an existing child in my xml? https://pastebin.com/aPjELgtw Am I using the module wrong?
T 1708615230 18<24petn-randall18>	_NiC: Check the examples in `ansible-doc xml`, I think you want something like "name: Set the rating to '11'"
T 1708615355 18<24_NiC18>	Wouldn't that make a <policy>11</policy>?
T 1708615384 18<24petn-randall18>	_NiC: I think you need to use path/xpath/value instead of add_children.
T 1708615389 18<24_NiC18>	all the things I want to add are attributes to the policy tag, not values in/of it
T 1708615400 18<24_NiC18>	hm
T 1708615453 18<24petn-randall18>	_NiC: Your intention is to add it when it doesn't exist, and when it already exists, leave it (and not duplicate it), right?
T 1708615466 18<24_NiC18>	yes
T 1708615587 18<28legreffier18>	_NiC: lookup "- name: Add or modify an attribute, add element if needed" in https://docs.ansible.com/ansible/latest/collections/community/general/xml_module.html
T 1708615605 18<28legreffier18>	you explicitly tells it to add_children. it obeys.
T 1708615645 18<24_NiC18>	but neither attribute: nor value: takes lists as arguments, so it seems I can only add one at a time
T 1708615673 18<24_NiC18>	and since this xml file can have several <policy /> tags with different attributes and values, I can't really add one by one..
T 1708615762 18<24_NiC18>	for example if I have a task with xpath: /policymap/policy, attribute: domain, value: resource, ansible writes a line like this: <policy xmlns="" domain="resource" rights="none"/>
T 1708615778 18<24_NiC18>	(I believe the extra attributes are due to the !ATTLIST at the top of the xml file.)
T 1708616456 18<24_NiC18>	I can use set_children, and list everything I want in there, that seems to work.
T 1708616538 18<24_NiC18>	I'm not sure I understand/like the fact that xmlns="" is added whether I have it in my task or not, but I guess that's just down to how lxml parses the xml file.
T 1708616611 18<24_NiC18>	It also removes all "children" in <policymap>, which includes everything including comments, which is a little odd, maybe.
T 1708618201 18<26StucKman18>	where can I find the list of colors? I'm not sure how to spell gray and dark yellow does not seem to exist
T 1708623317 19*	Now talking on 22#ansible
T 1708623317 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708623317 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708623317 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708630546 19*	Now talking on 22#ansible
T 1708630546 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708630546 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708630546 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708631263 19*	Now talking on 22#ansible
T 1708631263 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708631263 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708631263 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708631930 19*	Now talking on 22#ansible
T 1708631930 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708631930 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708631930 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708632783 19*	Now talking on 22#ansible
T 1708632783 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708632783 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708632783 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708632966 19*	Now talking on 22#ansible
T 1708632966 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708632966 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708632966 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708646803 18<26newpy18>	I'm using `include_task: subtasks.yaml; debug: msg="{{ subtask_var }}"`
T 1708646838 18<26newpy18>	if subtask_var is a registered variable, I can access it from the parent
T 1708646870 18<26newpy18>	but if it's just in `vars: ` section of the task, I can't
T 1708646895 18<26newpy18>	should I just set_fact instead or is there a better way?
T 1708679094 18<24pva18>	Hi, guys. Some time ago templating was disabled in ansible_managed variable. Now, there is a bug https://github.com/ansible/ansible/issues/82322 to get that back. @bcoca told there that this poses some security issue, yet I don't understand what security issue he is talking about. Could you help me to understand, how an attacker may use ansble_manage to hack anything?
T 1708679398 18<24pva18>	I'd like some solution for the problem but atm I don't see any way how to hack that system and dev keeps silence there. Also, workaround exists, but ... first I'd like to understand what security implications it has and why.
T 1708679493 18<24pva18>	BTW, if you don't understand that problem as I do, please, ask developer in ticket) May be then he'll explain the problem better.
T 1708682230 18<19oblikoamorale18>	they probably dislike the possibility of malicious jinja experession injection sourced by ansible.cfg into all templates referencing ansible_managed. if you are after bcoca, they don't hang out here lately
T 1708682393 18<19oblikoamorale18>	raise the issue on mailing list, or ansible forum, I guess, if you are so inclined to push this thing forward
T 1708682441 18<19oblikoamorale18>	just remember that people rarely like crossposters :p
T 1708685871 18<24pva18>	oblikoamorale: thanks! But do you understand why injection in ansible.cfg is considered to be a security issue? It looks expected for me, like changing files in /etc/ may ruin OS...
T 1708685898 18<24Shadur18>	Possibly an odd question, but is it possible in an ansible role's meta or elsewhere to specify that it *needs* certain variables to exist and exit immediately with a reasonable error?
T 1708685966 18<19oblikoamorale18>	pva: that's just my guess, I'm not saying it was the exact original reasoning
T 1708685986 18<24Shadur18>	Hm, assert might do what I want.
T 1708685998 18<19double-p18>	assert... yeha
T 1708686032 18<19oblikoamorale18>	that's what role argspec is for
T 1708686046 18<24pva18>	oblikoamorale: I see. If nobody answers here I'll try mailing list... But at least it's not something evident I overlook.
T 1708688629 18<24Shadur18>	Argspec is exactly what I needed, thank you.
T 1708688661 18<24Shadur18>	Another question: In a jinja2 template, is it possible to set a conditional along the lines of "If more than one of the following variables are defined" ?
T 1708688912 18<19oblikoamorale18>	{% if [var1,var2,var3] | reject('undefined') | length > 1 %}...{% endif %}
T 1708696020 19*	Now talking on 22#ansible
T 1708696020 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708696020 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708696020 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708696321 19*	Now talking on 22#ansible
T 1708696321 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708696321 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708696321 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708696866 18<19Unixl0ver18>	 /msg alis list * -min 25
T 1708702692 18<28tuxick18>	"funny" how many threads you find on "Don't compare to empty string "
T 1708702746 18<28tuxick18>	https://github.com/ansible/ansible-lint/issues/457
T 1708702790 18<28tuxick18>	expecting "Closed: inconclusive"
T 1708703087 18<28tuxick18>	ah, it has been decided
T 1708703372 18<22SuperLag18>	If I'm cloning a repo with an ansible.cfg that says inventory=/file/in/repo/hosts, but I want force a particular playbook to only ever run on localhost, can I do that? and how?
T 1708703470 18<22SuperLag18>	I'm using terraform w/cloud-init. In the cloud-init config, I'm saying to clone a repo, and run a playbook in that repo.
T 1708703500 18<22SuperLag18>	with ansible-pull
T 1708705680 18<19flowerysong18>	...use `hosts: localhost` in the playbook?
T 1708706935 18<22SuperLag18>	tried that, didn't seem to work
T 1708706943 18<22SuperLag18>	that was my first thought, as well
T 1708709560 18<19flowerysong18>	It will work. That playbook then can't possibly run on anything other than localhost.
T 1708709597 18<20rvgate18>	feels like this has been asked a million times, and couldnt find a "simple" loop-in-loop setup without creating new wrapper roles to do the following: https://pastebin.com/YsQ5Jgkq , i could solve it with a template and generate the resulting config.json, but that feels more like a workaround then a proper way to do it.
T 1708709705 18<19flowerysong18>	If you mean "it doesn't work" as in it doesn't run at all, that's possible, but is probably down to how you're calling ansible-pull.
T 1708709795 18<19flowerysong18>	rvgate: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/subelements_filter.html
T 1708709845 18<19flowerysong18>	`loop: "{{ users | subelements('docker_registries') }}"`, or something similar.
T 1708709864 18<20rvgate18>	flowerysong, thanks! ill have a look, didnt know that existed :)
T 1708711178 18<20rvgate18>	flowerysong, made it work using: https://pastebin.com/0mvRgWf2 thanks again!
T 1708712857 18<19flowerysong18>	I really, really hate `with_`-style loops. There's a reason I recommended the specific thing I did.
T 1708712943 18<19flowerysong18>	This is a data transformation, you should be doing it with a filter, not a magic invocation of a lookup.
T 1708713635 18<20rvgate18>	flowerysong, is there a functional difference with using with_subelements and the filter subelements? it feels like its producing the same output, at this point its more of a personal preference it seems
T 1708714253 18<19flowerysong18>	The functional difference is that one teaches you how to use Jinja and can easily be used in other situations, and one is a black box where you don't understand what's happening and can't adapt it further without figuring out the internal logic.
T 1708720189 19*	Now talking on 22#ansible
T 1708720189 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708720189 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708720189 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708725151 18<29awb18>	How can I append to a list that may not exist? I tried `- "{{ list | default(omit) }}`, but that didn't work. Any suggestions?
T 1708725528 18<22jrosser18>	awb: omit should really only be used on module parameters, try using default([]) instead to end up with an empty list when it's undefined
T 1708725882 18<29awb18>	jrosser: Let me give that a try...
T 1708726062 18<29awb18>	Still doesn't work. :/ "An unhandled exception occurred while templating"
T 1708726082 18<29awb18>	I'll try to isolate this into a simple test case.
T 1708726298 18<25kikinovak18>	Hi. I tried to subscribe to the Ansible Mailing List with my (non-Gmail) e-mail address. Sent the subscription request, got the confirmation mail, replied to that, got a mail that said I was subscribed. And now messages are still being sent to my Gmail address (which I don't want to use). How comes Google hijacks this?
T 1708726358 18<25kikinovak18>	On a side note: I wonder why one of the most widespread free software components doesn't use a real mailing list like mailman and relies to Google for that.
T 1708726462 18<29awb18>	jrosser: The simple test case works, which suggests something else is wrong. Thanks for the pointer!
T 1708726514 18<22jrosser18>	awb: no problem - here is some info about what omit is intended for https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_filters.html#making-variables-optional
T 1708726641 18<29awb18>	I had used default('') and default([]) before, but was grasping at straws because none worked. Now it seems like I was looking in the wrong place :D
T 1708735883 18<27MockingMoniker18>	Can I dynamically include plays in a loop? Can I dynamically include plays at all?
T 1708735958 18<27MockingMoniker18>	By that I mean at the play level, not on the individual steps like include_roles or include_tasks.
T 1708772561 19*	Now talking on 22#ansible
T 1708772561 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708772561 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708772561 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708788546 19*	Now talking on 22#ansible
T 1708788546 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708788546 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708788546 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708788723 19*	Now talking on 22#ansible
T 1708788723 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708788723 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708788723 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708792087 19*	Now talking on 22#ansible
T 1708792087 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708792087 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708792088 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708823390 19*	Now talking on 22#ansible
T 1708823390 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708823390 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708823390 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1708882893 19*	Now talking on 22#ansible
T 1708882893 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.3, 2.15.9, 2.14.14; ansible 9.2.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1708882893 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Jan 30 18:00:00 2024)
T 1708882893 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709072158 19*	Now talking on 22#ansible
T 1709072158 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709072158 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709072158 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709073429 18<19flowerysong18>	YAML doesn't allow tabs at all.
T 1709073488 18<25nerdette18>	true
T 1709073538 22*	26ChanServ gives channel operator status to 18shertel
T 1709073696 18<29awb18>	Looking for some help with run_once and role handlers. I have a role that writes a file on the controller and I do this with a handler. I do a flush_handlers right after notify from another role's tasks. What I see now is that the first target in a group stops processing the rest of the tasks until every other target is done. Any idea what might be going on there?
T 1709074179 18<25nerdette18>	did you set -vvv and have a look?
T 1709074227 18<25nerdette18>	I remember there was also an option to save the generated python scripts on the target
T 1709074245 18<29awb18>	Yes and it wasn't super helpful. I just reduced my plays to a simple test case and will run it again real quick...
T 1709074246 18<19flowerysong18>	Sounds like a bug. What version of ansible-core are you using? (Also, because it needs to be ruled out: are you using Mitogen?)
T 1709074378 18<29awb18>	2.16.3 and I don't know what Mitogen is :D
T 1709075266 18<19flowerysong18>	I can't reproduce your result with the information you've provided, so the issue probably lies somewhere in the details that you haven't provided.
T 1709075833 18<29awb18>	I think I might have found something. I am looking at the -vvv output and following along the handler's tasks, it suddenly jumps back to the invoking task list. Let me see if I can describe it...
T 1709076078 18<29awb18>	I see all these RUNNING HANDLER lines and they are all correct. It gets to a waitfor, which it correctly skips. The next task is a pause, which should also be skipped but instead it executes the next task after I did the handler flush. Meaning, it "jumps back" to the calling role. I see a TASK with the /wrong/ task description (the previous one from the handler) but the correct filename and execution.
T 1709076103 18<29awb18>	Could this be caused by using a pause with a prompt in a handler?
T 1709076194 18<29awb18>	It also only executes that next task for targets that are not the first one, the one it correctly used for the run_once.
T 1709076393 18<29awb18>	I should probably also add that this all worked just fine previously when it was not a role, but import_tasks. To answer the obvious question of "what changed?" :D
T 1709076502 18<25nerdette18>	btw., I believe I found my issue: old syntax. Correct I believe is:  loop: "{{ (files.files | sort(attribute='mtime'))[:-2] }}" ... testing it
T 1709077191 18<25nerdette18>	... just removed a few thousand backup files, looks good :-)
T 1709077252 18<29awb18>	Nice job, nerdette!
T 1709077333 18<29awb18>	OK, so my problem is getting a bit more weird. The task in the handler that is mislabeled (i.e., it "jumps back") is always the fourth one. The target group is five hosts, four of which show up in that task.
T 1709077364 18<29awb18>	I am going to change it all to debug tasks to eliminate any conditionals interfering.
T 1709082580 19*	Now talking on 22#ansible
T 1709082580 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709082580 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709082580 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709083095 18<29vbotka18>	awb, if you want to wait for a file use the module *wait_for*.
T 1709083249 18<29awb18>	I use that pretty commonly and it's a good idea. I just think it is more hassle that it is worth in this case. I just move the handler code into tasks/main.yml and do an import_role instead. Works.
T 1709164962 19*	Now talking on 22#ansible
T 1709164962 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709164962 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709164962 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709165582 20*	Disconnected (20)
T 1709165736 19*	Now talking on 22#ansible
T 1709165736 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709165736 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709165736 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709176164 18<26newpy18>	I'm have a list of items, and each item has a "name" attribute and another attribute which is also a list of items
T 1709176226 18<26newpy18>	I'm trying to check each item and if name is "X" then check the second attribute and grab an attribute from each item in that sub-list
T 1709176312 18<26newpy18>	would it be something like my_list | selectattr('name','eq','X') | map(attribute='mylist.otherattr.field')
T 1709176313 18<26newpy18>	?
T 1709177159 18<26newpy18>	hmm, thought for sure this would do it but no dice:  my_list | selectattr('name','eq','X') | map(attribute='otherattr') | selectattr('field')
T 1709177276 18<26newpy18>	oh, I had a typo
T 1709177277 18<26newpy18>	doh
T 1709177906 18<26newpy18>	hmm, still stuck here: paste.ee/p/GVt0f
T 1709178174 18<26newpy18>	added a flatten filter between the two maps, seems to have worked
T 1709178189 18<26newpy18>	(commented the last map to see what the previous output was, noticed it was a list of lists)
T 1709184057 18<29vbotka18>	newpy, fix the name of the filter *selectattr* and *flatten* the list before mapping *neighbor_address*
T 1709200203 18<29nomicon18>	Throwing it out here if somebody knows:
T 1709200204 18<29nomicon18>	https://github.com/freeipa/ansible-freeipa/issues/1214
T 1709205702 18<24Shadur18>	Is it permissible to set a conditional on a handler?
T 1709205777 18<24Shadur18>	Context: I'm setting up a role to install keepalived because I'm planning to switch to it from corosync, and during the role it calls the 'Restart keepalived' handler if the config file changes... But I do *not* want to start or restart keepalived if I've set the host var 'do_not_start_keepalived_yet' to true.
T 1709205853 18<24Shadur18>	(BEcause it turns out that if you have a cluster running with corosync, and you install and configure keepalived on one of its nodes, and keepalived is restarted, they get into an argument about who is in charge of things and Bad Stuff Happens. Given that stuff you install corosync or keepalived on tends to have HA requirements, this is not something you want to see in a production environment)
T 1709205957 18<19oblikoamorale18>	so many words... what have you tried and how it didn't work?  handler is just a task and, when keyword is applicable there as in any other tasks
T 1709206217 18<24Shadur18>	Looks like that works.
T 1709208259 18<25fireba1118>	hm ... i'm looking for suggestions what to use for firewall rules that is nice to mange with ansible. directly use iptables? use ufw? i want roles to add their own rules and obviously avoid having a rules file per host that just gets copied over .. :-P
T 1709208700 18<22FooBar18>	I template nft's config-file based on a generic base + per role / per host / per group additional rules
T 1709208724 18<22FooBar18>	https://github.com/sigio/ansible-role-nft
T 1709208749 18<22FooBar18>	(though somewhat outdated, not what I actually use these days, but to give an idea)
T 1709210115 18<20Led_Zeppelin218>	i need to keep doing --extra-vars="ansible_become_pass='{{ lookup('env','ANSIBLE_BECOME_PASS') }}'". Is there a way I can encapsulate this?
T 1709211722 18<19oblikoamorale18>	encapsulate how? you'd need to expand a bit
T 1709212532 20*	Disconnected (20)
T 1709212551 19*	Now talking on 22#ansible
T 1709212551 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709212551 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709212551 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709213351 18<27satmd18>	do you happen to set ansible_become_pass / become_pass anywhere else?
T 1709213371 18<27satmd18>	using --extra-vars usually is only needed when overwriting a variable that's set somewhere in the written code
T 1709213389 18<27satmd18>	and I think that if that's the case, it'd be better to change that place
T 1709213993 19*	Now talking on 22#ansible
T 1709213993 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709213993 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709213993 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709216163 19*	Now talking on 22#ansible
T 1709216163 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709216163 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709216163 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709228143 18<29oliva18>	hi all can you please tell me why a quoted string in parentheses evaluate to true when tested as conditional?
T 1709228374 18<26newpy18>	hi, question on inventories:
T 1709228396 18<26newpy18>	Most of the inventories I see are of the format <group>: <host>: ...
T 1709228435 18<26newpy18>	I saw one using host are the parent with a groups attribute defining which groups it belonged to
T 1709228458 18<26newpy18>	was that for an older version of ansible or are both still valid?
T 1709228846 18<19oblikoamorale18>	oliva: non empty string is always truthy. what are your expectations?
T 1709229247 18<19oblikoamorale18>	newpy: not clear what your question is. out of the box ansible supports inventories in either yaml or ini formats, and their structure hasn't been changed in like... forever?
T 1709229536 18<26newpy18>	oblikoamorale, you mean like this? https://docs.ansible.com/ansible/latest/inventory_guide/intro_inventory.html#hosts-in-multiple-groups
T 1709229573 18<26newpy18>	I guess my issue is that I've defined host vars in the inventory file when I should have put it in hostvars/
T 1709229633 18<26newpy18>	actually it's trickier since I create my inventory dynamically
T 1709229657 18<26newpy18>	not sure if/how I can do that for host_vars as well
T 1709229697 18<26newpy18>	my hope was to just keep my inventory as <hostname>: <vars>... and add a "groups" list attribute with the groups the host belongs to
T 1709229761 18<26newpy18>	oh docs say it merges the data from the groups so I guess if entry has nested vars they'll be combined
T 1709229769 18<26newpy18>	*any entry
T 1709231018 18<29oliva18>	oblikoamorale: I tought so but why only inside parentheses?
T 1709231174 18<19oblikoamorale18>	when: ("string")   and when: '"string"'   are both truthy. 2nd case must be doublequoted otherwise it's parsed as when: string.  round brackets serve the same purpose
T 1709231359 18<29oliva18>	oblikoamorale: thank you very much for your kind explaination
T 1709231760 18<24jrglynn218>	newpy: I use dynamic inventory and assign groups in my inventory file, then can use `group_vars` directory structure to assign variables/etc. is that what you are asking? https://docs.ansible.com/ansible/latest/inventory_guide/intro_inventory.html#organizing-host-and-group-variables
T 1709234145 18<26newpy18>	jrglynn2, yea it's tricky b/c I dispatch the actual play to ansible_runner on a container outside of my control
T 1709234168 18<26newpy18>	I should be able to drop files into /etc/ansible hopefully, let me see
T 1709234214 18<26newpy18>	jrglynn2, I was hoping I could just assign group vars, group assignments, etc, all in the dynamic inventory
T 1709234243 18<26newpy18>	but maybe this is really slow too now that I think about it, a lot of this data will be somewhat static
T 1709235081 18<24jrglynn218>	i have never tried to assign variables in the group definition, never had the need. So i don't knwo if it would work - but here is an exerpt of my `keyed_groups` that gets created - I added the `vars` piece. If it was going to work, it would be that type of format ... this is YAML  ==> https://pastebin.com/XGJz8fW3
T 1709254781 19*	Now talking on 22#ansible
T 1709254781 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709254781 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709254781 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709280509 18<19double-p18>	offtopic shameless plug - we just opened CfP for EuroBSDcon :)
T 1709289967 18<25fdan18>	what is test kitchen?
T 1709289991 18<25fdan18>	i know its a testing framework
T 1709289995 18<25fdan18>	how do i use it with ansible
T 1709290033 18<25fdan18>	what does bundle install and bundle exec kitchen test -l debug does?
T 1709298076 19*	Now talking on 22#ansible
T 1709298076 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709298076 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709298076 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709305277 19*	Now talking on 22#ansible
T 1709305277 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709305277 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709305277 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709312939 19*	Now talking on 22#ansible
T 1709312939 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709312939 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709312939 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709316253 19*	Now talking on 22#ansible
T 1709316253 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709316253 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709316253 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709345126 19*	Now talking on 22#ansible
T 1709345126 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709345126 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709345126 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709356535 19*	Now talking on 22#ansible
T 1709356535 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709356535 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709356535 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709356629 19*	Now talking on 22#ansible
T 1709356629 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709356629 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709356629 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709402548 19*	Now talking on 22#ansible
T 1709402548 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709402548 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709402548 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709451377 19*	Now talking on 22#ansible
T 1709451377 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709451377 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709451377 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709473899 18<19ljkimz18>	Is it expected that using `required_if` in a custom module argument spec makes the parameters that are tested implicitly required? I have a simple module with a parameter `enabled` which is not required for all uses of the module. However, we do want to specify that a few other parameters are required WHEN `enabled` is used.
T 1709473900 18<19ljkimz18>	https://pastebin.com/NPUbm6Gd
T 1709473964 18<19ljkimz18>	But when we use `required_if` to specify the parameters required with `enabled` then the module execution fails unless we provide `enabled ` at all times: `Exception calling “Create” with “2” argument(s): “Object reference not set to an instance of an object.”` If it's not clear this is specifically a Windows module.
T 1709476402 18<19oblikoamorale18>	while i don't have input for argspec subject, aren't you missing single quote in line 6
T 1709478136 18<19ljkimz18>	oblikoamorale yes. But that's not the problem. I actually transcribed that code from a disconnected environment. In the source it's fine I just messed up on the paste
T 1709478149 18<19ljkimz18>	But thanks for at least looking
T 1709523463 19*	Now talking on 22#ansible
T 1709523463 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709523463 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709523463 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709523580 19*	Now talking on 22#ansible
T 1709523580 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709523580 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709523581 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709563245 18<20macado18>	Does AWX have it's own specific channel?  I was going to open a bug report but need some help investigating an issue we are having with long running Ansible jobs that just seem to crash/die in middle of job.     Running AWX 23.8.0 using AWX operator (awx-operator.v2.12.0) on Red Hat Openshift.   From what I can tell the awx-prod-task pod
T 1709563246 18<20macado18>	keeps restarting (although may that is normal, sorry sort of new to AWX).  I dont recall having this issue a month ago so i'm not sure if it's an issue with a recently upgraded version from the operator. It's happening in both my lab and prod AWX environments.
T 1709563246 18<20macado18>	I am seeing this this in awx-prod-task logs in openshift but I am not sure if this is the issue. https://pastebin.com/JGDfxQXQ
T 1709563373 18<19oblikoamorale18>	we deal with ansible cli here mostly, try #ansible-awx
T 1709563473 18<20macado18>	oblikoamorale thanks!
T 1709564121 18<19doubletwist18>	If a playbook uses 'tasks_from' when importing a role - will it still be able to use and handlers defined in that role?
T 1709564130 18<19doubletwist18>	any handlers
T 1709564214 18<19double-p18>	wouldnt count on that
T 1709564508 18<19oblikoamorale18>	so... let's be more specific. in a playbook there is a play, with a task in tasks section, referencing import_role having tasks_from param. why wouldn't it process role handlers? it will, from handlers/main.yml. what happens if you try it?
T 1709565566 18<19doubletwist18>	Apparently it does work. Although now I'm trying to figure out why it's calling the handler even when the notifying tasks has no changes
T 1709565859 18<19double-p18>	gpg keyring import... every time. aargh.
T 1709565968 18<19oblikoamorale18>	doubletwist: provide a minimal reproducer so we can take a look. although I very much doubt handlers are invoked without notifications
T 1709566429 18<19doubletwist18>	https://paste.debian.net/1309424/
T 1709566867 18<19oblikoamorale18>	according to task name, the handler "Reboot after patch" is not executed. some task named "myrole : Reboot systems after successful patching.." runs instead
T 1709566990 18<19doubletwist18>	lol
T 1709566992 18<19doubletwist18>	oops
T 1709567022 18<19doubletwist18>	yup, that'd do it.
T 1709567023 18<19doubletwist18>	Thank you
T 1709570760 18<24test_18>	hi, i have something like "MY_VAR: [1,2,3]" in group_vars; for a specific host, the list shall be appened like "MY_VAR: {{ MY_VAR + [4,5] }}" - but that leads to a recursion error - how would I do that correctly?
T 1709577458 18<24jrglynn218>	test_: have you tried `.append`? {{ MY_VAR.append(4) }}? see https://stackoverflow.com/questions/49619445/how-to-append-to-a-list-in-jinja2-for-ansible
T 1709577598 18<19oblikoamorale18>	nah, what they likely are looking for is some variation of https://witchychant.com/ansible-cumulative-inventory-variables/
T 1709578603 18<29miira18>	Hello all, can someone help me? I am trying to find a variable inside another variable inside a conditon "when: item is search(vol_type)" where item is a list with key and value and vol_type is a variable that has a result that changes and is not fixed. How can I acheive this?
T 1709580806 18<26newpy18>	has anyone gotten cisco.ios.ios_l3_interfaces module state: deleted to work?
T 1709620790 19*	Now talking on 22#ansible
T 1709620790 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709620790 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709620790 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709625273 18<22Haxxa18>	Hi, is there anyway to send AT commands using Ansible. I have 50 devices to setup that require AT commands over serial. Iwas using minicom but its getting very very tedious
T 1709625770 18<25fdan18>	anyone familiar with test kitchen?
T 1709626220 18<19double-p18>	Haxxa: maybe https://github.com/k0ste/ansible-role-netctl (see the ppp connection)
T 1709626397 18<22Haxxa18>	Yeah tried that earlier, ideally I could just pipe AT commands:
T 1709626398 18<22Haxxa18>	AT+QCFG="usbnet",1    AT+CGDCONT=1,"IP","super"   AT+CFUN=1,1
T 1709628506 18<25fdan18>	any one can help me with test kitchen?
T 1709628598 18<19oblikoamorale18>	no, ask their support
T 1709628639 18<25fdan18>	ok ill look in google, but do they even have their support?
T 1709628901 18<25fdan18>	oblikoamorale https://dpaste.org/oqaUr
T 1709628926 18<25fdan18>	file structure: https://dpaste.org/7Svj0
T 1709628964 18<25fdan18>	could you help me whats wrong and why i get this error
T 1709629637 18<27colo18>	Haxxa: well, doing serial communication is finnicky business. but minicom, picocom et al. should be fine to use - I have a hard time imagining how a dedicated ansible module should vastly improve your current experience ;) maybe you are holding it slightly wrong? what is the actual problem?
T 1709629699 18<22Haxxa18>	colo, I am setting up QC25 modems on 50 embedded linux boxes and don't want to manually ssh into every box and send the AT commands
T 1709629726 18<27colo18>	so... use the `script` module?
T 1709629784 18<27colo18>	just because you use ansible doesn't mean that EVERYTHING you do in your play/role has to be done using its clumsy DSL and "native
T 1709629786 18<27colo18>	" modules
T 1709629831 18<19double-p18>	some of those router dialin modules, too? fortios/fortinet and such
T 1709629910 18<22Haxxa18>	I only started using ansible today, I had a problem and it solved it. i.e. mass configuring devices in a repeatable way. I don't really know whats best way to handle finiky modems
T 1709629987 18<27colo18>	Haxxa: I see :) well, I would write a shellscript for the target device that sets the modem up in the expected way once, then use an inventory of all remote hosts and a task using that script via the ansible `script` module to mass-deploy/execute it. job done.
T 1709630003 18<27colo18>	(the script would use minicom, if you have that on each remote host)
T 1709630097 18<22Haxxa18>	So I have been using minicom interactively thus far. How do I use minicom with a script and make it wait for AT: OK for example, where commands can take 10 seconds to reply
T 1709630212 18<27colo18>	you can try automating minicom (using expect, for example), or use another tool for serial comms that is more friendly towards non-interactive use. maybe check out https://linux.die.net/man/1/runscript first.
T 1709630297 18<22Haxxa18>	Thanks
T 1709633357 18<19oblikoamorale18>	fdan: we wouldn't know. the error suggests the role is not in configured role search path
T 1709646406 18<25fdan18>	still unable to solve this problem: https://dpaste.org/oqaUr
T 1709646407 18<25fdan18>	file structure: https://dpaste.org/7Svj0
T 1709646407 18<25fdan18>	can anyone me on how to fix this
T 1709646651 18<28legreffier18>	fdan: ansible-playbook will automatically look up and find role, you don't want to specify neither a path or a key here , just list your roles as "- role_name" under the "roles:" key.
T 1709646696 18<19flowerysong18>	The key is fine, it's an alternate syntax for when you need to associate additional things with it (like tags.)
T 1709646718 18<25fdan18>	legreffier you mean to say  this is not needed   requirements_collection_path: roles/requirements.yml ?
T 1709646718 18<19flowerysong18>	But `roles/` should never need to be part of your role name.
T 1709646764 18<25fdan18>	flowerysong which line number exactly?
T 1709646795 18<19flowerysong18>	The error appears to be in '/tmp/kitchen/playbook.yml': line 18, column 7, but may
T 1709646882 18<28legreffier18>	i was only talking about the first dpaste link.
T 1709646901 18<25fdan18>	flowerysong i have something like this https://dpaste.org/hkPHX
T 1709646994 18<28legreffier18>	this is how your playbook should look : https://dpaste.org/jYSQ6
T 1709647070 18<25fdan18>	legreffier but i dont see anything wrong with my approach
T 1709647098 18<25fdan18>	why do you think my approach is wrong
T 1709647133 18<28legreffier18>	ok. have a nice day. lol. *plonk*
T 1709647164 18<19flowerysong18>	fdan: That's not the version of the playbook that error is from, because it does not contain the line in the error.
T 1709647273 18<19flowerysong18>	And `role: .` is an incredibly terrible idea.
T 1709647295 18<25fdan18>	what does role: . means?
T 1709647440 18<19flowerysong18>	The line in your playbook.
T 1709647487 18<25fdan18>	yes what does it mean.
T 1709647497 18<25fdan18>	because i didnt wrote those parts in it
T 1709647552 18<19flowerysong18>	I'm not sure how it would actually behave, because roles are supposed to have names, not point to magic directory entries like '.' (which is the current directory, while '..' is the parent directory.)
T 1709647728 18<25fdan18>	hmm
T 1709647877 18<19flowerysong18>	Theoretically I think it would load the first path in your roles search path as a role, which should end up as an empty role because those paths are supposed to be to containing directories. But you could misconfigure things so it actually loads a role, probably.
T 1709648109 18<25fdan18>	flowerysong: this is what it still points to https://dpaste.org/hkPHX
T 1709648114 18<25fdan18>	i still see the same error https://dpaste.org/hkPHX
T 1709648121 18<25fdan18>	       The error appears to be in '/tmp/kitchen/playbook.yml': line 18, column 7, but may
T 1709648532 18<19flowerysong18>	Then you're not editing the playbook that you're actually running. This playbook *cannot* result in the error you showed.
T 1709648541 18<19flowerysong18>	As I stated previously.
T 1709648972 18<24shertel18>	the `roles_path: .` in the provisioner seems like it would overwrite the default (rather than append/prepend), did you try without that?
T 1709649165 18<25fdan18>	shertel: which line exactly?
T 1709649202 18<25fdan18>	shertel: https://dpaste.org/7Svj0#L3
T 1709649206 18<25fdan18>	this one?
T 1709649379 18<24shertel18>	fdan: yes, that's the one I was wondering about
T 1709649494 18<25fdan18>	ok i removed it, now it says this error        ERROR! The requirements file '/tmp/kitchen/roles/requirements.yml' does not exist.
T 1709652777 18<22Haxxa18>	Any guess why these commands work when entered directly into the shell, but not when called from ansible?
T 1709652777 18<22Haxxa18>	https://paste.debian.net/plain/1309535
T 1709652784 18<22Haxxa18>	(root shell)
T 1709653002 18<28jtanner18>	Haxxa: https://stackoverflow.com/a/56682415
T 1709653025 18<22Haxxa18>	jtanner just figured it out as you posted it
T 1709653051 18<22Haxxa18>	BTW I started using ansible this afternoon or first time, I am finding it very nice
T 1709658822 19*	Now talking on 22#ansible
T 1709658822 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709658822 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709658822 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709661930 19*	Now talking on 22#ansible
T 1709661930 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709661930 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709661930 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709662638 18<24Freneticks18>	Oddmonger: la switch c'est juste une SoC nvidia ARM
T 1709662651 18<24Freneticks18>	sorry mt
T 1709662660 18<27stenno18>	ceci n'est pas un switch
T 1709667679 19*	Now talking on 22#ansible
T 1709667679 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709667679 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709667679 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709674382 19*	Now talking on 22#ansible
T 1709674382 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709674382 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709674383 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709686297 19*	Now talking on 22#ansible
T 1709686297 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709686297 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709686297 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709705791 19*	Now talking on 22#ansible
T 1709705791 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709705791 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709705791 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709711782 18<28cla18>	awb: Correct.
T 1709713220 18<27ygk_1234518>	Hi all. I want to use the template module to generate a config file using a jinja template file , but dont want to save it onto a destination but simply display the final file. How can it be done ?
T 1709713752 18<25endre18>	you don't need template module for that
T 1709713767 18<25endre18>	use debug with a lookup
T 1709713790 18<27ygk_1234518>	endre how to do that ? can you show me a sample ?
T 1709713928 18<25endre18>	https://docs.ansible.com/ansible/latest/collections/ansible/builtin/template_lookup.html
T 1709713934 18<27ygk_1234518>	but I need the final generated file content from jinja
T 1709713949 18<25endre18>	yeah, that's the whole point
T 1709713951 18<25endre18>	  ansible.builtin.debug:
T 1709713953 18<25endre18>	    msg: "{{ lookup('ansible.builtin.template', './some_template.j2') }}"
T 1709713982 18<27ygk_1234518>	oh ok let me try
T 1709714182 18<27ygk_1234518>	endre but how can it generate the content without this task first ?
T 1709714182 18<27ygk_1234518>	- name: Create haproxy service config files
T 1709714183 18<27ygk_1234518>	  template:
T 1709714183 18<27ygk_1234518>	    src: service.j2
T 1709714184 18<28sivel18>	ygk_12345: Please slow down, or use a pastebin if you need to paste multiple lines. If you are using matrix, please do not send multi line messages. This is an automated message.
T 1709714184 18<27ygk_1234518>	    dest: "/etc/haproxy/conf.d/{{ service.haproxy_service_name }}"
T 1709714212 18<27ygk_1234518>	so that ,means it needs destination to copy first ?
T 1709714251 18<25endre18>	wat
T 1709714258 18<25endre18>	just dont use this task step then?
T 1709714269 18<25endre18>	or use ansible directly without ansible-playbook?
T 1709714286 18<27ygk_1234518>	ok let me check if that works
T 1709714331 18<25endre18>	ansible -m debug -a "msg={{lookup('ansible.builtin.template', 'service.j2')}}" prod_edge_lb0
T 1709714697 18<27ygk_1234518>	endre is it possible to specify dest on the localhost instead of remote host for the template module ?
T 1709714788 18<25endre18>	well yes, but i'm not sure how discovered facts will with in that case
T 1709714794 18<25endre18>	well yes, but i'm not sure how discovered facts will work* in that case
T 1709714828 18<25endre18>	what if you generate this file on the target host on a temp directory, let's say
T 1709714829 18<27ygk_1234518>	endre how to specify localhost as destination ?
T 1709714843 18<25endre18>	delegate_to: localhost
T 1709714890 18<27ygk_1234518>	endre cant we see how the final file contents would like after generation without storing the file anywhere ?
T 1709714909 18<25endre18>	that's what the debug is for
T 1709714949 18<27ygk_1234518>	can I use delegate_to in the place of dest: for the template module ?
T 1709714976 18<27ygk_1234518>	what I am collecting here is for the remote hosts but want the results to be displayed on localhost
T 1709715109 18<25endre18>	that's what the debug is for
T 1709715125 18<25endre18>	it gets rendered on the remote host and sent back to 'localhost'
T 1709715143 18<25endre18>	and.. sent to the display plugin in use
T 1709717350 18<19oblikoamorale18>	endre: huh? all templating work is done locally
T 1709717454 18<25endre18>	ok, then facts are sent back?
T 1709717459 18<25endre18>	til
T 1709717913 18<27ygk_1234518>	endre can I not use vars to declare variables to be replaced when using template module ?  It is giving me conflicting statements error
T 1709718380 18<25endre18>	you can
T 1709718444 18<27ygk_1234518>	endre it is not letting me do it
T 1709718527 18<25endre18>	pasteben something so that we can check
T 1709718532 18<25endre18>	pastebin*
T 1709718541 18<25endre18>	(read: do not paste here)
T 1709718967 18<27ygk_1234518>	endre please check this https://paste.opendev.org/show/bN39iS3uHf0RiJ4P1aPK/. . It is failing even though I have defined the variable in vars section above
T 1709719212 18<25endre18>	haproxy_bind_internal_lb_vip_interface vs
T 1709719214 18<25endre18>	haproxy_bind_internal_lb_vip_address
T 1709719330 18<27ygk_1234518>	ohh
T 1709728181 19*	Now talking on 22#ansible
T 1709728181 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709728181 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709728181 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709729214 18<22carloratm18>	hi all! Do you use something to wrap ansible-playbook commands? I am currently using PHONY make targets
T 1709729286 18<25endre18>	nice
T 1709729299 18<25endre18>	we use ci server to run playbooks
T 1709729307 18<25endre18>	not exactly wrapping
T 1709729319 18<25endre18>	but has some makefile analogy
T 1709729409 18<22carloratm18>	make has a fantastic property, you can almost garantee it's there.
T 1709729690 18<25endre18>	weeeeeelllll :D
T 1709729705 18<25endre18>	yes, if you don't forget to include in the image!
T 1709729736 18<25endre18>	RUN apk add --no-cache alsa-lib alsa-lib-dev python3 make g++ && yarn install --production
T 1709729761 18<25endre18>	i needed all this to compile midi nodejs package
T 1709730379 18<22carloratm18>	we are using debian and ubuntu servers ... but yeah
T 1709730448 18<22carloratm18>	actually, what we do is we deploy manually, but it must be one command
T 1709730493 18<22carloratm18>	so the control machine is every team member laptop, which can be a mac or ubuntu or archlinux
T 1709735968 18<27colo18>	carloratm: so you want something that keeps around the proper argument vector and environment for a successfull ansible-playbook run?
T 1709735984 18<27colo18>	I guess a Makefile is fine for that purpose. or a shellscript.
T 1709736010 18<22carloratm18>	colo: yes
T 1709739808 18<25fireba1118>	i don't really see the gain in doing that *scratches chin*
T 1709747778 18<22greatgatsby18>	Hello.  What's the proper module to use to get user-input within a role?  I want to pause indefinitely with a prompt and register the answer to a question.  Thanks.
T 1709748095 18<22greatgatsby18>	maybe a better question, does pause with a prompt (and no time specified) wait indefinitely for input?
T 1709749444 18<19oblikoamorale18>	from module synposis: "Pauses playbook execution for a set amount of time, or until a prompt is acknowledged"   I got lost digging the source, but since timeout can be None (not defined), I'd say it's safe to assume that wait for user input is indefinite
T 1709749474 18<19oblikoamorale18>	and worst idea of the day award goes to... interactive roles
T 1709749682 18<22greatgatsby18>	yeah I tried to find the source, but the python file linked to via the docs doesn't contain much code, so I'm not sure where the source actually is.  Yes, I also agree this is generally bad practice, but it's our own role that's confirming a pending config change that could really mess things up if it's done incorrectly
T 1709749755 18<22greatgatsby18>	so we use check mode, and if there's a change about to be made, we write the new file to /tmp and give the operator a chance to manually diff the files before accepting the changes.  Very open to better alternative approaches.
T 1709749867 18<19oblikoamorale18>	https://github.com/ansible/ansible/blob/devel/lib/ansible/plugins/action/pause.py knock yourself out :p
T 1709749956 18<22greatgatsby18>	carloratm: we use Makefiles pretty extensively in our environment, but yeah, .PHONY all over the place.  I've also seen https://github.com/casey/just mentioned a lot recently.
T 1709749973 18<22greatgatsby18>	oblikoamorale: thanks
T 1709750295 18<27pezius18>	Can someone guide me on an issue I'm facing:
T 1709750296 18<27pezius18>	Using module file /opt/ansible_env/lib64/python3.9/site-packages/ansible/modules/import_playbook.py
T 1709750296 18<27pezius18>	fatal: [w2k19-i837633]: FAILED! => {
T 1709750297 18<27pezius18>	    "msg": "module (ansible.builtin.import_playbook) is missing interpreter line"
T 1709750297 18<28sivel18>	pezius: Please slow down, or use a pastebin if you need to paste multiple lines. If you are using matrix, please do not send multi line messages. This is an automated message.
T 1709750297 18<27pezius18>	}
T 1709750301 22*	26sivel sets ban on 18pezius!*@*
T 1709750598 22*	26sivel removes ban on 18pezius!*@*
T 1709751993 18<27pezius18>	seems i was banned for asking a question?
T 1709752082 18<24jrglynn218>	no, tempoarary ban for pasting multiple lines instead of using a pastebin - "pezius: Please slow down, or use a pastebin if you need to paste multiple lines. If you are using matrix, please do not send multi line messages. This is an automated message."
T 1709752237 18<29awb18>	Apologies if someone answered my "serial: 1" question from yesterday and I didn't respond. Scrollback buffer isn't large enough and I didn't see it.
T 1709757842 19*	Now talking on 22#ansible
T 1709757842 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709757842 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709757842 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709774324 19*	Now talking on 22#ansible
T 1709774324 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709774324 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709774324 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709786353 19*	Now talking on 22#ansible
T 1709786353 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709786353 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709786353 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709787188 19*	Now talking on 22#ansible
T 1709787188 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709787188 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709787188 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709790361 19*	Now talking on 22#ansible
T 1709790361 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709790361 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709790361 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709808329 19*	Now talking on 22#ansible
T 1709808329 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709808329 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709808329 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709810810 19*	Now talking on 22#ansible
T 1709810810 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709810810 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709810810 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709811590 19*	Now talking on 22#ansible
T 1709811590 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709811590 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709811590 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709817348 19*	Now talking on 22#ansible
T 1709817348 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709817348 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709817348 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709831254 18<22SuperLag18>	Is there a way to use wildcards for the src for ansible.builtin.fetch?
T 1709854305 18<29spidr_mnky18>	I am using include_role, and registering the result.  That works unless I apply it in a loop, in which case the variable I try to register does not get set.  Does that sound more like a bug or like me using my tools incorrectly?
T 1709856470 18<29Gilou18>	spidr_mnky: it should give you a list
T 1709856590 18<29Gilou18>	variable should be set as a dict, and you get the details as a list in the results key, iirc
T 1709858450 18<29spidr_mnky18>	Thank you, Gilou.  I'll spare you further details, here; I went ahead and filed:  https://github.com/ansible/ansible/issues/82796
T 1709934726 19*	Now talking on 22#ansible
T 1709934726 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709934726 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709934726 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709935463 19*	Now talking on 22#ansible
T 1709935464 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709935464 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709935464 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709935634 19*	Now talking on 22#ansible
T 1709935634 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709935634 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709935634 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709936054 19*	Now talking on 22#ansible
T 1709936054 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709936054 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709936054 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709966630 19*	Now talking on 22#ansible
T 1709966630 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709966630 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709966630 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709969040 19*	Now talking on 22#ansible
T 1709969040 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709969040 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709969040 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709975301 19*	Now talking on 22#ansible
T 1709975301 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709975301 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709975301 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709975561 19*	Now talking on 22#ansible
T 1709975561 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709975561 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709975561 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709978956 19*	Now talking on 22#ansible
T 1709978956 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709978956 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709978956 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709980395 19*	Now talking on 22#ansible
T 1709980395 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709980395 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709980395 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709988023 19*	Now talking on 22#ansible
T 1709988023 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709988023 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709988023 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1709991215 19*	Now talking on 22#ansible
T 1709991215 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1709991215 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1709991215 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710000710 18<26newpy18>	is there an obvious choice of python packages to drive ansible? (I see ansible_runner & ansible, maybe there are others?)
T 1710006757 18<27satmd18>	well, ansible-lint is useful
T 1710012681 18<29OutOfService18>	Hi
T 1710013036 18<29OutOfService18>	I'd like to use the vars_prompt module so that Before starting all my roles and tasks, it asks me for a username. I'm trying to create a role, with a task using this vars_prompt module, but always tells me that there is a problem with the way the task is written, or similar errors. So, I guess I cannot use this "module" everywhere, and if I read the official doc, it only shows an example of
T 1710013036 18<29OutOfService18>	putting the vars_prompt inside a playbook. I'd like to use a diffrerent file for this pupose only: a file that just asks me some questions before starting the playbook. So, what do you recomend me to get this working? Thanks a lot in advance!
T 1710014675 18<24sahil_18>	Hi, I use ansible vault for storing my private key on a public github repo. And I have a script that does all the magic to setup my .dotfiles (which is private)
T 1710014710 18<24sahil_18>	How can I have multiple password attempts in ansible vault. At present if I type it wrong, the whole thing falls apart
T 1710014817 18<24sahil_18>	One approach that I find working is to do the decrypting in the start of the script, and then continue if that passes.
T 1710017826 18<28stemid18>	what's the trick for when you want to make quick changes to a role that you've installed from git? the git repo is on my computer but how can I make my playbook repo temporarily use it so I don't have to push my changes to git before I test them?
T 1710018562 18<28stemid18>	I just did rm ~/.ansible/roles/myrole and then ln -s ~/my-role ~/.ansible/roles/myrole
T 1710018570 18<28stemid18>	not sure what best practice is here
T 1710026476 19*	Now talking on 22#ansible
T 1710026476 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710026476 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710026477 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710026565 19*	Now talking on 22#ansible
T 1710026566 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710026566 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710026566 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710026858 19*	Now talking on 22#ansible
T 1710026858 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710026858 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710026858 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710027100 19*	Now talking on 22#ansible
T 1710027100 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710027100 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710027101 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710031100 19*	Now talking on 22#ansible
T 1710031100 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710031100 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710031100 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710031928 19*	Now talking on 22#ansible
T 1710031928 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710031928 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710031928 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710049342 19*	Now talking on 22#ansible
T 1710049342 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710049342 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710049342 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710070829 18<27satmd18>	rvgate: also add .ansible_vault to .gitignore ofc
T 1710070849 18<27satmd18>	that's what we do
T 1710072881 18<29plantroon18>	Hey I need to copy file between 2 servers that cannot in any way see each other - how do I do this with ansible? I was thinking about making use of slurp module and delegate_to, but the files are way too big. I cannot rsync from one server to the other, by design, they have no connection between each other. Only I can connect from my side (or what will be the future control node)
T 1710075603 18<24bkhl18>	plantroon: you can use ansible.builtin.fetch to get the file to the controller, and then regular copy to write it to the destination.
T 1710075843 18<29plantroon18>	hmmm  "When running fetch with become, the ansible.builtin.slurp module will also be used to fetch the contents of the file for determining the remote checksum. This effectively doubles the transfer size, and depending on the file size can consume all available memory on the remote or local hosts causing a MemoryError. Due to this it is advisable to run this module without become whenever possible."
T 1710075896 18<29plantroon18>	the control node is either a small VM or a dev laptop, which poses the problem. At best it could have 16 GB of RAM which I am not sure will suffice for copying ~300 GB. I'll probably just pipe it around with tar, rsync, zstd/gzip and appropriate bandwidth limits ...
T 1710076555 18<28Kelsar18>	plantroon: maybe it would be a scenario where a localhost scp -3 shell command would useful
T 1710076817 18<29plantroon18>	looks good but I still need to get through sudo somehow. I mean, it's weird that there are such constraints. Maybe I'll get an approval for deploying ssh keys straight into root, that'll make things a lot easier.
T 1710081357 18<29OutOfService18>	Hi
T 1710086257 18<26newpy18>	I have input vars with desired state and I'd like to create a task that checks host state against that desired state to determine which other tasks need to be run, what's the best way to structure this?
T 1710087013 18<26newpy18>	(unfortunately I'm using cisco collections which don't have the greatest idempotency/checks)
T 1710088916 18<26newpy18>	would it be bad form to run a task that checks router state against user input variables (desired state) and notifies handlers for the tasks I want to run?
T 1710088936 18<26newpy18>	not sure if handlers are supposed to be for "shared" cleanup across multiple tasks etc
T 1710088949 18<26newpy18>	don't want to abuse it for something it wasn't necessarily meant for
T 1710088958 18<26newpy18>	also not sure if I can notify handlers in different roles
T 1710089373 18<19oblikoamorale18>	there's nothing wrong with conditional include_tasks/include_role. there is no "best" way, choose whatever works for you
T 1710109467 19*	Now talking on 22#ansible
T 1710109467 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710109467 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710109467 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710112836 19*	Now talking on 22#ansible
T 1710112836 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710112836 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710112836 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710113061 19*	Now talking on 22#ansible
T 1710113061 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710113061 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710113061 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710117909 18<26newpy18>	I have a collection with a playbooks/ directory but I can't run the playbook from command-line via something like `ansible-playbook local.collection_name.pb_name`
T 1710117933 18<26newpy18>	the collection is in ./ansible_collections/local/my_collection
T 1710118768 19*	Now talking on 22#ansible
T 1710118768 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710118768 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710118768 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710120124 18<19flowerysong18>	The most common causes for this are the playbook not having a valid name (most especially people like to put `-` in them) or the collection directory not being in the search path (e.g. if you're relying on playbook adjacency, which doesn't work for calling a playbook inside it.)
T 1710131041 19*	Now talking on 22#ansible
T 1710131041 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710131041 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710131041 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710133664 19*	Now talking on 22#ansible
T 1710133664 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710133664 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710133664 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710151477 18<19eleitl18>	Hi -- I've got an AAP question, hope this is appropriate here. I'm looking for any documentation on the redhat.rhel_idm.ipahost module. Just general pointers on where to find information about RHEL stuff would be very useful. Thanks.
T 1710151614 18<19oblikoamorale18>	AAP as in Ansible Automation Platform? contact your support.   this channel's topic is ansible-core.  AAP somewhat overlaps with AWX, so you may try asking #ansible-awx
T 1710151631 18<19eleitl18>	Thank you very much.
T 1710152098 18<28cla18>	I think the question is about supported collection by redhat, which would be this in community: https://docs.ansible.com/ansible/latest/collections/community/general/ipa_host_module.html
T 1710152285 19*	Now talking on 22#ansible
T 1710152285 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710152285 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710152285 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710152524 18<19oblikoamorale18>	I don't see redhat.rhel_idm collection anywhere in the open internets
T 1710152549 18<19oblikoamorale18>	perhaps rhel_idm was renamed indeed
T 1710153454 18<28cla18>	Its here: https://catalog.redhat.com/software/collection/redhat/rhel_idm
T 1710153476 18<28cla18>	But yes, it's not open.
T 1710166298 18<27emper0r18>	hi, i need a little help with JSON filter, i'm trying to implement this part https://developer.hashicorp.com/vault/api-docs/secret/identity/oidc-provider#create-or-update-a-scope and this is my snippet code, with error output. https://dpaste.com/DVK6BGMMB
T 1710166529 18<25trilogy18>	How can I define a Jinja macro in a vars file?
T 1710166755 18<25trilogy18>	Actually my real problem is: I have a big list of objects that are used in playbooks. These objects are largely redundant. I'd like to make a default, then my list would just use that default and override fields as necessary. I'm trying to figure out how to do that in valid YAML
T 1710167227 18<19oblikoamorale18>	emper0r: what you're passing to the module and what it expects is different. they use json based templating arguments, which are not valid json until templating occurs.  do you know there's hashi vault collection? https://docs.ansible.com/ansible/latest/collections/community/hashi_vault/index.html
T 1710167400 18<27emper0r18>	oblikoamorale: i'm using it
T 1710167412 18<19oblikoamorale18>	trilogy: you can use yaml anchors since they are processed on yaml parsing stage. you can also employ arbitrary jinja expressions as variable values. I believe that's enough for you to go on. jinja macros are also possible within single expression context (or template)
T 1710167452 18<19oblikoamorale18>	emper0r: cool, just highlighting the obvious
T 1710167491 18<25trilogy18>	oblikoamorale: is there a way to use anchors without it yelling about redefining the same variable?
T 1710167538 18<19oblikoamorale18>	I don't know, I don't use them. https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_advanced_syntax.html#yaml-anchors-and-aliases-sharing-variable-values
T 1710167844 18<27emper0r18>	oblikoamorale: sorry not understand what you mean with highlights?
T 1710168088 18<19oblikoamorale18>	it means I pointed out the apparent wrong things that caught my eye
T 1710168299 18<27emper0r18>	oblikoamorale:  with this  name: !unsafe '{{identity.entity.name}}' and this debug msg: "{{item_identity_oidc_scope.value.template|to_json}}" the output is json format correct, the issue is when need to write into vault, need escape \" so adding regex filter this "{{item_identity_oidc_scope.value.template|to_json|regex_replace('\"', '\\\\\"')}}" the output is ok msg: '{\"name\":
T 1710168306 18<27emper0r18>	\"{{identity.entity.name}}\"}' but still write is same error :S
T 1710168376 18<27emper0r18>	 hvac.exceptions.InvalidRequest: error parsing template JSON: invalid character '\\'
T 1710168377 18<19oblikoamorale18>	it's different to what hashivault expects. if you look closely at their docs page, it should be: '{\"name\": {{identity.entity.name}} }'
T 1710168396 18<19oblikoamorale18>	as I said it's not a valid json so to_json here is useless
T 1710168405 18<27emper0r18>	ah
T 1710168418 18<27emper0r18>	ok i'll remove it
T 1710168420 18<19oblikoamorale18>	and I don't know how to deal with hashivault, it's just what caught my eye in your paste
T 1710168544 18<27emper0r18>	mm i trying to implement the template scope dinamicly using var, template: name: !unsafe '{{identity.entity.name}}' if i don't add ' got an error. so i guess have to try using directly on role wihtout set dynamically
T 1710168579 18<27emper0r18>	to avoid it like doc  '{\"name\": {{identity.entity.name}} }'
T 1710169255 18<27emper0r18>	oblikoamorale: ... any idea?  name: !unsafe '{ "name": {{identity.entity.name}} }'  in the task template:    "{{item_identity_oidc_scope.value.template|b64encode|default('')}}" and the error output now is  hvac.exceptions.InvalidRequest: error parsing template JSON: invalid character '\'' looking for beginning of object key string, on post https://vault
T 1710169303 18<27emper0r18>	where is that \ ?
T 1710169392 18<19oblikoamorale18>	dunno. my advice is to try sending manually crafted strings, and when you get request working, compare them to what jinja templating generates
T 1710169495 18<27emper0r18>	vault read identity/oidc/scope/name   -> template       { "name": {{identity.entity.name}} }
T 1710169642 18<27emper0r18>	i guess can try using a jinja template and save into localhost to try add it using uri like manually ... maybe works in that way. because directly from variable the ' going in error.
T 1710169699 18<19oblikoamorale18>	my understanding is when you figure out the exact string you need to send, you can convince jinja to render it correctly. It seems like the easiest way
T 1710169720 18<19oblikoamorale18>	doing it in the opposite order may be a painful guessing game
T 1710172096 18<27emper0r18>	oblikoamorale: now works.. was the first and last ' from start
T 1710173912 18<27emper0r18>	oblikoamorale: thx..
T 1710173916 18<27emper0r18>	c'y
T 1710173918 18<27emper0r18>	o/
T 1710182448 22*	26ChanServ gives channel operator status to 18webknjaz
T 1710200282 19*	Now talking on 22#ansible
T 1710200282 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710200282 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710200282 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710201344 19*	Now talking on 22#ansible
T 1710201344 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710201344 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710201345 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710225221 19*	Now talking on 22#ansible
T 1710225221 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710225221 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710225221 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710236465 18<27stenno18>	good day, i am using ad-hoc commands to check certain things on my hosts. I want to use host variables in my adhoc command`. So i am calling `ansible myhosts -m 'shell' -a 'ls {{ hostvars[inventory_hostname].some_path }}'`. This command works, but _only_ if i am in my actual ansible directory.
T 1710236487 18<27stenno18>	Is there a way to execute this shell command with setting thet working directory beforehand?
T 1710236513 18<27stenno18>	i tried ... -a 'chdir=my/ansible/dir ls ...' but the error is the same
T 1710236530 18<27stenno18>	however when i 'manually' cd to my/ansible/dir, the command works
T 1710236551 18<27stenno18>	otherwise, the error message is 'ansible.vars.hostvars.HostVarsVars object' has no attribute 'some_path'
T 1710236677 18<27stenno18>	hmm while i rubber-duck this, i realize that chdir will be done on the host, not on the control server
T 1710236757 18*	19double-p underlines `inventory`
T 1710236789 18<27stenno18>	oh i pass the host file too with -i
T 1710236950 18<27stenno18>	if i simply do, in an arbitrary directory, `ansible myhosts -m 'shell' -a 'ls {{ some_path }}
T 1710236967 18<27stenno18>	' -i path/to/my/inventory/file.yml
T 1710236996 18<27stenno18>	'the task includes an option with an undefined variable. The error was: 'some_path' is undefined. 'some_path' is undefined
T 1710237137 18<27stenno18>	double-p: what do you mean with that?
T 1710238004 18<19oblikoamorale18>	uhm. why the complicated "{{ hostvars[inventory_hostname].some_path }}" at all? "{{ some_path }}" is just enough.   besides, host_vars/group_vars (where you're apparently storing some_path var) must be adjacent to inventory file to be loaded
T 1710238447 18<27stenno18>	oblikoamorale: if i am in the folder my/thing/ansible, and do '{{ some_path }}', it works
T 1710238466 18<27stenno18>	when i go into the directory above it, so my/thing, and prepend ansible to -i, it does not work
T 1710238473 18<27stenno18>	i get undefined variable error
T 1710238711 18<19oblikoamorale18>	worksforme. where exactly some_path is defined? as I said, host/group_vars must be adjacent to inventory file location
T 1710238729 18<27stenno18>	it is. i am not changing the directory structure. i am just going one directory above
T 1710238782 18<19oblikoamorale18>	as I said what you describe works in my test case.  provide a minimal reproducer illustrating the issue, including dir/filetree and relevant files
T 1710238851 18<27stenno18>	my host vars live in ansible/host_vars/... and my inventory lives in ansible/inventories/hosts.yml. i will make a testcase
T 1710238940 18<19oblikoamorale18>	https://dpaste.org/ViyFz
T 1710238981 18<19oblikoamorale18>	I don't really want to repeat it the 3rd time, but I will. host/group_vars must be adjacent to inventory dir location. do you understand what it means?
T 1710238996 18<27stenno18>	my host vars live in ansible/host_vars/... and my inventory lives in ansible/inventories/hosts.yml. i will make a testcase
T 1710239004 18<19oblikoamorale18>	your inventory must bet located in the same dir where host/group_vars dirs are
T 1710239033 18<27stenno18>	ansible/host_vars/my_host/vars ... and ansible/inventories/hosts.yml
T 1710239040 18<27stenno18>	this is the relationship between the two
T 1710239045 18<19oblikoamorale18>	this is wrong
T 1710239049 18<19oblikoamorale18>	with
T 1710239063 18<19oblikoamorale18>	with "ansible/host_vars/my_host/vars" your inventory must be in "ansible/hosts.yml"
T 1710239065 18<27stenno18>	wait so my whole folder structure is wrong?
T 1710239071 18<19oblikoamorale18>	loader does not do recursive lookups
T 1710239105 18<19oblikoamorale18>	alternatively you may symlink it to the place vars loader will pick it up
T 1710239114 18<27stenno18>	ok, thanks for the patience, this must be it then
T 1710239361 18<19oblikoamorale18>	https://docs.ansible.com/ansible/latest/inventory_guide/intro_inventory.html#organizing-host-and-group-variables
T 1710239369 18<19oblikoamorale18>	see the 3rd paragraph
T 1710239507 18<27stenno18>	i followed the directory structure here https://docs.ansible.com/ansible/2.8/user_guide/playbooks_best_practices.html more or less
T 1710239585 18<27stenno18>	well blimey, that explains it
T 1710239590 18<19oblikoamorale18>	the link you are reading refers to ansible 2.8
T 1710239649 18<27stenno18>	oh wow, the best practises section just doesn't exist for the latest docs
T 1710239679 18<27stenno18>	thanks for the clarifications
T 1710239684 18<27stenno18>	and the patience
T 1710239696 18<27stenno18>	i am still confused but for different reasons now :P
T 1710239762 18<19oblikoamorale18>	best practices are snake oil, you make your own best practices with tools in your disposal
T 1710239895 18<27stenno18>	it helped me in the beginning but now it bites me in the behind
T 1710240017 18<27stenno18>	i guess the change you suggested to the folder structure is easy enough, thanks! that will do it, i think
T 1710240156 18<19oblikoamorale18>	sure, the page I linked you to is a current version of that "best practices" doc.
T 1710240169 18<27stenno18>	yeah fair
T 1710241268 18<26SDes9118>	Hi all, I have a playbook (For testing purposes in my test infrastructure) which begins with `import_playbook` and then does some assertion tests via a play and then ends with a cleanup playbook which is also through `import_playbook`. I wish to make the cleanup play be triggered irrespective if the the play fails or not. I tried adding `tags:
T 1710241268 18<26SDes9118>	[always]` to the `import_playbook` but that part does not seem to be triggered.
T 1710241287 18<26SDes9118>	does `import_playbook` not allowed to have tags?
T 1710241721 18<19oblikoamorale18>	import_playbook is essentially a preprocessor directive. it is only applicable in playbook, not in tasks. however it's possible to apply arbitrary tags to subsequent imported tasks with tags keyword: ansible-doc import_playbook
T 1710241987 18<26SDes9118>	oblikoamorale I mean I am executing a playbook and the tags are not in tasks. The playbook functionality is summarized as `1. Import generation_playbook.yml 2. play to test what was generated 3. import teardown.yml` I wish to run `teardown.yml` irrespective the result of 1 and 2.
T 1710242230 18<19oblikoamorale18>	I suppose you can try meta's clear_host_errors  to make errored hosts available for subsequent plays. https://docs.ansible.com/ansible/latest/collections/ansible/builtin/meta_module.html#parameters
T 1710243628 18<26SDes9118>	oblikoamorale hmmm. doesn't seem to do what I want. thanks for the tip
T 1710244722 18<29vbotka18>	SDes91, see https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_blocks.html#handling-errors-with-blocks
T 1710244742 18<29vbotka18>	Use *block/rescue*
T 1710244762 18<19oblikoamorale18>	I guess any_errors_fatal play keyword might've been useful for them, but they are already gone
T 1710244861 18<25fdan18>	what is wrong with this host var
T 1710244862 18<25fdan18>	https://dpaste.org/mtKzK
T 1710244887 18<27stenno18>	auth is missing "
T 1710244898 18<27stenno18>	posting the actual error message helps in such cases
T 1710244936 18<19oblikoamorale18>	which var exactly? it doesn't help when you post two vars asking about one
T 1710244958 18<27stenno18>	auth is missing "
T 1710244963 18<27stenno18>	  auth = "YmUzZjQ0ODctNjRhOC00Yj
T 1710244963 18<25fdan18>	line 19, column 1, but may
T 1710244964 18<25fdan18>	be elsewhere in the file depending on the exact syntax problem.
T 1710244964 18<25fdan18>	The offending line appears to be:
T 1710244965 18<25fdan18>	[bxflags]
T 1710244965 18<25fdan18>	allowinsecure = true
T 1710244966 18<25fdan18>	^ here
T 1710244967 22*	26sivel sets ban on 18fdan!*@*
T 1710244998 18<19double-p18>	sigh
T 1710245001 18<27stenno18>	:|
T 1710245005 18<27satmd18>	sigh
T 1710245077 18<19double-p18>	maybe dpaste could add more blink in syntax highlights
T 1710245237 18<19oblikoamorale18>	line 19 doesn't match the paste you showed us
T 1710245265 22*	26sivel removes ban on 18fdan!*@*
T 1710245273 18<22plundra18>	Clippy style, "It looks like you are about to paste yaml with syntax error - Maybe you want help with it?"
T 1710245320 18<19oblikoamorale18>	stenno: closing quote may be an error but it won't fail yaml parser since bor_bxflags is a multiline text block (note the | scalar)
T 1710245331 18<27stenno18>	oh good point
T 1710245342 18<19double-p18>	plundra: muha
T 1710245373 18<25fdan18>	oblikoamorale L19 is here https://dpaste.org/mtKzK#L4
T 1710245414 18<25fdan18>	does this need quote?
T 1710245414 18<25fdan18>	  allowinsecure = true
T 1710245542 18<19double-p18>	close the quote in L8 (or 23..) before that runs off, too
T 1710245544 18<19oblikoamorale18>	maybe, but it isn't the reason of your error.
T 1710245570 18<19oblikoamorale18>	I took your literal paste and it is perfectly valid yaml
T 1710245574 18<25fdan18>	thats a typo when i pasted
T 1710245609 18<19oblikoamorale18>	uh. showing us non-exact replica of the original failing file is not helpful
T 1710245632 18<25fdan18>	can you try this full yaml
T 1710245632 18<25fdan18>	https://dpaste.org/WUVTZ
T 1710245757 18<19oblikoamorale18>	fdan: run yamllint against that file yourself
T 1710245780 18<25fdan18>	brew install yamllint?
T 1710245795 18<19oblikoamorale18>	pip install yamllint
T 1710245895 18<25fdan18>	  21:81     error    line too long (103 > 80 characters)
T 1710245910 18<25fdan18>	what do i do about that error
T 1710245981 18<19oblikoamorale18>	it's a style thing and can be ignored
T 1710246789 18<27satmd18>	if you want to make console users happy, then break up the line into two - this might be easy or hard depending on what it contains
T 1710246813 18<27satmd18>	(mail etiquette is 78 chars, actually - because of newline/carriage return)
T 1710250578 18<27colo18>	(note that those 78 chars already _include_ two chars for the line-terminating crlf)
T 1710250935 18<19oblikoamorale18>	it's a personal preference which we don't care about :p
T 1710253272 18<25sandinak18>	when running the same tasks on multiple hosts.. is there a way to print something per host on the task output? Eg anyhting in the 'name:' is relative to the first host IIRC?
T 1710253557 18<19double-p18>	could "block" it with a debug-msg?
T 1710255328 18<19oblikoamorale18>	I don't understand the question. what do yo want to print, and where exactly?
T 1710255994 18<25sandinak18>	when I run a task on multiple hosts.. the data I get from the host itself is ```ok: [qa42iad-bat-001] ```
T 1710256007 18<25sandinak18>	it would be nice to be able to amend that output with something from the task
T 1710256064 18<19oblikoamorale18>	register task result and print it in consequent debug module call. that's how ansible works
T 1710256192 18<25sandinak18>	I know it's how ansible works .. more i was thinking it would be a nice feature.  Not sure how i'd implement it.. there's no easy way to extend via the plugins.  Perhaps a task option: 'task_msg' that would be returned on the call with the task status and then expanded on the output line with the hostname
T 1710256838 18<19oblikoamorale18>	sounds like a lot of work for questionable gains. while developing you can see task execution results in realtime with enough -v's. in production you should have better way of spending your time than looking at plays output
T 1710256969 18<29nomicon18>	https://docs.ansible.com/ansible/latest/collections/ansible/builtin/git_module.html#parameter-key_file
T 1710256972 18<29nomicon18>	Would it possible somehow to have this keyfile stored in vault instead of on-disk?
T 1710257191 18<19oblikoamorale18>	keyfile has to exist on target host, so I don't know how this would work. you can of course manually unvault the key and clean it up after git operation. ssh-agent sounds like a better option to me, but ymmv
T 1710257504 18<19oblikoamorale18>	sandinak: https://github.com/ansible/proposals/issues/145
T 1710257573 18<25sandinak18>	yup .. I like that!
T 1710258437 18<26alien_lappy18>	So, what's a good way to handle hosts behind another ssh host?
T 1710258482 18<26alien_lappy18>	is there like a delegate thing i can do to refer to a host as in it's behind that host and all is taken care of? or do i need to have ssh proxy comands and stuff?
T 1710258509 18<26alien_lappy18>	and what about docker hosts that are reached through an ssh host ?
T 1710258989 18<28jtanner18>	alien_lappy: simplest way is via "jump hosts" https://www.jeffgeerling.com/blog/2022/using-ansible-playbook-ssh-bastion-jump-host
T 1710259057 18<28jtanner18>	i believe your question about docker hosts implies "connection stacking", and i don't think there's a good way to do that besides command/shell module calls to the docker command. I could be wrong though
T 1710259231 19*	Now talking on 22#ansible
T 1710259231 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710259231 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710259231 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710259389 18<22nils_18>	one could also pipe the docker socket through ssh I believe?
T 1710259832 18<28jtanner18>	yeah, if you can manage that
T 1710259861 18<28jtanner18>	volume mount semantics would be tricky
T 1710260078 18<25fdan18>	Hi guys, i keep getting this error https://dpaste.org/S4bA6
T 1710260097 18<25fdan18>	this is the template file: https://dpaste.org/MAB7G
T 1710260106 18<25fdan18>	this is the task: https://dpaste.org/E48uS
T 1710260380 18<24jrglynn218>	sandinak: perhaps this forum post can help woth what you want. I haven't attempted it, just remembered the post ==> https://forum.ansible.com/t/ansible-output-label/3786
T 1710262482 18<26tkonto18>	hi all
T 1710262507 18<26tkonto18>	any idea why the code in the paste, gives the output at the bottom of the paste?
T 1710262509 18<26tkonto18>	https://paste.debian.net/1310462/
T 1710262531 18<26tkonto18>	Would expect "Disaster Recovery" not "Disaster Recovery              "
T 1710262731 18<19oblikoamorale18>	remove line 6 trailing spaces
T 1710262760 18<26tkonto18>	I can not.. they are part of identation
T 1710262764 18<26tkonto18>	yaml identation
T 1710262809 18<26tkonto18>	thought that this might be the problem, and can see two solutions. Find a way to sort off retain identation, or stript down the extra spaces
T 1710262816 18<26tkonto18>	not sure how to do either
T 1710262817 18<19oblikoamorale18>	wat? I'm talking about trailing spaces after }}, not keading
T 1710262823 18<19oblikoamorale18>	*leading
T 1710262827 18<26tkonto18>	:/
T 1710262875 18<26tkonto18>	oups... you are right, never show them...
T 1710262879 18<26tkonto18>	:)
T 1710262887 18<26tkonto18>	sorry and thank you
T 1710262928 18<26tykling18>	always use an editor which shows whitespace with a visible marker :)
T 1710262951 18<26tkonto18>	learned something new today :)
T 1710262986 18<19oblikoamorale18>	by the way it would've been caught by yamlling if you had it in your pre-commit chain
T 1710262994 18<19oblikoamorale18>	*yamllint, I can't type
T 1710263027 18<26tkonto18>	Had it, but kept using all my CPUs
T 1710263035 18<26tkonto18>	never had the time to find out why
T 1710263045 18<26tkonto18>	the same with ansible lint
T 1710263051 18<26tkonto18>	but high time I find out
T 1710263139 18<19oblikoamorale18>	yamllint != ansible-lint. I fail to see how yamllint can be slow, unless you feed it gigabytes of yaml
T 1710264014 18<27satmd18>	I partied when I found out about ansible-lint's --offline toggle
T 1710267336 18<26alien_lappy18>	jtanner: sigh
T 1710267405 18<26alien_lappy18>	so, there's the thing about the hosts knowing their docker ip, and so the ssh jump host config is difficult
T 1710272253 18<26FreeBDSM18>	I freaking hate ansible-vault and its confusing docs
T 1710272278 18<26FreeBDSM18>	gimme a simple example of how to encrypt a string and then how to decrypt it back, ffs!
T 1710272307 18<26FreeBDSM18>	without files, without password files, without 'vault ids' (da hell is that??)
T 1710272394 18<26FreeBDSM18>	`cat encryptme.txt | ansible-vault encrypt_string --stdin-name encrypted_string` output the encrypted string that I can't decrypt!
T 1710272590 18<22FooBar18>	I really dislike vault as well... so use 'passwordstore' for secrets ;)
T 1710272624 18<22FooBar18>	but then you need gpg ... but there are more alternatives
T 1710272754 18<26FreeBDSM18>	I am soooo mad right now that the most basic stuff is made so god damn complex
T 1710272786 18<26FreeBDSM18>	even if I redirect the output from the above command into a file - `ansible-vault decrypt that_file` WON'T DECRYPT IT!
T 1710272814 18<26FreeBDSM18>	because encrypted string stored for a key in a file is not an encrypted file
T 1710272831 18<26FreeBDSM18>	but NEVER EVER the docs mention how to decrypt the goddamn string
T 1710272911 18<27colo18>	FreeBDSM: you want to echo it back to stdout? but THAT'S DANGEROUS!!11!1! ;)
T 1710273007 18<26FreeBDSM18>	colo, NO WORRIES, I KNOW HOW TO REDIRECT STDOUT INTO FILES!
T 1710273110 18<22nils_18>	FreeBDSM, it can be a bit counter-intuitive to decrypt the individual strings that are returned by encrypt_string - the idea is that you can put that particular string into your inventory somewhere
T 1710273145 18<22nils_18>	so when the playbook runs the value of encrypted_string is decrypted
T 1710273174 18<29jborean9318>	If you dislike `ansible-vault` but love PowerShell I have a pretty ancient module for you! https://www.irccloud.com/pastebin/gGHwdhw1/
T 1710273174 18<26FreeBDSM18>	that should be the next step
T 1710273201 18<26FreeBDSM18>	but the first step should be just encrypt/decrypt stdinput and spit stdoutput
T 1710273237 18<29jborean9318>	But this also works just fine for me https://www.irccloud.com/pastebin/bZV4srDw/
T 1710273243 18<26FreeBDSM18>	jborean93, powershell smells. Of windows and necrosoft.
T 1710273261 18<26FreeBDSM18>	jborean93, not for me
T 1710273271 18<29jborean9318>	¯\_(ツ)_/¯ - Works on my machine
T 1710273281 18<26FreeBDSM18>	lucky you!
T 1710273286 18<29jborean9318>	https://usercontent.irccloud-cdn.com/file/EH5nfM9t/image.png
T 1710273419 18<29jborean9318>	maybe share how you are running it and what the error is
T 1710273483 18<26FreeBDSM18>	oh, your variant works
T 1710273504 18<26FreeBDSM18>	I google `echo ... | ansible-vault decrypt /dev/stdin`
T 1710273510 18<26FreeBDSM18>	and that way it throws an error
T 1710273513 18<29jborean9318>	yea just drop the `/dev/stdin`
T 1710273521 18<29jborean9318>	it'll read from stdin by default if you don't specify a file
T 1710273626 18<29jborean9318>	You can also use `<<` to pipe in directly without echo. https://www.irccloud.com/pastebin/sMMqpIsj/
T 1710273635 18<29jborean9318>	If that's preferred for yourself
T 1710273711 18<29jborean9318>	or do it interactively; `ansible-vault decrypt` -> enter password -> paste in vault -> enter, ctrl+d
T 1710274106 18<26FreeBDSM18>	jborean93, the last variant is confusing: I execute `ansible-vault descrypt` it prompts password - I enter it, it then says 'reading ciphertext input from stdin' and hangs in that position
T 1710274123 18<29jborean9318>	you need to press `ctrl+d` to send the EOF to close stdin
T 1710274140 18<29jborean9318>	I'm unsure if you need a newline after the last vault line or not though, I only tried it with it
T 1710274174 18<26FreeBDSM18>	oh
T 1710274185 18<26FreeBDSM18>	weirdly it needed enter before ctrl+d
T 1710274243 18<29jborean9318>	yea the UX there could definitely be improved
T 1710274395 18<26newpy18>	does anyone know the proper syntax for passing multiple args to ansible_ssh_common_args in inventory?
T 1710274422 18<26FreeBDSM18>	now I'm stuck on the next step. I have 2 netbox inventory files. They differ only in 2 places: api_endpoint and `token: !vault | ...`
T 1710274437 18<26FreeBDSM18>	one of them works fine, the other - fails
T 1710274446 18<26FreeBDSM18>	the network connection to both endpoints is okay
T 1710274502 18<29jborean9318>	newpy: looks like the type is a string so you just need to pass it as a space delimited arg like you would in the shell
T 1710274547 18<26FreeBDSM18>	I used the same password, saved in a file and specified in `[defaults] vault_password_file` to generate ciphertext for token in one of the files using my token that I've just issued.
T 1710274569 18<26FreeBDSM18>	so the same file successfully decrypts both ciphertexts
T 1710274620 18<26FreeBDSM18>	but with 1 instance it works and with the other it fails (saying 'unable to parse b_netbox_inventory.yaml as an inventory source')
T 1710274629 18<26FreeBDSM18>	how the eff is that even possible
T 1710274646 18<29jborean9318>	so is the vault var being used in your inventory plugin config?
T 1710274658 18<26FreeBDSM18>	yeah
T 1710274666 18<29jborean9318>	I didn't know that was possible
T 1710274707 18<26newpy18>	vars: ansible_ssh_common_args: "-o HostbasedAuthentication=no -o HostKeyAlgorithms=ssh-rsa,ssh-dss"
T 1710274718 18<26newpy18>	would this work for passing two args to ssh?
T 1710274724 18<29jborean9318>	it should
T 1710274731 18<29jborean9318>	run with `-vvv` and you can see what args was used
T 1710274742 18<26FreeBDSM18>	if I replace ciphertext with plaintext secret - `ansible-inventory --list` works fine
T 1710274785 18<26FreeBDSM18>	I copy the same ciphertext into terminal and decrypt it into that plaintext just fine
T 1710274787 18<29jborean9318>	So you have it working in one example with a vault string, I wasn't aware it was possible to use it at all in an inventory plugin config
T 1710274812 18<26FreeBDSM18>	yeah, and the other fails if its ciphertext, but works if its plaintext
T 1710274845 18<29jborean9318>	I think that's your problem, you can't use a vault string in an inventory plugin config
T 1710274866 18<26FreeBDSM18>	jborean93, it works in another file with another netbox and another token
T 1710274891 18<29jborean9318>	you said it failed if its ciphertext though, unless I misunderstood?
T 1710274909 18<26FreeBDSM18>	2 files. 2 ciphertext tokens: 1 works, 1 fails.
T 1710274925 18<26FreeBDSM18>	I then change the failing ciphertext into plaintext - both work now.
T 1710275094 18<29jborean9318>	ok I can see it working here when I do an example one, have you tried running `ansible-inventory ... --ask-vault-pass` and just manually providing the password for now
T 1710275127 18<29jborean9318>	For example with and without `--ask-vault-pass` for me https://www.irccloud.com/pastebin/fEdMAu9n/
T 1710275173 18<29jborean9318>	This is what my inventory plugin config looks like https://www.irccloud.com/pastebin/bmQMnumY/
T 1710275178 18<26FreeBDSM18>	jborean93, same problem
T 1710275194 18<29jborean9318>	can you run with `-vvv` and share the full error?
T 1710275243 18*	29jborean93 wow I didn't realise I was the one to fix vault file support in inventory plugins https://github.com/ansible/ansible/commit/7092c196ed0f0e1ee9a53d4040d5ff8c509c05b6
T 1710275311 18<26FreeBDSM18>	jborean93, toml declined parsing ~/ansible/inventories/my_inventory.yaml as it did not pass its verify_file() method
T 1710275329 18<26FreeBDSM18>	and then a stack trace
T 1710275338 18<29jborean9318>	yea that would be expected with the latter plugins, there should be an entry under `auto` which is the one you care about here
T 1710275350 18<29jborean9318>	the stacktrace might show the underlying exception though
T 1710275440 18<26FreeBDSM18>	https://paste.sh/n5M-Q8JH#Hw6dtYObIU7uRwwtx-gneLia
T 1710275500 18<26FreeBDSM18>	Failed to parse netbox_inventory.yaml with auto plugin: expected string or bytes-like object, got 'int'
T 1710275548 18<29jborean9318>	that looks to be unrelated to your vault value?
T 1710275565 18<26newpy18>	jborean93: I tried -vvv but the most it says is that it's using network_cli
T 1710275573 18<26newpy18>	(maybe I should have mentioned that)
T 1710275587 18<26FreeBDSM18>	jborean93, why unrelated?
T 1710275610 18<26FreeBDSM18>	it looks like it sees ciphertext as some int instead of a string or bytes-like obj or smth
T 1710275643 18<26FreeBDSM18>	but there is a letter 'a' in the ciphertext, it's not just digits
T 1710275650 18<22tsundoku18>	Hi all, I'm relatively new to ansible and I'm running into an issue with some code I inherited that I feel like I'm missing something on...
T 1710275653 18<29jborean9318>	the stacktrace indicates the problem is at `if version.parse(netbox_api_version) >= version.parse("3.5.0"):` and `netbox_api_version` seems to be coming from a remote source
T 1710275658 18<29jborean9318>	just trying to track down the code to confirm now
T 1710275682 18<29jborean9318>	newpy: network_cli doesn't use the ssh binary AFAIK, it either uses paramiko or ansible_libssh
T 1710275694 18<22tsundoku18>	the tasks for a playbook I'm trying to run have conditionals like "when: (ansible_default_ipv4.address | ansible.netcommon.ipaddr('private'))"
T 1710275700 18<26FreeBDSM18>	jborean93, both netbox instances of the same version (v3.6.4)
T 1710275713 18<26newpy18>	jborean93: yea I have pylibssh
T 1710275722 18<26newpy18>	assumed that would use ssh under the hood?
T 1710275728 18<26newpy18>	or does ssh_common_args not work in that case?
T 1710275730 18<22tsundoku18>	I got the error that netcommon is deprecated and changed it to use ansible.utils.ipaddr('private') instead, but now I'm getting an error "'IPNetwork' object has no attribute 'is_private'"
T 1710275730 18<29jborean9318>	it uses ssh but not the binary
T 1710275753 18<29jborean9318>	See https://docs.ansible.com/ansible/latest/collections/ansible/netcommon/libssh_connection.html for more options that relate to the actual connection plugin https://docs.ansible.com/ansible/latest/collections/ansible/netcommon/libssh_connection.html
T 1710275762 18<22tsundoku18>	my understanding is that ansible_default_ipv4.address should return an object of type IPAddress, not IPNetwork, but is that incorrect?
T 1710275778 18<29jborean9318>	FreeBDSM: the stacktrace indicates this is the code that's failing https://github.com/netbox-community/ansible_modules/blob/9bddc607c3756bb8e84d38da23538234158cb2ec/plugins/inventory/nb_inventory.py#L1511-L1541
T 1710275797 18<29jborean9318>	`netbox_api_version` at that point is an integer which `Version(1)` does not like
T 1710275955 18<26FreeBDSM18>	jborean93, I change the token from ciphertext to plaintext and the error/stacktrace is gone, how'd you explain that?
T 1710275980 18<29jborean9318>	could be that the value is causing an auth error so the response changes when it gets to retrieving the remote contents
T 1710276060 18<29jborean9318>	also what exact version of the collection are you using, 3.6.4 doesn't exist on galaxy
T 1710276074 18<29jborean9318>	`ansible-galaxy collection list` should show you the version
T 1710276118 18<29jborean9318>	looks like there is also caching involved so potentially that might be causing a problem
T 1710276123 18<26FreeBDSM18>	3.14.0
T 1710276137 18<26FreeBDSM18>	yeah, caching is involved but works fine
T 1710276151 18<26FreeBDSM18>	I clean it up before running a test
T 1710276210 18<26FreeBDSM18>	in success scenario the next line after 'Fetching: ... /api/status' it fetches more endpoints
T 1710276227 18<29jborean9318>	if it was me I would add a `print(status)`before line 1513 in `/Users/user/.ansible/collections/ansible_collections/netbox/netbox/plugins/inventory/nb_inventory.py`
T 1710276255 18<29jborean9318>	that way you can see the raw response and find out why it might be breaking the subsequent code
T 1710276342 18<29jborean9318>	https://github.com/netbox-community/ansible_modules/blob/b77a6bee2bb7e23f855b437b969a747eabfa83b7/plugins/inventory/nb_inventory.py#L1493-L1516 yea that will do it
T 1710276350 18<26FreeBDSM18>	jborean93, why status?
T 1710276383 18<26FreeBDSM18>	shouldn't it be netbox_api_version?
T 1710276389 18<29jborean9318>	`self._fetch_information` in your version has a blank Exception catch and sets `netbox_api_version = 0` on a failure causing the problem with the line below
T 1710276409 18<26FreeBDSM18>	oh, you are at the different content
T 1710276413 18<29jborean9318>	so most likely there is an authentication problem causing `_fetch_information` to fail
T 1710276421 18<29jborean9318>	yea sorry I only just downloaded your specific version
T 1710276439 18<26FreeBDSM18>	https://github.com/netbox-community/ansible_modules/blob/v3.14.0/plugins/inventory/nb_inventory.py
T 1710276446 18<26FreeBDSM18>	why blob?
T 1710276447 18<29jborean9318>	yep got that up now
T 1710276498 18<26FreeBDSM18>	so after that line I add print(status) https://github.com/netbox-community/ansible_modules/blob/v3.14.0/plugins/inventory/nb_inventory.py#L1494 right?
T 1710276511 18<29jborean9318>	nah that won't help status won't be set because of the exception
T 1710276548 18<26FreeBDSM18>	but it'd execute try first, no?
T 1710276566 18<26FreeBDSM18>	or does it stop immediately upon exception and goes to 'except' block?
T 1710276594 18<29jborean9318>	add a line after `1496` with `import traceback; traceback.print_exc()`
T 1710276616 18<29jborean9318>	if `self._fetch_information` failed (which I'm assuming it did here) then `status` won't be set and it will go directly to the `except` clause
T 1710276683 18<26FreeBDSM18>	maybe I should just update the collection to the latest release?
T 1710276696 18<26FreeBDSM18>	I can't find the list of supported netbox versions tho
T 1710276724 18<29jborean9318>	you could also look at updating the collection version as they got rid of that except block around `_fetch_information`
T 1710276738 18<26FreeBDSM18>	my thinking exactly
T 1710276763 18<29jborean9318>	https://github.com/netbox-community/ansible_modules/commit/159f30927d184d1850518c04bf659cae3758d8d1
T 1710276844 18<26FreeBDSM18>	:D
T 1710276856 18<26FreeBDSM18>	that's my case exactly!
T 1710277177 18<26FreeBDSM18>	what the... I did `ansible-galaxy collection install --upgrade netbox.netbox` it seemingly fetched and installed 3.17.0, re-executing that command says netbox.netbox:3.17.0 is already installed, skipping, but `ansible-galaxy collection list` says it is 3.14.0 still
T 1710277194 18<26FreeBDSM18>	did they forget to update metadata in their module?
T 1710277258 18<19flowerysong18>	tsundoku: The type is a red herring, `is_private()` was removed in netaddr 1.0.0 (released 2024-02-10) and you probably updated your install.
T 1710277322 18<19flowerysong18>	Ah, there's an open report: https://github.com/ansible-collections/ansible.utils/issues/331
T 1710277785 18<26FreeBDSM18>	nice, the stack trace has changed, it still fails and now it even spits out my token in the warning, saying `failed to parse netbox_inventory.yaml with auto plugin: Invalid header b'Token heregoesmytoken2131231\n'
T 1710277803 18<22tsundoku18>	flowerysong: thanks
T 1710277804 18<29jborean9318>	I'm assuming the `\n` is the culprit here
T 1710277820 18<29jborean9318>	which tells you the encrypted string contains the end newline whereas your working example does not
T 1710277829 18<26FreeBDSM18>	damn! exactly!
T 1710277856 18<26FreeBDSM18>	I did `cat file_with_token | ansible-vault encrypt`
T 1710277880 18<29jborean9318>	if you are doing it with the command line interactively you need to press ctrl+d twice for it to work
T 1710277887 18<29jborean9318>	otherwise your file must have no newline at the end
T 1710277898 18<26FreeBDSM18>	it has no newline at the end
T 1710277904 18<26FreeBDSM18>	which is weird then
T 1710277916 18<26FreeBDSM18>	but still, cat adds \n at the end
T 1710277923 18<29jborean9318>	could be how cat
T 1710277925 18<29jborean9318>	works yea
T 1710277961 18<27colo18>	FreeBDSM: GNU cat does not
T 1710277963 18<29jborean9318>	hmm no it doesn't do that for me
T 1710277975 18<27colo18>	and I'd be surprised if other impls did
T 1710277978 18<29jborean9318>	https://www.irccloud.com/pastebin/OhcdnnYK/
T 1710277990 18<27colo18>	tias:  head -n1 /etc/passwd | tr -d \\n | cat
T 1710277993 18<29jborean9318>	I don't have a macOS host to test so I have no idea what BSD ones do
T 1710278004 18<26FreeBDSM18>	I'm on the macos(
T 1710278016 18<29jborean9318>	you sure it doesn't have a newline at the end
T 1710278060 18<26FreeBDSM18>	yeah. cat adds it. Just used printf directly (will wipe the token from shell history) - and it works now
T 1710278088 18<26FreeBDSM18>	thank you a lot, jborean93 for bearing with me with all this adventure
T 1710278121 18<29jborean9318>	weird I spun up a macOS VM and cat definitely doesn't append a newline for me
T 1710278140 18<29jborean9318>	https://www.irccloud.com/pastebin/qVAG6BDL/
T 1710278145 18<26newpy18>	is there an env variable for ssh KexAlgorithms and HostKeyAlgorithms?
T 1710278167 18<26newpy18>	note: if you edit the file in vim it adds a new line
T 1710278260 18<26FreeBDSM18>	jborean93, weirdly, I can confirm that `hexdump -C myfile` and `cat myfile | hexdump -C` output the same here
T 1710278286 18<26FreeBDSM18>	but even `wc -l myfile` returns 1
T 1710278294 18<26FreeBDSM18>	(I am sane, yet)
T 1710278296 18<27colo18>	newpy: afaik, only ssh options (-oKey=Value) for that
T 1710278298 18<27colo18>	for the client
T 1710278317 18<29jborean9318>	and the libssh plugin only supports the proxy commands according to its docs
T 1710278357 18<26newpy18>	jborean93: hmm I just tried [libssh] host_key_checking = true
T 1710278379 18<26newpy18>	so it at least uses ansible.cfg
T 1710278384 18<29jborean9318>	it does
T 1710278390 18<29jborean9318>	if you look at https://docs.ansible.com/ansible/latest/collections/ansible/netcommon/libssh_connection.html
T 1710278393 18<26FreeBDSM18>	jborean93, could you explain why `ansible-galaxy collection list` still lists older version of netbox.netbox for me after I upgraded it?
T 1710278403 18<29jborean9318>	for `ssh_extra_args` it says
T 1710278404 18<29jborean9318>	> ProxyCommand is the only supported argument.
T 1710278413 18<29jborean9318>	FreeBDSM: I'm not sure sorry
T 1710278534 18<26newpy18>	jborean93: hmm so I can just use the ansible_libssh_proxy_command env var with "ssh -o ..." ?
T 1710278545 18<26newpy18>	need to see how to pass user/pw/host in
T 1710278557 18<29jborean9318>	the docs I linked you tell you all the options you can set with it
T 1710278572 18<29jborean9318>	the free form ssh args says it only uses the ProxyCommand free form args
T 1710278670 18<26FreeBDSM18>	ah, `a-g collection verify netbox.netbox` says file plugins/inventory/__pycache__/nb_inventory.cpython-311.pyc is modified
T 1710286238 18<26newpy18>	how do I set key exchange algorithms for routers in inventory if I'm using ansiblell-pylibssh?
T 1710286270 18<26newpy18>	docs say it's not supported? tried uninstalling pylibssh and using paramiko instead but still no dice
T 1710287966 18<29jborean9318>	newpy: either ansible-pylibssh needs to support it somehow or you select the paramiko connection plugin (if netcommon still allows that)
T 1710287983 18<29jborean9318>	unfortunately I don't really know the workings of ansible-pylibssh so I can't really say for sure if they expose it in any way
T 1710288038 18<26newpy18>	jborean93: hmm, I tried uninstalling ansible-pylibssh but I'm not sure if it used paramiko, sec
T 1710288105 18<26newpy18>	oh n/m it definitely did "[WARNING]: ansible-pylibssh not installed, falling back to paramiko"
T 1710288116 18<26newpy18>	but it didn't take the ssh_common_args from inventory :/
T 1710288119 18<29jborean9318>	you'll then have to see if paramiko offers a way to set it
T 1710288126 18<26newpy18>	ah k, I'll check the docs
T 1710288138 18<29jborean9318>	https://docs.ansible.com/ansible/2.10/collections/ansible/builtin/paramiko_ssh_connection.html are the options for paramiko
T 1710288199 18<26newpy18>	it says it'll scan ssh_common_args if I use proxycommand?
T 1710288225 18<26newpy18>	can I use proxycommand without a jump server?
T 1710288227 18<29jborean9318>	`ssh_common_args` is just an option name there could be another option around
T 1710288250 18<29jborean9318>	https://docs.ansible.com/ansible/latest/collections/ansible/builtin/paramiko_ssh_connection.html is a newer doc, I linked the 2.10 ones
T 1710288264 18<29jborean9318>	I also don't fully know how network_cli really uses paramiko and if you can even set options that way
T 1710288304 18<29jborean9318>	at a glance it doesn't look like you can do this sorry
T 1710288405 18<26newpy18>	hmm, need to figure out how to get macos to let docker containers ssh then haha
T 1710288418 18<26newpy18>	got a "works on my machine" issue, team mate can't run locally on mac os
T 1710288438 18<26newpy18>	*let docker containers use ssh_config
T 1710308285 19*	Now talking on 22#ansible
T 1710308285 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710308285 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710308285 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710340572 19*	Now talking on 22#ansible
T 1710340572 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710340572 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710340573 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710340593 18<29OutOfService18>	I got this from this repo:
T 1710340595 18<29OutOfService18>	https://github.com/TechDufus/dotfiles/blob/main/group_vars/all.yml
T 1710341020 18<29OutOfService18>	this is the -vvv failure: https://pastebin.com/e2SFAaBm
T 1710341029 18<29OutOfService18>	this is the -vvvv failure: https://pastebin.com/e2SFAaBm
T 1710341121 18<19oblikoamorale18>	https://docs.ansible.com/ansible/latest/collections/ansible/builtin/user_module.html#parameter-password  # module expects a hashed password. read the link, check the mentioned FAQ, get back if you still have questions
T 1710343036 19*	Now talking on 22#ansible
T 1710343036 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710343036 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710343036 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710343070 18<29OutOfService18>	oblikoamorale as fas as I know, these folders are for storing variables related to the invenmtory, not the users. Maybe I understood it wrong. I mean.. this password is not dependent os the inventory or remote servers I will work with
T 1710343082 18<19oblikoamorale18>	keeping sensitive data in public repos, even in vaulted form, is not very good practice
T 1710343128 18<19oblikoamorale18>	by user data I meant any data that can be supplied by roles or tasks users, not necessary data related to users management
T 1710343160 18<29OutOfService18>	what I'd like to do is to save a txt file with all my plain text passwords, and make ansioble read from there so that it can decrypt the crypted content in tasks. It'0s not the best aproach, but I think i'd be very difficult for anyone to decrypt that kind of content
T 1710343207 18<29OutOfService18>	So.. could I get an idea of how you think I would do this approach?
T 1710343245 18<29OutOfService18>	trying to keep the confort of not having to remember all my passwords, not to have to write all of them any time I run the playbook
T 1710343280 18<29OutOfService18>	As you said, I prefer to lear this kind of security things from my learning beggining
T 1710343293 18<29OutOfService18>	and try to not get iused to use in a bad way
T 1710343298 18<29OutOfService18>	*used
T 1710343320 18<19oblikoamorale18>	yeah, don't do that. I already told you ansivle vars plugin handles loading variable data, sparing you the necessity to muck with txt files
T 1710343459 18<19oblikoamorale18>	https://docs.ansible.com/ansible/latest/inventory_guide/intro_inventory.html#splitting-out-vars
T 1710344133 18<29OutOfService18>	thanks a lot for all your help oblikoamorale. I've learned good things from you
T 1710345253 18<26alien_lappy18>	is there a way for ansible to auto-install collections in the playbook?
T 1710345754 18<19oblikoamorale18>	no, there is no auto anything, unless you manually call ansible-galaxy. https://docs.ansible.com/ansible/latest/collections_guide/collections_installing.html#installing-collections
T 1710346529 19*	Now talking on 22#ansible
T 1710346529 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710346529 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710346530 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710347504 19*	Now talking on 22#ansible
T 1710347504 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710347504 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710347504 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710351789 19*	Now talking on 22#ansible
T 1710351789 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710351789 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710351789 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710352972 18<25trilogy18>	I have an inventory config that defines dynamic groups. The groups all have a magic string that needs to be frequently changed depending on the playbook, and that string is also used within the playbook in various spots, so I have it set in a vars file as well. What are my options regarding how to template it into the dynamic groups? I don't think the template can read from a vars file. Can I read from
T 1710352978 18<25trilogy18>	the environment...? And force the user to always update environment variables? Or...?
T 1710358873 18<27PSz18>	Hi. I want to use community.general.proxmox_kvm. But I need to add some delay after task and between each hosts in task. Is it possible?
T 1710358919 18<27PSz18>	Without it I have proxmox problem: trying to acquire lock...
T 1710359083 18<28cla18>	Pastebin your tasks and tell us where the delay should be.
T 1710359358 18<27PSz18>	cla: This module is not ready to run in parallel. My question is of a general nature. I want nothing to be parallelized. https://pastebin.com/PYq6YCdx
T 1710359723 18<28cla18>	PSz: I guess you dould do name: "{{ item }}" and loop over "{{ ansible_play_hosts }}"
T 1710359735 18<25RBecker18>	you can also set serial: 1 in the playbook which will force it to run one host at a time
T 1710359744 18<25RBecker18>	https://docs.ansible.com/ansible/latest/playbook_guide/playbooks_strategies.html#setting-the-batch-size-with-serial
T 1710359752 18<28cla18>	This is the second solution
T 1710359940 18<27PSz18>	cla: And add run_once...
T 1710359995 18<27PSz18>	RBecker: What is default value for serial?
T 1710360009 18<25RBecker18>	the entire hosts target at once
T 1710360108 18<27PSz18>	RBecker: Then theoretically: serial = size of ansible_play_hosts. Am I right ?
T 1710360113 18<25RBecker18>	right
T 1710360199 18<27PSz18>	But can I set serial in main.yml for role?
T 1710360259 18<25RBecker18>	unfortunately it's only available for a play, not roles
T 1710360298 18<25RBecker18>	you can have multiple plays in the playbook that have different serial values, however: https://stackoverflow.com/questions/64473484/serial-execution-of-a-role-in-ansible
T 1710360350 18<27PSz18>	Is it be helpful: throttle: 1
T 1710360757 18<27PSz18>	With throttle: 1 and extra wait_for after task my problem is gone.
T 1710370368 19*	Now talking on 22#ansible
T 1710370368 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710370368 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710370368 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710379561 19*	Now talking on 22#ansible
T 1710379561 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710379561 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710379561 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710392144 18<27alepzi18>	hey all. the synchronize module has a "delete" option. what does that translate to in the actual rsync call?
T 1710392182 18<27alepzi18>	--delete-after right?
T 1710407198 19*	Now talking on 22#ansible
T 1710407198 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710407198 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710407198 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710407298 18<19double-p18>	is httpapi a bit limited for concurrent/serial access? it works nicely with `serial: 1`, but if i run multiple hosts in parallel (with ansible_host all the same for them), i get connection refused on some socket (connect(self.socket_path)\nConnectionRefusedError)) .. q: is this expected because i dont see connection issues at the api-endpoint
T 1710407468 19*	Now talking on 22#ansible
T 1710407468 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710407468 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710407468 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710407488 18<28cla18>	What httpapi?
T 1710407522 18<25endre18>	wth
T 1710407665 18<19double-p18>	zabbix
T 1710407754 19*	Now talking on 22#ansible
T 1710407754 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710407754 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710407754 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710407779 18<25endre18>	i don't see how it is an ansible problem
T 1710408034 18<19double-p18>	mhmm, ok. so further digging on the endpoint side of it
T 1710408857 19*	Now talking on 22#ansible
T 1710408857 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710408857 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710408857 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710414114 18<27stenno18>	oh man i only learned about DEFAULT_STDOUT_CALLBACK just now
T 1710414123 18<27stenno18>	i can throw away quite some code i wrote now :P
T 1710414155 18<27stenno18>	for json output
T 1710414205 18<25endre18>	:D
T 1710414217 18<25endre18>	while at it, don't miss other kind of plugins too
T 1710414229 18<27stenno18>	i guess it is the fate of programmers to sometimes implement some stuff, only to figure out it already exists
T 1710414229 18<25endre18>	miss out
T 1710414231 18<27stenno18>	yeah will do
T 1710414249 18<27stenno18>	super useful feature
T 1710414250 18<25endre18>	i wrote an inventory plugin
T 1710414258 18<25endre18>	and am still proud of that
T 1710414282 18<27stenno18>	neat
T 1710414490 18<27stenno18>	thank god i can throw away this horribly wonky code tbf
T 1710414496 18<27stenno18>	it never felt good
T 1710419095 18<25fireba1118>	endre: inventory plugin? to do what?
T 1710419900 18<29JEEB18>	ah, I noticed last week that jinja templating in ansible usage has made me write weird python code: `None if not check_var else touch_that_var`
T 1710419924 18<29JEEB18>	because in jinja templating the variable will be interpreted so you can't put the truth case first :D
T 1710420051 18<25endre18>	fireba11: huhh i have an ssh session manager
T 1710420054 18<25endre18>	that manages ssh configs
T 1710420064 18<25endre18>	it also can act as an ansible inventory plugin
T 1710420072 18<25endre18>	without the need of any intermediate files
T 1710420946 18<25fireba1118>	ah okay
T 1710425677 18<19flowerysong18>	JEEB: ...that's not true. https://gist.github.com/flowerysong/a6b37a0f26fec729b840fd222dbb6db0
T 1710425724 18<19flowerysong18>	Jinja has the same short-circuit evaluation behaviour as Python.
T 1710425905 18<29JEEB18>	flowerysong: that is good. I'll have to check tomorrow some real examples
T 1710427718 18<19oblikoamorale18>	you are probably mixing it with ternary filter which does indeed require its arguments to be defined
T 1710429247 18<29OutOfService18>	Hi
T 1710429259 18<29OutOfService18>	hi oblikoamorale :)
T 1710429362 18<29OutOfService18>	I have a doubf regarding the use of variables in a list (I'm not sure if this is a list or a dict.. I still need to learn that kind of things...).
T 1710429366 18<29OutOfService18>	https://pastebin.com/m0Tb1aps
T 1710429403 18<29OutOfService18>	It this paste, if I use the name with no variables, it works like a charm. But, if I try to use the second opction, using an already defined variable, it gets lost
T 1710429420 18<29OutOfService18>	If somebody could help me to find why, I will be very happy
T 1710429808 18<29OutOfService18>	In this ocasion, I use a prompt_vars at the playbook level which ask me for the username. No matter what I do, it's like if the task isn't able to get the content of the user_name variable. This is the error I get:
T 1710429809 18<29OutOfService18>	https://pastebin.com/JE34bkiV
T 1710429923 18<19oblikoamorale18>	https://github.com/ansible/ansible/issues/17324#issuecomment-685102595
T 1710430243 18<29OutOfService18>	Oh. I didn't know. Thanks for bringing me this information oblikoamorale
T 1710430280 18<29OutOfService18>	Now I also know it's an dictionary key :)
T 1710430622 18<19oblikoamorale18>	wouldn't hurt to get acquainted with yaml basics: https://docs.ansible.com/ansible/latest/reference_appendices/YAMLSyntax.html
T 1710430761 18<29OutOfService18>	I know. I thought it would a good idea to learn ansible on the fly.. but I realize that some things should be learned before starting to play
T 1710430794 18<29OutOfService18>	Thankls for all your advices oblikoamorale
T 1710456684 18<26newpy18>	I'm looking into testing my collections/roles/playbooks and I'd like to provide an inventory instead of spinning something up via molecule, is there a tutorial for something like that?
T 1710470451 19*	Now talking on 22#ansible
T 1710470451 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710470451 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710470451 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710470700 19*	Now talking on 22#ansible
T 1710470700 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710470700 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710470700 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710472290 18<26newpy18>	I have a strange yaml-lint error: "plain value cannot start with directive indicator character %"
T 1710472358 18<26newpy18>	mind taking a look? https://paste.ee/p/1m1jp
T 1710472385 18<26newpy18>	oh maybe my for loop needs to be indented?
T 1710472471 18<26newpy18>	oh I think vscode is processing it as yaml
T 1710479006 19*	Now talking on 22#ansible
T 1710479006 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710479006 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710479006 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710480267 18<24zespri18>	imaging I have `bla: "{{ value }}"` somewhere in a task in yaml. What is the syntax to make `bla` itself (not the value) come out a variable too. In this example: https://gist.github.com/AndrewSav/d5090a592da5ee309b55412ccf5d3436 I want key1 and key2 key names to come from vars, to make the question more concrete
T 1710480493 18<19double-p18>	zespri: like this? https://stackoverflow.com/a/25375815
T 1710480558 18<24zespri18>	sorry struggling to connect the dots
T 1710480631 18<19double-p18>	that splits the variable dict and there you get {{ key }}
T 1710480638 18<19double-p18>	which is the 'name'
T 1710480898 18<24zespri18>	I do not have a dict, I want to create a dict with a key given in a variable
T 1710481196 18<19flowerysong18>	zespri: https://witchychant.com/ansible-templated-dictionary-keys/
T 1710481258 18<24zespri18>	flowerysong: thank you
T 1710501318 20*	Disconnected (20)
T 1710501475 19*	Now talking on 22#ansible
T 1710501475 22*	Topic for 22#ansible is: https://docs.ansible.com * latest releases: ansible-core 2.16.4, 2.15.9, 2.14.14; ansible 9.3.0; ansible 2.9 is EOL 💀 https://groups.google.com/g/ansible-announce/c/kegIH5_okmg/
T 1710501475 22*	Topic for 22#ansible set by 26sivel!~sivel@ansible/staff/sivel (24Tue Feb 27 19:30:00 2024)
T 1710501476 -18ChanServ-	[#ansible] Welcome to the Ansible Community. This channel's history is visible on Matrix and can be viewed at https://chat.ansible.im/#/room/#ansible:libera.chat
T 1710512476 18<26alien_lappy18>	one host has a file which i want the contents to be in a var, so i can use it for the other hosts? is that possible?
T 1710512515 18<28cla18>	slurp module
T 1710512521 18<26alien_lappy18>	i looked at lookup, but how would this work for for a specific host?
T 1710512590 18<26alien_lappy18>	oic, put that in an earlier task and then limit for that host only
T 1710512595 18<26alien_lappy18>	then register and use it
T 1710512598 18<26alien_lappy18>	ok, i get it
T 1710512608 18<26alien_lappy18>	but it is just text not binary, so maybe i can use fetch
T 1710512642 18<28cla18>	fetch is used to get file from remote to local.
T 1710512663 18<26alien_lappy18>	ic, yeah, fetch is not quite the same
T 1710512665 18<26alien_lappy18>	thx
T 1710512671 18<28cla18>	slurp otherwise is to get file content and store it in variable as base64 encoded format.
T 1710512683 18<28cla18>	alien_lappy: https://docs.ansible.com/ansible/latest/collections/ansible/builtin/slurp_module.html
T 1710512717 18<26alien_lappy18>	can i use encoding none, or is that bad?
T 1710512731 18<26alien_lappy18>	cla: yeah, i was looking on that page
T 1710512761 18<26alien_lappy18>	maybe encoding is safer, i should leave that in
T 1710512986 18<26alien_lappy18>	cla: can i also set it to a specific host var?
T 1710513194 18<26Oerlt18>	Is it posible for the file module to delete files based on attributes? Can a file named icecream.txt on a remote host only be deleted if it has certain attributes?
T 1710513516 18<26alien_lappy18>	can i just use a variable set by set_fact in another host later on? or do i need to do something like hosts[hostname].facts.some_fact or something,
T 1710513609 18<26alien_lappy18>	wait, i can't use set_fact for this, i need to set it for another host
T 1710513651 18<26alien_lappy18>	can i just use "hostvars[somehost].newvar" in register ?
T 1710515108 18<26alien_lappy18>	ok, i guess i can't
T 1710515292 18<26alien_lappy18>	so, in this host A, i loop a certain group G of hosts, i get from host A contents of a file which has hostname of group G in the path, but then i can't use set_fact because it'll overwrite it from last loop
T 1710515325 18<26alien_lappy18>	can i use set_fact to set a var like foo[bar]: value ? so it doesn't overwrite the other foo[baz] stuff?
T 1710515352 18<26alien_lappy18>	maybe i need to use set_fact and a filter to combine the old var and the new info?
